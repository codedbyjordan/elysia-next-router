var MY=Object.create;var{defineProperty:X$,getPrototypeOf:FY,getOwnPropertyNames:W6}=Object;var H6=Object.prototype.hasOwnProperty;var z0=($,W,H)=>{for(let Y of W6(W))if(!H6.call($,Y)&&Y!=="default")X$($,Y,{get:()=>W[Y],enumerable:!0});if(H){for(let Y of W6(W))if(!H6.call(H,Y)&&Y!=="default")X$(H,Y,{get:()=>W[Y],enumerable:!0});return H}},v0=($,W,H)=>{H=$!=null?MY(FY($)):{};const Y=W||!$||!$.__esModule?X$(H,"default",{value:$,enumerable:!0}):H;for(let X of W6($))if(!H6.call(Y,X))X$(Y,X,{get:()=>$[X],enumerable:!0});return Y};var Z0=($,W)=>()=>(W||$((W={exports:{}}).exports,W),W.exports);var kW=($,W)=>{for(var H in W)X$($,H,{get:W[H],enumerable:!0,configurable:!0,set:(Y)=>W[H]=()=>Y})};var dW=Z0((V9,X6)=>{var z$=function(){},UY=function($,W,H){this.fn=$,this.context=W,this.once=H||!1},fW=function($,W,H,Y,X){if(typeof H!=="function")throw new TypeError("The listener must be a function");var z=new UY(H,Y||$,X),Z=G0?G0+W:W;if(!$._events[Z])$._events[Z]=z,$._eventsCount++;else if(!$._events[Z].fn)$._events[Z].push(z);else $._events[Z]=[$._events[Z],z];return $},C$=function($,W){if(--$._eventsCount===0)$._events=new z$;else delete $._events[W]},C0=function(){this._events=new z$,this._eventsCount=0},wY=Object.prototype.hasOwnProperty,G0="~";if(Object.create){if(z$.prototype=Object.create(null),!new z$().__proto__)G0=!1}C0.prototype.eventNames=function $(){var W=[],H,Y;if(this._eventsCount===0)return W;for(Y in H=this._events)if(wY.call(H,Y))W.push(G0?Y.slice(1):Y);if(Object.getOwnPropertySymbols)return W.concat(Object.getOwnPropertySymbols(H));return W};C0.prototype.listeners=function $(W){var H=G0?G0+W:W,Y=this._events[H];if(!Y)return[];if(Y.fn)return[Y.fn];for(var X=0,z=Y.length,Z=new Array(z);X<z;X++)Z[X]=Y[X].fn;return Z};C0.prototype.listenerCount=function $(W){var H=G0?G0+W:W,Y=this._events[H];if(!Y)return 0;if(Y.fn)return 1;return Y.length};C0.prototype.emit=function $(W,H,Y,X,z,Z){var Q=G0?G0+W:W;if(!this._events[Q])return!1;var M=this._events[Q],B=arguments.length,j,D;if(M.fn){if(M.once)this.removeListener(W,M.fn,void 0,!0);switch(B){case 1:return M.fn.call(M.context),!0;case 2:return M.fn.call(M.context,H),!0;case 3:return M.fn.call(M.context,H,Y),!0;case 4:return M.fn.call(M.context,H,Y,X),!0;case 5:return M.fn.call(M.context,H,Y,X,z),!0;case 6:return M.fn.call(M.context,H,Y,X,z,Z),!0}for(D=1,j=new Array(B-1);D<B;D++)j[D-1]=arguments[D];M.fn.apply(M.context,j)}else{var C=M.length,w;for(D=0;D<C;D++){if(M[D].once)this.removeListener(W,M[D].fn,void 0,!0);switch(B){case 1:M[D].fn.call(M[D].context);break;case 2:M[D].fn.call(M[D].context,H);break;case 3:M[D].fn.call(M[D].context,H,Y);break;case 4:M[D].fn.call(M[D].context,H,Y,X);break;default:if(!j)for(w=1,j=new Array(B-1);w<B;w++)j[w-1]=arguments[w];M[D].fn.apply(M[D].context,j)}}}return!0};C0.prototype.on=function $(W,H,Y){return fW(this,W,H,Y,!1)};C0.prototype.once=function $(W,H,Y){return fW(this,W,H,Y,!0)};C0.prototype.removeListener=function $(W,H,Y,X){var z=G0?G0+W:W;if(!this._events[z])return this;if(!H)return C$(this,z),this;var Z=this._events[z];if(Z.fn){if(Z.fn===H&&(!X||Z.once)&&(!Y||Z.context===Y))C$(this,z)}else{for(var Q=0,M=[],B=Z.length;Q<B;Q++)if(Z[Q].fn!==H||X&&!Z[Q].once||Y&&Z[Q].context!==Y)M.push(Z[Q]);if(M.length)this._events[z]=M.length===1?M[0]:M;else C$(this,z)}return this};C0.prototype.removeAllListeners=function $(W){var H;if(W){if(H=G0?G0+W:W,this._events[H])C$(this,H)}else this._events=new z$,this._eventsCount=0;return this};C0.prototype.off=C0.prototype.removeListener;C0.prototype.addListener=C0.prototype.on;C0.prefixed=G0;C0.EventEmitter=C0;if(typeof X6!=="undefined")X6.exports=C0});var E0=Z0((lW)=>{var NY=function($){return I$($)&&Symbol.asyncIterator in $},LY=function($){return I$($)&&Symbol.iterator in $},AY=function($){return ArrayBuffer.isView($)},BY=function($){return $ instanceof Promise},jY=function($){return $ instanceof Uint8Array},DY=function($){return $ instanceof Date&&Number.isFinite($.getTime())},KY=function($,W){return W in $},OY=function($){return I$($)&&hW($.constructor)&&$.constructor.name==="Object"},I$=function($){return $!==null&&typeof $==="object"},PY=function($){return Array.isArray($)&&!ArrayBuffer.isView($)},pW=function($){return $===void 0},iW=function($){return $===null},oW=function($){return typeof $==="boolean"},z6=function($){return typeof $==="number"},bY=function($){return z6($)&&Number.isInteger($)},mW=function($){return typeof $==="bigint"},nW=function($){return typeof $==="string"},hW=function($){return typeof $==="function"},uW=function($){return typeof $==="symbol"},SY=function($){return mW($)||oW($)||iW($)||z6($)||nW($)||uW($)||pW($)};Object.defineProperty(lW,"__esModule",{value:!0});lW.IsValueType=lW.IsSymbol=lW.IsFunction=lW.IsString=lW.IsBigInt=lW.IsInteger=lW.IsNumber=lW.IsBoolean=lW.IsNull=lW.IsUndefined=lW.IsArray=lW.IsObject=lW.IsPlainObject=lW.HasPropertyKey=lW.IsDate=lW.IsUint8Array=lW.IsPromise=lW.IsTypedArray=lW.IsIterator=lW.IsAsyncIterator=void 0;lW.IsAsyncIterator=NY;lW.IsIterator=LY;lW.IsTypedArray=AY;lW.IsPromise=BY;lW.IsUint8Array=jY;lW.IsDate=DY;lW.HasPropertyKey=KY;lW.IsPlainObject=OY;lW.IsObject=I$;lW.IsArray=PY;lW.IsUndefined=pW;lW.IsNull=iW;lW.IsBoolean=oW;lW.IsNumber=z6;lW.IsInteger=bY;lW.IsBigInt=mW;lW.IsString=nW;lW.IsFunction=hW;lW.IsSymbol=uW;lW.IsValueType=SY});var x0=Z0((aW)=>{Object.defineProperty(aW,"__esModule",{value:!0});aW.Type=aW.JsonType=aW.JavaScriptTypeBuilder=aW.JsonTypeBuilder=aW.TypeBuilder=aW.TypeBuilderError=aW.TransformEncodeBuilder=aW.TransformDecodeBuilder=aW.TemplateLiteralDslParser=aW.TemplateLiteralGenerator=aW.TemplateLiteralGeneratorError=aW.TemplateLiteralFinite=aW.TemplateLiteralFiniteError=aW.TemplateLiteralParser=aW.TemplateLiteralParserError=aW.TemplateLiteralResolver=aW.TemplateLiteralPattern=aW.TemplateLiteralPatternError=aW.UnionResolver=aW.KeyArrayResolver=aW.KeyArrayResolverError=aW.KeyResolver=aW.ObjectMap=aW.Intrinsic=aW.IndexedAccessor=aW.TypeClone=aW.TypeExtends=aW.TypeExtendsResult=aW.TypeExtendsError=aW.ExtendsUndefined=aW.TypeGuard=aW.TypeGuardUnknownTypeError=aW.ValueGuard=aW.FormatRegistry=aW.TypeBoxError=aW.TypeRegistry=aW.PatternStringExact=aW.PatternNumberExact=aW.PatternBooleanExact=aW.PatternString=aW.PatternNumber=aW.PatternBoolean=aW.Kind=aW.Hint=aW.Optional=aW.Readonly=aW.Transform=void 0;aW.Transform=Symbol.for("TypeBox.Transform");aW.Readonly=Symbol.for("TypeBox.Readonly");aW.Optional=Symbol.for("TypeBox.Optional");aW.Hint=Symbol.for("TypeBox.Hint");aW.Kind=Symbol.for("TypeBox.Kind");aW.PatternBoolean="(true|false)";aW.PatternNumber="(0|[1-9][0-9]*)";aW.PatternString="(.*)";aW.PatternBooleanExact=`^${aW.PatternBoolean}\$`;aW.PatternNumberExact=`^${aW.PatternNumber}\$`;aW.PatternStringExact=`^${aW.PatternString}\$`;var Z6;(function($){const W=new Map;function H(){return new Map(W)}$.Entries=H;function Y(){return W.clear()}$.Clear=Y;function X(M){return W.delete(M)}$.Delete=X;function z(M){return W.has(M)}$.Has=z;function Z(M,B){W.set(M,B)}$.Set=Z;function Q(M){return W.get(M)}$.Get=Q})(Z6||(aW.TypeRegistry=Z6={}));class H1 extends Error{constructor($){super($)}}aW.TypeBoxError=H1;var tW;(function($){const W=new Map;function H(){return new Map(W)}$.Entries=H;function Y(){return W.clear()}$.Clear=Y;function X(M){return W.delete(M)}$.Delete=X;function z(M){return W.has(M)}$.Has=z;function Z(M,B){W.set(M,B)}$.Set=Z;function Q(M){return W.get(M)}$.Get=Q})(tW||(aW.FormatRegistry=tW={}));var _;(function($){function W(D){return Array.isArray(D)}$.IsArray=W;function H(D){return typeof D==="bigint"}$.IsBigInt=H;function Y(D){return typeof D==="boolean"}$.IsBoolean=Y;function X(D){return D instanceof globalThis.Date}$.IsDate=X;function z(D){return D===null}$.IsNull=z;function Z(D){return typeof D==="number"}$.IsNumber=Z;function Q(D){return typeof D==="object"&&D!==null}$.IsObject=Q;function M(D){return typeof D==="string"}$.IsString=M;function B(D){return D instanceof globalThis.Uint8Array}$.IsUint8Array=B;function j(D){return D===void 0}$.IsUndefined=j})(_||(aW.ValueGuard=_={}));class rW extends H1{}aW.TypeGuardUnknownTypeError=rW;var L;(function($){function W(F){try{return new RegExp(F),!0}catch{return!1}}function H(F){if(!_.IsString(F))return!1;for(let l=0;l<F.length;l++){const K0=F.charCodeAt(l);if(K0>=7&&K0<=13||K0===27||K0===127)return!1}return!0}function Y(F){return Z(F)||W0(F)}function X(F){return _.IsUndefined(F)||_.IsBigInt(F)}function z(F){return _.IsUndefined(F)||_.IsNumber(F)}function Z(F){return _.IsUndefined(F)||_.IsBoolean(F)}function Q(F){return _.IsUndefined(F)||_.IsString(F)}function M(F){return _.IsUndefined(F)||_.IsString(F)&&H(F)&&W(F)}function B(F){return _.IsUndefined(F)||_.IsString(F)&&H(F)}function j(F){return _.IsUndefined(F)||W0(F)}function D(F){return R(F,"Any")&&Q(F.$id)}$.TAny=D;function C(F){return R(F,"Array")&&F.type==="array"&&Q(F.$id)&&W0(F.items)&&z(F.minItems)&&z(F.maxItems)&&Z(F.uniqueItems)&&j(F.contains)&&z(F.minContains)&&z(F.maxContains)}$.TArray=C;function w(F){return R(F,"AsyncIterator")&&F.type==="AsyncIterator"&&Q(F.$id)&&W0(F.items)}$.TAsyncIterator=w;function U(F){return R(F,"BigInt")&&F.type==="bigint"&&Q(F.$id)&&X(F.exclusiveMaximum)&&X(F.exclusiveMinimum)&&X(F.maximum)&&X(F.minimum)&&X(F.multipleOf)}$.TBigInt=U;function A(F){return R(F,"Boolean")&&F.type==="boolean"&&Q(F.$id)}$.TBoolean=A;function O(F){return R(F,"Constructor")&&F.type==="Constructor"&&Q(F.$id)&&_.IsArray(F.parameters)&&F.parameters.every((l)=>W0(l))&&W0(F.returns)}$.TConstructor=O;function N(F){return R(F,"Date")&&F.type==="Date"&&Q(F.$id)&&z(F.exclusiveMaximumTimestamp)&&z(F.exclusiveMinimumTimestamp)&&z(F.maximumTimestamp)&&z(F.minimumTimestamp)&&z(F.multipleOfTimestamp)}$.TDate=N;function b(F){return R(F,"Function")&&F.type==="Function"&&Q(F.$id)&&_.IsArray(F.parameters)&&F.parameters.every((l)=>W0(l))&&W0(F.returns)}$.TFunction=b;function I(F){return R(F,"Integer")&&F.type==="integer"&&Q(F.$id)&&z(F.exclusiveMaximum)&&z(F.exclusiveMinimum)&&z(F.maximum)&&z(F.minimum)&&z(F.multipleOf)}$.TInteger=I;function k(F){return R(F,"Intersect")&&(_.IsString(F.type)&&F.type!=="object"?!1:!0)&&_.IsArray(F.allOf)&&F.allOf.every((l)=>W0(l)&&!J1(l))&&Q(F.type)&&(Z(F.unevaluatedProperties)||j(F.unevaluatedProperties))&&Q(F.$id)}$.TIntersect=k;function d(F){return R(F,"Iterator")&&F.type==="Iterator"&&Q(F.$id)&&W0(F.items)}$.TIterator=d;function R(F,l){return r(F)&&F[aW.Kind]===l}$.TKindOf=R;function r(F){return _.IsObject(F)&&aW.Kind in F&&_.IsString(F[aW.Kind])}$.TKind=r;function k0(F){return T0(F)&&_.IsString(F.const)}$.TLiteralString=k0;function m0(F){return T0(F)&&_.IsNumber(F.const)}$.TLiteralNumber=m0;function g1(F){return T0(F)&&_.IsBoolean(F.const)}$.TLiteralBoolean=g1;function T0(F){return R(F,"Literal")&&Q(F.$id)&&(_.IsBoolean(F.const)||_.IsNumber(F.const)||_.IsString(F.const))}$.TLiteral=T0;function n0(F){return R(F,"Never")&&_.IsObject(F.not)&&Object.getOwnPropertyNames(F.not).length===0}$.TNever=n0;function J0(F){return R(F,"Not")&&W0(F.not)}$.TNot=J0;function Q0(F){return R(F,"Null")&&F.type==="null"&&Q(F.$id)}$.TNull=Q0;function h0(F){return R(F,"Number")&&F.type==="number"&&Q(F.$id)&&z(F.exclusiveMaximum)&&z(F.exclusiveMinimum)&&z(F.maximum)&&z(F.minimum)&&z(F.multipleOf)}$.TNumber=h0;function $1(F){return R(F,"Object")&&F.type==="object"&&Q(F.$id)&&_.IsObject(F.properties)&&Y(F.additionalProperties)&&z(F.minProperties)&&z(F.maxProperties)&&Object.entries(F.properties).every(([l,K0])=>H(l)&&W0(K0))}$.TObject=$1;function y0(F){return R(F,"Promise")&&F.type==="Promise"&&Q(F.$id)&&W0(F.item)}$.TPromise=y0;function G(F){return R(F,"Record")&&F.type==="object"&&Q(F.$id)&&Y(F.additionalProperties)&&_.IsObject(F.patternProperties)&&((l)=>{const K0=Object.getOwnPropertyNames(l.patternProperties);return K0.length===1&&W(K0[0])&&_.IsObject(l.patternProperties)&&W0(l.patternProperties[K0[0]])})(F)}$.TRecord=G;function x(F){return _.IsObject(F)&&aW.Hint in F&&F[aW.Hint]==="Recursive"}$.TRecursive=x;function i(F){return R(F,"Ref")&&Q(F.$id)&&_.IsString(F.$ref)}$.TRef=i;function o(F){return R(F,"String")&&F.type==="string"&&Q(F.$id)&&z(F.minLength)&&z(F.maxLength)&&M(F.pattern)&&B(F.format)}$.TString=o;function A0(F){return R(F,"Symbol")&&F.type==="symbol"&&Q(F.$id)}$.TSymbol=A0;function q0(F){return R(F,"TemplateLiteral")&&F.type==="string"&&_.IsString(F.pattern)&&F.pattern[0]==="^"&&F.pattern[F.pattern.length-1]==="$"}$.TTemplateLiteral=q0;function B0(F){return R(F,"This")&&Q(F.$id)&&_.IsString(F.$ref)}$.TThis=B0;function J1(F){return _.IsObject(F)&&aW.Transform in F}$.TTransform=J1;function M0(F){return R(F,"Tuple")&&F.type==="array"&&Q(F.$id)&&_.IsNumber(F.minItems)&&_.IsNumber(F.maxItems)&&F.minItems===F.maxItems&&(_.IsUndefined(F.items)&&_.IsUndefined(F.additionalItems)&&F.minItems===0||_.IsArray(F.items)&&F.items.every((l)=>W0(l)))}$.TTuple=M0;function u0(F){return R(F,"Undefined")&&F.type==="undefined"&&Q(F.$id)}$.TUndefined=u0;function K(F){return E(F)&&F.anyOf.every((l)=>k0(l)||m0(l))}$.TUnionLiteral=K;function E(F){return R(F,"Union")&&Q(F.$id)&&_.IsObject(F)&&_.IsArray(F.anyOf)&&F.anyOf.every((l)=>W0(l))}$.TUnion=E;function P(F){return R(F,"Uint8Array")&&F.type==="Uint8Array"&&Q(F.$id)&&z(F.minByteLength)&&z(F.maxByteLength)}$.TUint8Array=P;function p(F){return R(F,"Unknown")&&Q(F.$id)}$.TUnknown=p;function f(F){return R(F,"Unsafe")}$.TUnsafe=f;function T(F){return R(F,"Void")&&F.type==="void"&&Q(F.$id)}$.TVoid=T;function $0(F){return _.IsObject(F)&&F[aW.Readonly]==="Readonly"}$.TReadonly=$0;function D0(F){return _.IsObject(F)&&F[aW.Optional]==="Optional"}$.TOptional=D0;function W0(F){return _.IsObject(F)&&(D(F)||C(F)||A(F)||U(F)||w(F)||O(F)||N(F)||b(F)||I(F)||k(F)||d(F)||T0(F)||n0(F)||J0(F)||Q0(F)||h0(F)||$1(F)||y0(F)||G(F)||i(F)||o(F)||A0(F)||q0(F)||B0(F)||M0(F)||u0(F)||E(F)||P(F)||p(F)||f(F)||T(F)||r(F)&&Z6.Has(F[aW.Kind]))}$.TSchema=W0})(L||(aW.TypeGuard=L={}));var sW;(function($){function W(H){return H[aW.Kind]==="Intersect"?H.allOf.every((Y)=>W(Y)):H[aW.Kind]==="Union"?H.anyOf.some((Y)=>W(Y)):H[aW.Kind]==="Undefined"?!0:H[aW.Kind]==="Not"?!W(H.not):!1}$.Check=W})(sW||(aW.ExtendsUndefined=sW={}));class M6 extends H1{}aW.TypeExtendsError=M6;var S;(function($){$[$.Union=0]="Union",$[$.True=1]="True",$[$.False=2]="False"})(S||(aW.TypeExtendsResult=S={}));var R1;(function($){function W(J){return J===S.False?J:S.True}function H(J){throw new M6(J)}function Y(J){return L.TNever(J)||L.TIntersect(J)||L.TUnion(J)||L.TUnknown(J)||L.TAny(J)}function X(J,q){return L.TNever(q)?R(J,q):L.TIntersect(q)?b(J,q):L.TUnion(q)?$6(J,q):L.TUnknown(q)?VW(J,q):L.TAny(q)?z(J,q):H("StructuralRight")}function z(J,q){return S.True}function Z(J,q){return L.TIntersect(q)?b(J,q):L.TUnion(q)&&q.anyOf.some((a)=>L.TAny(a)||L.TUnknown(a))?S.True:L.TUnion(q)?S.Union:L.TUnknown(q)?S.True:L.TAny(q)?S.True:S.Union}function Q(J,q){return L.TUnknown(J)?S.False:L.TAny(J)?S.Union:L.TNever(J)?S.True:S.False}function M(J,q){return L.TObject(q)&&q0(q)?S.True:Y(q)?X(J,q):!L.TArray(q)?S.False:W(X0(J.items,q.items))}function B(J,q){return Y(q)?X(J,q):!L.TAsyncIterator(q)?S.False:W(X0(J.items,q.items))}function j(J,q){return Y(q)?X(J,q):L.TObject(q)?M0(J,q):L.TRecord(q)?p(J,q):L.TBigInt(q)?S.True:S.False}function D(J,q){return L.TLiteral(J)&&_.IsBoolean(J.const)?S.True:L.TBoolean(J)?S.True:S.False}function C(J,q){return Y(q)?X(J,q):L.TObject(q)?M0(J,q):L.TRecord(q)?p(J,q):L.TBoolean(q)?S.True:S.False}function w(J,q){return Y(q)?X(J,q):L.TObject(q)?M0(J,q):!L.TConstructor(q)?S.False:J.parameters.length>q.parameters.length?S.False:!J.parameters.every((a,l0)=>W(X0(q.parameters[l0],a))===S.True)?S.False:W(X0(J.returns,q.returns))}function U(J,q){return Y(q)?X(J,q):L.TObject(q)?M0(J,q):L.TRecord(q)?p(J,q):L.TDate(q)?S.True:S.False}function A(J,q){return Y(q)?X(J,q):L.TObject(q)?M0(J,q):!L.TFunction(q)?S.False:J.parameters.length>q.parameters.length?S.False:!J.parameters.every((a,l0)=>W(X0(q.parameters[l0],a))===S.True)?S.False:W(X0(J.returns,q.returns))}function O(J,q){return L.TLiteral(J)&&_.IsNumber(J.const)?S.True:L.TNumber(J)||L.TInteger(J)?S.True:S.False}function N(J,q){return L.TInteger(q)||L.TNumber(q)?S.True:Y(q)?X(J,q):L.TObject(q)?M0(J,q):L.TRecord(q)?p(J,q):S.False}function b(J,q){return q.allOf.every((a)=>X0(J,a)===S.True)?S.True:S.False}function I(J,q){return J.allOf.some((a)=>X0(a,q)===S.True)?S.True:S.False}function k(J,q){return Y(q)?X(J,q):!L.TIterator(q)?S.False:W(X0(J.items,q.items))}function d(J,q){return L.TLiteral(q)&&q.const===J.const?S.True:Y(q)?X(J,q):L.TObject(q)?M0(J,q):L.TRecord(q)?p(J,q):L.TString(q)?T(J,q):L.TNumber(q)?T0(J,q):L.TInteger(q)?O(J,q):L.TBoolean(q)?D(J,q):S.False}function R(J,q){return S.False}function r(J,q){return S.True}function k0(J){let[q,a]=[J,0];while(!0){if(!L.TNot(q))break;q=q.not,a+=1}return a%2===0?q:aW.Type.Unknown()}function m0(J,q){return L.TNot(J)?X0(k0(J),q):L.TNot(q)?X0(J,k0(q)):H("Invalid fallthrough for Not")}function g1(J,q){return Y(q)?X(J,q):L.TObject(q)?M0(J,q):L.TRecord(q)?p(J,q):L.TNull(q)?S.True:S.False}function T0(J,q){return L.TLiteralNumber(J)?S.True:L.TNumber(J)||L.TInteger(J)?S.True:S.False}function n0(J,q){return Y(q)?X(J,q):L.TObject(q)?M0(J,q):L.TRecord(q)?p(J,q):L.TInteger(q)||L.TNumber(q)?S.True:S.False}function J0(J,q){return Object.getOwnPropertyNames(J.properties).length===q}function Q0(J){return q0(J)}function h0(J){return J0(J,0)||J0(J,1)&&"description"in J.properties&&L.TUnion(J.properties.description)&&J.properties.description.anyOf.length===2&&(L.TString(J.properties.description.anyOf[0])&&L.TUndefined(J.properties.description.anyOf[1])||L.TString(J.properties.description.anyOf[1])&&L.TUndefined(J.properties.description.anyOf[0]))}function $1(J){return J0(J,0)}function y0(J){return J0(J,0)}function G(J){return J0(J,0)}function x(J){return J0(J,0)}function i(J){return q0(J)}function o(J){const q=aW.Type.Number();return J0(J,0)||J0(J,1)&&"length"in J.properties&&W(X0(J.properties.length,q))===S.True}function A0(J){return J0(J,0)}function q0(J){const q=aW.Type.Number();return J0(J,0)||J0(J,1)&&"length"in J.properties&&W(X0(J.properties.length,q))===S.True}function B0(J){const q=aW.Type.Function([aW.Type.Any()],aW.Type.Any());return J0(J,0)||J0(J,1)&&"then"in J.properties&&W(X0(J.properties.then,q))===S.True}function J1(J,q){return X0(J,q)===S.False?S.False:L.TOptional(J)&&!L.TOptional(q)?S.False:S.True}function M0(J,q){return L.TUnknown(J)?S.False:L.TAny(J)?S.Union:L.TNever(J)||L.TLiteralString(J)&&Q0(q)||L.TLiteralNumber(J)&&$1(q)||L.TLiteralBoolean(J)&&y0(q)||L.TSymbol(J)&&h0(q)||L.TBigInt(J)&&G(q)||L.TString(J)&&Q0(q)||L.TSymbol(J)&&h0(q)||L.TNumber(J)&&$1(q)||L.TInteger(J)&&$1(q)||L.TBoolean(J)&&y0(q)||L.TUint8Array(J)&&i(q)||L.TDate(J)&&x(q)||L.TConstructor(J)&&A0(q)||L.TFunction(J)&&o(q)?S.True:L.TRecord(J)&&L.TString(E(J))?(()=>{return q[aW.Hint]==="Record"?S.True:S.False})():L.TRecord(J)&&L.TNumber(E(J))?(()=>{return J0(q,0)?S.True:S.False})():S.False}function u0(J,q){return Y(q)?X(J,q):L.TRecord(q)?p(J,q):!L.TObject(q)?S.False:(()=>{for(let a of Object.getOwnPropertyNames(q.properties)){if(!(a in J.properties)&&!L.TOptional(q.properties[a]))return S.False;if(L.TOptional(q.properties[a]))return S.True;if(J1(J.properties[a],q.properties[a])===S.False)return S.False}return S.True})()}function K(J,q){return Y(q)?X(J,q):L.TObject(q)&&B0(q)?S.True:!L.TPromise(q)?S.False:W(X0(J.item,q.item))}function E(J){return aW.PatternNumberExact in J.patternProperties?aW.Type.Number():(aW.PatternStringExact in J.patternProperties)?aW.Type.String():H("Unknown record key pattern")}function P(J){return aW.PatternNumberExact in J.patternProperties?J.patternProperties[aW.PatternNumberExact]:(aW.PatternStringExact in J.patternProperties)?J.patternProperties[aW.PatternStringExact]:H("Unable to get record value schema")}function p(J,q){const[a,l0]=[E(q),P(q)];return L.TLiteralString(J)&&L.TNumber(a)&&W(X0(J,l0))===S.True?S.True:L.TUint8Array(J)&&L.TNumber(a)?X0(J,l0):L.TString(J)&&L.TNumber(a)?X0(J,l0):L.TArray(J)&&L.TNumber(a)?X0(J,l0):L.TObject(J)?(()=>{for(let qY of Object.getOwnPropertyNames(J.properties))if(J1(l0,J.properties[qY])===S.False)return S.False;return S.True})():S.False}function f(J,q){return Y(q)?X(J,q):L.TObject(q)?M0(J,q):!L.TRecord(q)?S.False:X0(P(J),P(q))}function T(J,q){return L.TLiteral(J)&&_.IsString(J.const)?S.True:L.TString(J)?S.True:S.False}function $0(J,q){return Y(q)?X(J,q):L.TObject(q)?M0(J,q):L.TRecord(q)?p(J,q):L.TString(q)?S.True:S.False}function D0(J,q){return Y(q)?X(J,q):L.TObject(q)?M0(J,q):L.TRecord(q)?p(J,q):L.TSymbol(q)?S.True:S.False}function W0(J,q){return L.TTemplateLiteral(J)?X0(q1.Resolve(J),q):L.TTemplateLiteral(q)?X0(J,q1.Resolve(q)):H("Invalid fallthrough for TemplateLiteral")}function F(J,q){return L.TArray(q)&&J.items!==void 0&&J.items.every((a)=>X0(a,q.items)===S.True)}function l(J,q){return L.TNever(J)?S.True:L.TUnknown(J)?S.False:L.TAny(J)?S.Union:S.False}function K0(J,q){return Y(q)?X(J,q):L.TObject(q)&&q0(q)?S.True:L.TArray(q)&&F(J,q)?S.True:!L.TTuple(q)?S.False:_.IsUndefined(J.items)&&!_.IsUndefined(q.items)||!_.IsUndefined(J.items)&&_.IsUndefined(q.items)?S.False:_.IsUndefined(J.items)&&!_.IsUndefined(q.items)?S.True:J.items.every((a,l0)=>X0(a,q.items[l0])===S.True)?S.True:S.False}function a$(J,q){return Y(q)?X(J,q):L.TObject(q)?M0(J,q):L.TRecord(q)?p(J,q):L.TUint8Array(q)?S.True:S.False}function e$(J,q){return Y(q)?X(J,q):L.TObject(q)?M0(J,q):L.TRecord(q)?p(J,q):L.TVoid(q)?ZY(J,q):L.TUndefined(q)?S.True:S.False}function $6(J,q){return q.anyOf.some((a)=>X0(J,a)===S.True)?S.True:S.False}function XY(J,q){return J.anyOf.every((a)=>X0(a,q)===S.True)?S.True:S.False}function VW(J,q){return S.True}function zY(J,q){return L.TNever(q)?R(J,q):L.TIntersect(q)?b(J,q):L.TUnion(q)?$6(J,q):L.TAny(q)?z(J,q):L.TString(q)?T(J,q):L.TNumber(q)?T0(J,q):L.TInteger(q)?O(J,q):L.TBoolean(q)?D(J,q):L.TArray(q)?Q(J,q):L.TTuple(q)?l(J,q):L.TObject(q)?M0(J,q):L.TUnknown(q)?S.True:S.False}function ZY(J,q){return L.TUndefined(J)?S.True:L.TUndefined(J)?S.True:S.False}function QY(J,q){return L.TIntersect(q)?b(J,q):L.TUnion(q)?$6(J,q):L.TUnknown(q)?VW(J,q):L.TAny(q)?z(J,q):L.TObject(q)?M0(J,q):L.TVoid(q)?S.True:S.False}function X0(J,q){return L.TTemplateLiteral(J)||L.TTemplateLiteral(q)?W0(J,q):L.TNot(J)||L.TNot(q)?m0(J,q):L.TAny(J)?Z(J,q):L.TArray(J)?M(J,q):L.TBigInt(J)?j(J,q):L.TBoolean(J)?C(J,q):L.TAsyncIterator(J)?B(J,q):L.TConstructor(J)?w(J,q):L.TDate(J)?U(J,q):L.TFunction(J)?A(J,q):L.TInteger(J)?N(J,q):L.TIntersect(J)?I(J,q):L.TIterator(J)?k(J,q):L.TLiteral(J)?d(J,q):L.TNever(J)?r(J,q):L.TNull(J)?g1(J,q):L.TNumber(J)?n0(J,q):L.TObject(J)?u0(J,q):L.TRecord(J)?f(J,q):L.TString(J)?$0(J,q):L.TSymbol(J)?D0(J,q):L.TTuple(J)?K0(J,q):L.TPromise(J)?K(J,q):L.TUint8Array(J)?a$(J,q):L.TUndefined(J)?e$(J,q):L.TUnion(J)?XY(J,q):L.TUnknown(J)?zY(J,q):L.TVoid(J)?QY(J,q):H(`Unknown left type operand '${J[aW.Kind]}'`)}function JY(J,q){return X0(J,q)}$.Extends=JY})(R1||(aW.TypeExtends=R1={}));var m;(function($){function W(M){return M.map((B)=>z(B))}function H(M){return new Date(M.getTime())}function Y(M){return new Uint8Array(M)}function X(M){const B=Object.getOwnPropertyNames(M).reduce((D,C)=>({...D,[C]:z(M[C])}),{}),j=Object.getOwnPropertySymbols(M).reduce((D,C)=>({...D,[C]:z(M[C])}),{});return{...B,...j}}function z(M){return _.IsArray(M)?W(M):_.IsDate(M)?H(M):_.IsUint8Array(M)?Y(M):_.IsObject(M)?X(M):M}function Z(M){return M.map((B)=>Q(B))}$.Rest=Z;function Q(M,B={}){return{...z(M),...B}}$.Type=Q})(m||(aW.TypeClone=m={}));var Q6;(function($){function W(w){return w.map((U)=>{const{[aW.Optional]:A,...O}=m.Type(U);return O})}function H(w){return w.every((U)=>L.TOptional(U))}function Y(w){return w.some((U)=>L.TOptional(U))}function X(w){return H(w.allOf)?aW.Type.Optional(aW.Type.Intersect(W(w.allOf))):w}function z(w){return Y(w.anyOf)?aW.Type.Optional(aW.Type.Union(W(w.anyOf))):w}function Z(w){return w[aW.Kind]==="Intersect"?X(w):w[aW.Kind]==="Union"?z(w):w}function Q(w,U){const A=w.allOf.reduce((O,N)=>{const b=D(N,U);return b[aW.Kind]==="Never"?O:[...O,b]},[]);return Z(aW.Type.Intersect(A))}function M(w,U){const A=w.anyOf.map((O)=>D(O,U));return Z(aW.Type.Union(A))}function B(w,U){const A=w.properties[U];return _.IsUndefined(A)?aW.Type.Never():aW.Type.Union([A])}function j(w,U){const A=w.items;if(_.IsUndefined(A))return aW.Type.Never();const O=A[U];if(_.IsUndefined(O))return aW.Type.Never();return O}function D(w,U){return w[aW.Kind]==="Intersect"?Q(w,U):w[aW.Kind]==="Union"?M(w,U):w[aW.Kind]==="Object"?B(w,U):w[aW.Kind]==="Tuple"?j(w,U):aW.Type.Never()}function C(w,U,A={}){const O=U.map((N)=>D(w,N.toString()));return Z(aW.Type.Union(O,A))}$.Resolve=C})(Q6||(aW.IndexedAccessor=Q6={}));var d1;(function($){function W(j){const[D,C]=[j.slice(0,1),j.slice(1)];return`${D.toLowerCase()}${C}`}function H(j){const[D,C]=[j.slice(0,1),j.slice(1)];return`${D.toUpperCase()}${C}`}function Y(j){return j.toUpperCase()}function X(j){return j.toLowerCase()}function z(j,D){const C=p1.ParseExact(j.pattern);if(!i1.Check(C))return{...j,pattern:Z(j.pattern,D)};const A=[...o1.Generate(C)].map((b)=>aW.Type.Literal(b)),O=Q(A,D),N=aW.Type.Union(O);return aW.Type.TemplateLiteral([N])}function Z(j,D){return typeof j==="string"?D==="Uncapitalize"?W(j):D==="Capitalize"?H(j):D==="Uppercase"?Y(j):D==="Lowercase"?X(j):j:j.toString()}function Q(j,D){if(j.length===0)return[];const[C,...w]=j;return[B(C,D),...Q(w,D)]}function M(j,D){return L.TTemplateLiteral(j)?z(j,D):L.TUnion(j)?aW.Type.Union(Q(j.anyOf,D)):L.TLiteral(j)?aW.Type.Literal(Z(j.const,D)):j}function B(j,D){return M(j,D)}$.Map=B})(d1||(aW.Intrinsic=d1={}));var T1;(function($){function W(Z,Q){return aW.Type.Intersect(Z.allOf.map((M)=>X(M,Q)),{...Z})}function H(Z,Q){return aW.Type.Union(Z.anyOf.map((M)=>X(M,Q)),{...Z})}function Y(Z,Q){return Q(Z)}function X(Z,Q){return Z[aW.Kind]==="Intersect"?W(Z,Q):Z[aW.Kind]==="Union"?H(Z,Q):Z[aW.Kind]==="Object"?Y(Z,Q):Z}function z(Z,Q,M){return{...X(m.Type(Z),Q),...M}}$.Map=z})(T1||(aW.ObjectMap=T1={}));var G$;(function($){function W(B){return B[0]==="^"&&B[B.length-1]==="$"?B.slice(1,B.length-1):B}function H(B,j){return B.allOf.reduce((D,C)=>[...D,...Z(C,j)],[])}function Y(B,j){const D=B.anyOf.map((C)=>Z(C,j));return[...D.reduce((C,w)=>w.map((U)=>D.every((A)=>A.includes(U))?C.add(U):C)[0],new Set)]}function X(B,j){return Object.getOwnPropertyNames(B.properties)}function z(B,j){return j.includePatterns?Object.getOwnPropertyNames(B.patternProperties):[]}function Z(B,j){return L.TIntersect(B)?H(B,j):L.TUnion(B)?Y(B,j):L.TObject(B)?X(B,j):L.TRecord(B)?z(B,j):[]}function Q(B,j){return[...new Set(Z(B,j))]}$.ResolveKeys=Q;function M(B){return`^(${Q(B,{includePatterns:!0}).map((C)=>`(${W(C)})`).join("|")})\$`}$.ResolvePattern=M})(G$||(aW.KeyResolver=G$={}));class F6 extends H1{}aW.KeyArrayResolverError=F6;var Z$;(function($){function W(H){return Array.isArray(H)?H:L.TUnionLiteral(H)?H.anyOf.map((Y)=>Y.const.toString()):L.TLiteral(H)?[H.const]:L.TTemplateLiteral(H)?(()=>{const Y=p1.ParseExact(H.pattern);if(!i1.Check(Y))throw new F6("Cannot resolve keys from infinite template expression");return[...o1.Generate(Y)]})():[]}$.Resolve=W})(Z$||(aW.KeyArrayResolver=Z$={}));var J6;(function($){function*W(Y){for(let X of Y.anyOf)if(X[aW.Kind]==="Union")yield*W(X);else yield X}function H(Y){return aW.Type.Union([...W(Y)],{...Y})}$.Resolve=H})(J6||(aW.UnionResolver=J6={}));class w6 extends H1{}aW.TemplateLiteralPatternError=w6;var _$;(function($){function W(z){throw new w6(z)}function H(z){return z.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Y(z,Z){return L.TTemplateLiteral(z)?z.pattern.slice(1,z.pattern.length-1):L.TUnion(z)?`(${z.anyOf.map((Q)=>Y(Q,Z)).join("|")})`:L.TNumber(z)?`${Z}${aW.PatternNumber}`:L.TInteger(z)?`${Z}${aW.PatternNumber}`:L.TBigInt(z)?`${Z}${aW.PatternNumber}`:L.TString(z)?`${Z}${aW.PatternString}`:L.TLiteral(z)?`${Z}${H(z.const.toString())}`:L.TBoolean(z)?`${Z}${aW.PatternBoolean}`:W(`Unexpected Kind '${z[aW.Kind]}'`)}function X(z){return`^${z.map((Z)=>Y(Z,"")).join("")}$`}$.Create=X})(_$||(aW.TemplateLiteralPattern=_$={}));var q1;(function($){function W(H){const Y=p1.ParseExact(H.pattern);if(!i1.Check(Y))return aW.Type.String();const X=[...o1.Generate(Y)].map((z)=>aW.Type.Literal(z));return aW.Type.Union(X)}$.Resolve=W})(q1||(aW.TemplateLiteralResolver=q1={}));class E$ extends H1{}aW.TemplateLiteralParserError=E$;var p1;(function($){function W(w,U,A){return w[U]===A&&w.charCodeAt(U-1)!==92}function H(w,U){return W(w,U,"(")}function Y(w,U){return W(w,U,")")}function X(w,U){return W(w,U,"|")}function z(w){if(!(H(w,0)&&Y(w,w.length-1)))return!1;let U=0;for(let A=0;A<w.length;A++){if(H(w,A))U+=1;if(Y(w,A))U-=1;if(U===0&&A!==w.length-1)return!1}return!0}function Z(w){return w.slice(1,w.length-1)}function Q(w){let U=0;for(let A=0;A<w.length;A++){if(H(w,A))U+=1;if(Y(w,A))U-=1;if(X(w,A)&&U===0)return!0}return!1}function M(w){for(let U=0;U<w.length;U++)if(H(w,U))return!0;return!1}function B(w){let[U,A]=[0,0];const O=[];for(let b=0;b<w.length;b++){if(H(w,b))U+=1;if(Y(w,b))U-=1;if(X(w,b)&&U===0){const I=w.slice(A,b);if(I.length>0)O.push(D(I));A=b+1}}const N=w.slice(A);if(N.length>0)O.push(D(N));if(O.length===0)return{type:"const",const:""};if(O.length===1)return O[0];return{type:"or",expr:O}}function j(w){function U(N,b){if(!H(N,b))throw new E$("TemplateLiteralParser: Index must point to open parens");let I=0;for(let k=b;k<N.length;k++){if(H(N,k))I+=1;if(Y(N,k))I-=1;if(I===0)return[b,k]}throw new E$("TemplateLiteralParser: Unclosed group parens in expression")}function A(N,b){for(let I=b;I<N.length;I++)if(H(N,I))return[b,I];return[b,N.length]}const O=[];for(let N=0;N<w.length;N++)if(H(w,N)){const[b,I]=U(w,N),k=w.slice(b,I+1);O.push(D(k)),N=I}else{const[b,I]=A(w,N),k=w.slice(b,I);if(k.length>0)O.push(D(k));N=I-1}return O.length===0?{type:"const",const:""}:O.length===1?O[0]:{type:"and",expr:O}}function D(w){return z(w)?D(Z(w)):Q(w)?B(w):M(w)?j(w):{type:"const",const:w}}$.Parse=D;function C(w){return D(w.slice(1,w.length-1))}$.ParseExact=C})(p1||(aW.TemplateLiteralParser=p1={}));class U6 extends H1{}aW.TemplateLiteralFiniteError=U6;var i1;(function($){function W(Z){throw new U6(Z)}function H(Z){return Z.type==="or"&&Z.expr.length===2&&Z.expr[0].type==="const"&&Z.expr[0].const==="0"&&Z.expr[1].type==="const"&&Z.expr[1].const==="[1-9][0-9]*"}function Y(Z){return Z.type==="or"&&Z.expr.length===2&&Z.expr[0].type==="const"&&Z.expr[0].const==="true"&&Z.expr[1].type==="const"&&Z.expr[1].const==="false"}function X(Z){return Z.type==="const"&&Z.const===".*"}function z(Z){return Y(Z)?!0:H(Z)||X(Z)?!1:Z.type==="and"?Z.expr.every((Q)=>z(Q)):Z.type==="or"?Z.expr.every((Q)=>z(Q)):Z.type==="const"?!0:W("Unknown expression type")}$.Check=z})(i1||(aW.TemplateLiteralFinite=i1={}));class N6 extends H1{}aW.TemplateLiteralGeneratorError=N6;var o1;(function($){function*W(Z){if(Z.length===1)return yield*Z[0];for(let Q of Z[0])for(let M of W(Z.slice(1)))yield`${Q}${M}`}function*H(Z){return yield*W(Z.expr.map((Q)=>[...z(Q)]))}function*Y(Z){for(let Q of Z.expr)yield*z(Q)}function*X(Z){return yield Z.const}function*z(Z){return Z.type==="and"?yield*H(Z):Z.type==="or"?yield*Y(Z):Z.type==="const"?yield*X(Z):(()=>{throw new N6("Unknown expression")})()}$.Generate=z})(o1||(aW.TemplateLiteralGenerator=o1={}));var q6;(function($){function*W(z){const Z=z.trim().replace(/"|'/g,"");return Z==="boolean"?yield aW.Type.Boolean():Z==="number"?yield aW.Type.Number():Z==="bigint"?yield aW.Type.BigInt():Z==="string"?yield aW.Type.String():yield(()=>{const Q=Z.split("|").map((M)=>aW.Type.Literal(M.trim()));return Q.length===0?aW.Type.Never():Q.length===1?Q[0]:aW.Type.Union(Q)})()}function*H(z){if(z[1]!=="{"){const Z=aW.Type.Literal("$"),Q=Y(z.slice(1));return yield*[Z,...Q]}for(let Z=2;Z<z.length;Z++)if(z[Z]==="}"){const Q=W(z.slice(2,Z)),M=Y(z.slice(Z+1));return yield*[...Q,...M]}yield aW.Type.Literal(z)}function*Y(z){for(let Z=0;Z<z.length;Z++)if(z[Z]==="$"){const Q=aW.Type.Literal(z.slice(0,Z)),M=H(z.slice(Z));return yield*[Q,...M]}yield aW.Type.Literal(z)}function X(z){return[...Y(z)]}$.Parse=X})(q6||(aW.TemplateLiteralDslParser=q6={}));class L6{constructor($){this.schema=$}Decode($){return new A6(this.schema,$)}}aW.TransformDecodeBuilder=L6;class A6{constructor($,W){this.schema=$,this.decode=W}Encode($){const W=m.Type(this.schema);return L.TTransform(W)?(()=>{const X={Encode:(z)=>W[aW.Transform].Encode($(z)),Decode:(z)=>this.decode(W[aW.Transform].Decode(z))};return{...W,[aW.Transform]:X}})():(()=>{const H={Decode:this.decode,Encode:$};return{...W,[aW.Transform]:H}})()}}aW.TransformEncodeBuilder=A6;var nY=0;class B6 extends H1{}aW.TypeBuilderError=B6;class j6{Create($){return $}Throw($){throw new B6($)}Discard($,W){return W.reduce((H,Y)=>{const{[Y]:X,...z}=H;return z},$)}Strict($){return JSON.parse(JSON.stringify($))}}aW.TypeBuilder=j6;class V$ extends j6{ReadonlyOptional($){return this.Readonly(this.Optional($))}Readonly($){return{...m.Type($),[aW.Readonly]:"Readonly"}}Optional($){return{...m.Type($),[aW.Optional]:"Optional"}}Any($={}){return this.Create({...$,[aW.Kind]:"Any"})}Array($,W={}){return this.Create({...W,[aW.Kind]:"Array",type:"array",items:m.Type($)})}Boolean($={}){return this.Create({...$,[aW.Kind]:"Boolean",type:"boolean"})}Capitalize($,W={}){return{...d1.Map(m.Type($),"Capitalize"),...W}}Composite($,W){const H=aW.Type.Intersect($,{}),X=G$.ResolveKeys(H,{includePatterns:!1}).reduce((z,Z)=>({...z,[Z]:aW.Type.Index(H,[Z])}),{});return aW.Type.Object(X,W)}Enum($,W={}){if(_.IsUndefined($))return this.Throw("Enum undefined or empty");const H=Object.getOwnPropertyNames($).filter((z)=>isNaN(z)).map((z)=>$[z]),X=[...new Set(H)].map((z)=>aW.Type.Literal(z));return this.Union(X,{...W,[aW.Hint]:"Enum"})}Extends($,W,H,Y,X={}){switch(R1.Extends($,W)){case S.Union:return this.Union([m.Type(H,X),m.Type(Y,X)]);case S.True:return m.Type(H,X);case S.False:return m.Type(Y,X)}}Exclude($,W,H={}){return L.TTemplateLiteral($)?this.Exclude(q1.Resolve($),W,H):L.TTemplateLiteral(W)?this.Exclude($,q1.Resolve(W),H):L.TUnion($)?(()=>{const Y=$.anyOf.filter((X)=>R1.Extends(X,W)===S.False);return Y.length===1?m.Type(Y[0],H):this.Union(Y,H)})():R1.Extends($,W)!==S.False?this.Never(H):m.Type($,H)}Extract($,W,H={}){return L.TTemplateLiteral($)?this.Extract(q1.Resolve($),W,H):L.TTemplateLiteral(W)?this.Extract($,q1.Resolve(W),H):L.TUnion($)?(()=>{const Y=$.anyOf.filter((X)=>R1.Extends(X,W)!==S.False);return Y.length===1?m.Type(Y[0],H):this.Union(Y,H)})():R1.Extends($,W)!==S.False?m.Type($,H):this.Never(H)}Index($,W,H={}){return L.TArray($)&&L.TNumber(W)?(()=>{return m.Type($.items,H)})():L.TTuple($)&&L.TNumber(W)?(()=>{const X=(_.IsUndefined($.items)?[]:$.items).map((z)=>m.Type(z));return this.Union(X,H)})():(()=>{const Y=Z$.Resolve(W),X=m.Type($);return Q6.Resolve(X,Y,H)})()}Integer($={}){return this.Create({...$,[aW.Kind]:"Integer",type:"integer"})}Intersect($,W={}){if($.length===0)return aW.Type.Never();if($.length===1)return m.Type($[0],W);if($.some((z)=>L.TTransform(z)))this.Throw("Cannot intersect transform types");const H=$.every((z)=>L.TObject(z)),Y=m.Rest($),X=L.TSchema(W.unevaluatedProperties)?{unevaluatedProperties:m.Type(W.unevaluatedProperties)}:{};return W.unevaluatedProperties===!1||L.TSchema(W.unevaluatedProperties)||H?this.Create({...W,...X,[aW.Kind]:"Intersect",type:"object",allOf:Y}):this.Create({...W,...X,[aW.Kind]:"Intersect",allOf:Y})}KeyOf($,W={}){return L.TRecord($)?(()=>{const H=Object.getOwnPropertyNames($.patternProperties)[0];return H===aW.PatternNumberExact?this.Number(W):H===aW.PatternStringExact?this.String(W):this.Throw("Unable to resolve key type from Record key pattern")})():L.TTuple($)?(()=>{const Y=(_.IsUndefined($.items)?[]:$.items).map((X,z)=>aW.Type.Literal(z.toString()));return this.Union(Y,W)})():L.TArray($)?(()=>{return this.Number(W)})():(()=>{const H=G$.ResolveKeys($,{includePatterns:!1});if(H.length===0)return this.Never(W);const Y=H.map((X)=>this.Literal(X));return this.Union(Y,W)})()}Literal($,W={}){return this.Create({...W,[aW.Kind]:"Literal",const:$,type:typeof $})}Lowercase($,W={}){return{...d1.Map(m.Type($),"Lowercase"),...W}}Never($={}){return this.Create({...$,[aW.Kind]:"Never",not:{}})}Not($,W){return this.Create({...W,[aW.Kind]:"Not",not:m.Type($)})}Null($={}){return this.Create({...$,[aW.Kind]:"Null",type:"null"})}Number($={}){return this.Create({...$,[aW.Kind]:"Number",type:"number"})}Object($,W={}){const H=Object.getOwnPropertyNames($),Y=H.filter((Q)=>L.TOptional($[Q])),X=H.filter((Q)=>!Y.includes(Q)),z=L.TSchema(W.additionalProperties)?{additionalProperties:m.Type(W.additionalProperties)}:{},Z=H.reduce((Q,M)=>({...Q,[M]:m.Type($[M])}),{});return X.length>0?this.Create({...W,...z,[aW.Kind]:"Object",type:"object",properties:Z,required:X}):this.Create({...W,...z,[aW.Kind]:"Object",type:"object",properties:Z})}Omit($,W,H={}){const Y=Z$.Resolve(W);return T1.Map(this.Discard(m.Type($),["$id",aW.Transform]),(X)=>{if(_.IsArray(X.required)){if(X.required=X.required.filter((z)=>!Y.includes(z)),X.required.length===0)delete X.required}for(let z of Object.getOwnPropertyNames(X.properties))if(Y.includes(z))delete X.properties[z];return this.Create(X)},H)}Partial($,W={}){return T1.Map(this.Discard(m.Type($),["$id",aW.Transform]),(H)=>{const Y=Object.getOwnPropertyNames(H.properties).reduce((X,z)=>{return{...X,[z]:this.Optional(H.properties[z])}},{});return this.Object(Y,this.Discard(H,["required"]))},W)}Pick($,W,H={}){const Y=Z$.Resolve(W);return T1.Map(this.Discard(m.Type($),["$id",aW.Transform]),(X)=>{if(_.IsArray(X.required)){if(X.required=X.required.filter((z)=>Y.includes(z)),X.required.length===0)delete X.required}for(let z of Object.getOwnPropertyNames(X.properties))if(!Y.includes(z))delete X.properties[z];return this.Create(X)},H)}Record($,W,H={}){return L.TTemplateLiteral($)?(()=>{const Y=p1.ParseExact($.pattern);return i1.Check(Y)?this.Object([...o1.Generate(Y)].reduce((X,z)=>({...X,[z]:m.Type(W)}),{}),H):this.Create({...H,[aW.Kind]:"Record",type:"object",patternProperties:{[$.pattern]:m.Type(W)}})})():L.TUnion($)?(()=>{const Y=J6.Resolve($);if(L.TUnionLiteral(Y)){const X=Y.anyOf.reduce((z,Z)=>({...z,[Z.const]:m.Type(W)}),{});return this.Object(X,{...H,[aW.Hint]:"Record"})}else this.Throw("Record key of type union contains non-literal types")})():L.TLiteral($)?(()=>{return _.IsString($.const)||_.IsNumber($.const)?this.Object({[$.const]:m.Type(W)},H):this.Throw("Record key of type literal is not of type string or number")})():L.TInteger($)||L.TNumber($)?(()=>{return this.Create({...H,[aW.Kind]:"Record",type:"object",patternProperties:{[aW.PatternNumberExact]:m.Type(W)}})})():L.TString($)?(()=>{const Y=_.IsUndefined($.pattern)?aW.PatternStringExact:$.pattern;return this.Create({...H,[aW.Kind]:"Record",type:"object",patternProperties:{[Y]:m.Type(W)}})})():this.Never()}Recursive($,W={}){if(_.IsUndefined(W.$id))W.$id=`T${nY++}`;const H=$({[aW.Kind]:"This",$ref:`${W.$id}`});return H.$id=W.$id,this.Create({...W,[aW.Hint]:"Recursive",...H})}Ref($,W={}){if(_.IsString($))return this.Create({...W,[aW.Kind]:"Ref",$ref:$});if(_.IsUndefined($.$id))this.Throw("Reference target type must specify an $id");return this.Create({...W,[aW.Kind]:"Ref",$ref:$.$id})}Required($,W={}){return T1.Map(this.Discard(m.Type($),["$id",aW.Transform]),(H)=>{const Y=Object.getOwnPropertyNames(H.properties).reduce((X,z)=>{return{...X,[z]:this.Discard(H.properties[z],[aW.Optional])}},{});return this.Object(Y,H)},W)}Rest($){return L.TTuple($)&&!_.IsUndefined($.items)?m.Rest($.items):L.TIntersect($)?m.Rest($.allOf):L.TUnion($)?m.Rest($.anyOf):[]}String($={}){return this.Create({...$,[aW.Kind]:"String",type:"string"})}TemplateLiteral($,W={}){const H=_.IsString($)?_$.Create(q6.Parse($)):_$.Create($);return this.Create({...W,[aW.Kind]:"TemplateLiteral",type:"string",pattern:H})}Transform($){return new L6($)}Tuple($,W={}){const[H,Y,X]=[!1,$.length,$.length],z=m.Rest($),Z=$.length>0?{...W,[aW.Kind]:"Tuple",type:"array",items:z,additionalItems:H,minItems:Y,maxItems:X}:{...W,[aW.Kind]:"Tuple",type:"array",minItems:Y,maxItems:X};return this.Create(Z)}Uncapitalize($,W={}){return{...d1.Map(m.Type($),"Uncapitalize"),...W}}Union($,W={}){return L.TTemplateLiteral($)?q1.Resolve($):(()=>{const H=$;if(H.length===0)return this.Never(W);if(H.length===1)return this.Create(m.Type(H[0],W));const Y=m.Rest(H);return this.Create({...W,[aW.Kind]:"Union",anyOf:Y})})()}Unknown($={}){return this.Create({...$,[aW.Kind]:"Unknown"})}Unsafe($={}){return this.Create({...$,[aW.Kind]:$[aW.Kind]||"Unsafe"})}Uppercase($,W={}){return{...d1.Map(m.Type($),"Uppercase"),...W}}}aW.JsonTypeBuilder=V$;class D6 extends V${AsyncIterator($,W={}){return this.Create({...W,[aW.Kind]:"AsyncIterator",type:"AsyncIterator",items:m.Type($)})}Awaited($,W={}){const H=(Y)=>Y.length>0?(()=>{const[X,...z]=Y;return[this.Awaited(X),...H(z)]})():Y;return L.TIntersect($)?aW.Type.Intersect(H($.allOf)):L.TUnion($)?aW.Type.Union(H($.anyOf)):L.TPromise($)?this.Awaited($.item):m.Type($,W)}BigInt($={}){return this.Create({...$,[aW.Kind]:"BigInt",type:"bigint"})}ConstructorParameters($,W={}){return this.Tuple([...$.parameters],{...W})}Constructor($,W,H){const[Y,X]=[m.Rest($),m.Type(W)];return this.Create({...H,[aW.Kind]:"Constructor",type:"Constructor",parameters:Y,returns:X})}Date($={}){return this.Create({...$,[aW.Kind]:"Date",type:"Date"})}Function($,W,H){const[Y,X]=[m.Rest($),m.Type(W)];return this.Create({...H,[aW.Kind]:"Function",type:"Function",parameters:Y,returns:X})}InstanceType($,W={}){return m.Type($.returns,W)}Iterator($,W={}){return this.Create({...W,[aW.Kind]:"Iterator",type:"Iterator",items:m.Type($)})}Parameters($,W={}){return this.Tuple($.parameters,{...W})}Promise($,W={}){return this.Create({...W,[aW.Kind]:"Promise",type:"Promise",item:m.Type($)})}RegExp($,W={}){const H=_.IsString($)?$:$.source;return this.Create({...W,[aW.Kind]:"String",type:"string",pattern:H})}RegEx($,W={}){return this.RegExp($,W)}ReturnType($,W={}){return m.Type($.returns,W)}Symbol($){return this.Create({...$,[aW.Kind]:"Symbol",type:"symbol"})}Undefined($={}){return this.Create({...$,[aW.Kind]:"Undefined",type:"undefined"})}Uint8Array($={}){return this.Create({...$,[aW.Kind]:"Uint8Array",type:"Uint8Array"})}Void($={}){return this.Create({...$,[aW.Kind]:"Void",type:"void"})}}aW.JavaScriptTypeBuilder=D6;aW.JsonType=new V$;aW.Type=new D6});var R6=Z0((H8)=>{var b6=function($,W){switch(W){case y.ValueErrorType.ArrayContains:return"Expected array to contain at least one matching value";case y.ValueErrorType.ArrayMaxContains:return`Expected array to contain no more than ${$.maxContains} matching values`;case y.ValueErrorType.ArrayMinContains:return`Expected array to contain at least ${$.minContains} matching values`;case y.ValueErrorType.ArrayMaxItems:return`Expected array length to be less or equal to ${$.maxItems}`;case y.ValueErrorType.ArrayMinItems:return`Expected array length to be greater or equal to ${$.minItems}`;case y.ValueErrorType.ArrayUniqueItems:return"Expected array elements to be unique";case y.ValueErrorType.Array:return"Expected array";case y.ValueErrorType.AsyncIterator:return"Expected AsyncIterator";case y.ValueErrorType.BigIntExclusiveMaximum:return`Expected bigint to be less than ${$.exclusiveMaximum}`;case y.ValueErrorType.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${$.exclusiveMinimum}`;case y.ValueErrorType.BigIntMaximum:return`Expected bigint to be less or equal to ${$.maximum}`;case y.ValueErrorType.BigIntMinimum:return`Expected bigint to be greater or equal to ${$.minimum}`;case y.ValueErrorType.BigIntMultipleOf:return`Expected bigint to be a multiple of ${$.multipleOf}`;case y.ValueErrorType.BigInt:return"Expected bigint";case y.ValueErrorType.Boolean:return"Expected boolean";case y.ValueErrorType.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${$.exclusiveMinimumTimestamp}`;case y.ValueErrorType.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${$.exclusiveMaximumTimestamp}`;case y.ValueErrorType.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${$.minimumTimestamp}`;case y.ValueErrorType.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${$.maximumTimestamp}`;case y.ValueErrorType.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${$.multipleOfTimestamp}`;case y.ValueErrorType.Date:return"Expected Date";case y.ValueErrorType.Function:return"Expected function";case y.ValueErrorType.IntegerExclusiveMaximum:return`Expected integer to be less than ${$.exclusiveMaximum}`;case y.ValueErrorType.IntegerExclusiveMinimum:return`Expected integer to be greater than ${$.exclusiveMinimum}`;case y.ValueErrorType.IntegerMaximum:return`Expected integer to be less or equal to ${$.maximum}`;case y.ValueErrorType.IntegerMinimum:return`Expected integer to be greater or equal to ${$.minimum}`;case y.ValueErrorType.IntegerMultipleOf:return`Expected integer to be a multiple of ${$.multipleOf}`;case y.ValueErrorType.Integer:return"Expected integer";case y.ValueErrorType.IntersectUnevaluatedProperties:return"Unexpected property";case y.ValueErrorType.Intersect:return"Expected all values to match";case y.ValueErrorType.Iterator:return"Expected Iterator";case y.ValueErrorType.Literal:return`Expected ${typeof $.const==="string"?`'${$.const}'`:$.const}`;case y.ValueErrorType.Never:return"Never";case y.ValueErrorType.Not:return"Value should not match";case y.ValueErrorType.Null:return"Expected null";case y.ValueErrorType.NumberExclusiveMaximum:return`Expected number to be less than ${$.exclusiveMaximum}`;case y.ValueErrorType.NumberExclusiveMinimum:return`Expected number to be greater than ${$.exclusiveMinimum}`;case y.ValueErrorType.NumberMaximum:return`Expected number to be less or equal to ${$.maximum}`;case y.ValueErrorType.NumberMinimum:return`Expected number to be greater or equal to ${$.minimum}`;case y.ValueErrorType.NumberMultipleOf:return`Expected number to be a multiple of ${$.multipleOf}`;case y.ValueErrorType.Number:return"Expected number";case y.ValueErrorType.Object:return"Expected object";case y.ValueErrorType.ObjectAdditionalProperties:return"Unexpected property";case y.ValueErrorType.ObjectMaxProperties:return`Expected object to have no more than ${$.maxProperties} properties`;case y.ValueErrorType.ObjectMinProperties:return`Expected object to have at least ${$.minProperties} properties`;case y.ValueErrorType.ObjectRequiredProperty:return"Required property";case y.ValueErrorType.Promise:return"Expected Promise";case y.ValueErrorType.StringFormatUnknown:return`Unknown format '${$.format}'`;case y.ValueErrorType.StringFormat:return`Expected string to match '${$.format}' format`;case y.ValueErrorType.StringMaxLength:return`Expected string length less or equal to ${$.maxLength}`;case y.ValueErrorType.StringMinLength:return`Expected string length greater or equal to ${$.minLength}`;case y.ValueErrorType.StringPattern:return`Expected string to match '${$.pattern}'`;case y.ValueErrorType.String:return"Expected string";case y.ValueErrorType.Symbol:return"Expected symbol";case y.ValueErrorType.TupleLength:return`Expected tuple to have ${$.maxItems||0} elements`;case y.ValueErrorType.Tuple:return"Expected tuple";case y.ValueErrorType.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${$.maxByteLength}`;case y.ValueErrorType.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${$.minByteLength}`;case y.ValueErrorType.Uint8Array:return"Expected Uint8Array";case y.ValueErrorType.Undefined:return"Expected undefined";case y.ValueErrorType.Union:return"Expected union value";case y.ValueErrorType.Void:return"Expected void";case y.ValueErrorType.Kind:return`Expected kind '${$[M1.Kind]}'`;default:return"Unknown error type"}};Object.defineProperty(H8,"__esModule",{value:!0});H8.DefaultErrorFunction=H8.TypeSystemPolicy=H8.TypeSystemErrorFunction=H8.TypeSystem=H8.TypeSystemDuplicateFormat=H8.TypeSystemDuplicateTypeKind=void 0;var k$=E0(),y=q$(),M1=x0();class S6 extends M1.TypeBoxError{constructor($){super(`Duplicate type kind '${$}' detected`)}}H8.TypeSystemDuplicateTypeKind=S6;class C6 extends M1.TypeBoxError{constructor($){super(`Duplicate string format '${$}' detected`)}}H8.TypeSystemDuplicateFormat=C6;var eW;(function($){function W(Y,X){if(M1.TypeRegistry.Has(Y))throw new S6(Y);return M1.TypeRegistry.Set(Y,X),(z={})=>M1.Type.Unsafe({...z,[M1.Kind]:Y})}$.Type=W;function H(Y,X){if(M1.FormatRegistry.Has(Y))throw new C6(Y);return M1.FormatRegistry.Set(Y,X),Y}$.Format=H})(eW||(H8.TypeSystem=eW={}));var $8;(function($){let W=b6;function H(){W=b6}$.Reset=H;function Y(z){W=z}$.Set=Y;function X(){return W}$.Get=X})($8||(H8.TypeSystemErrorFunction=$8={}));var W8;(function($){$.ExactOptionalPropertyTypes=!1,$.AllowArrayObject=!1,$.AllowNaN=!1,$.AllowNullVoid=!1;function W(Z,Q){return $.ExactOptionalPropertyTypes?Q in Z:Z[Q]!==void 0}$.IsExactOptionalProperty=W;function H(Z){const Q=k$.IsObject(Z);return $.AllowArrayObject?Q:Q&&!k$.IsArray(Z)}$.IsObjectLike=H;function Y(Z){return H(Z)&&!(Z instanceof Date)&&!(Z instanceof Uint8Array)}$.IsRecordLike=Y;function X(Z){const Q=k$.IsNumber(Z);return $.AllowNaN?Q:Q&&Number.isFinite(Z)}$.IsNumberLike=X;function z(Z){const Q=k$.IsUndefined(Z);return $.AllowNullVoid?Q||Z===null:Q}$.IsVoidLike=z})(W8||(H8.TypeSystemPolicy=W8={}));H8.DefaultErrorFunction=b6});var D1=Z0((X8)=>{var xX=function($,W){const H=W.findIndex((Y)=>Y.$id===$.$ref);if(H===-1)throw new I6($);return W[H]};Object.defineProperty(X8,"__esModule",{value:!0});X8.Deref=X8.TypeDereferenceError=void 0;var kX=x0();class I6 extends kX.TypeBoxError{constructor($){super(`Unable to dereference schema with \$id '${$.$id}'`);this.schema=$}}X8.TypeDereferenceError=I6;X8.Deref=xX});var M$=Z0((q8)=>{function*yX($){const W=$===0?1:Math.ceil(Math.floor(Math.log2($)+1)/8);for(let H=0;H<W;H++)yield $>>8*(W-1-H)&255}var vX=function($){R0(g0.Array);for(let W of $)n1(W)},pX=function($){R0(g0.Boolean),R0($?1:0)},iX=function($){R0(g0.BigInt),Q8.setBigInt64(0,$);for(let W of J8)R0(W)},oX=function($){R0(g0.Date),n1($.getTime())},mX=function($){R0(g0.Null)},nX=function($){R0(g0.Number),Q8.setFloat64(0,$);for(let W of J8)R0(W)},hX=function($){R0(g0.Object);for(let W of globalThis.Object.keys($).sort())n1(W),n1($[W])},uX=function($){R0(g0.String);for(let W=0;W<$.length;W++)for(let H of yX($.charCodeAt(W)))R0(H)},lX=function($){R0(g0.Symbol),n1($.description)},cX=function($){R0(g0.Uint8Array);for(let W=0;W<$.length;W++)R0($[W])},tX=function($){return R0(g0.Undefined)},n1=function($){if(c0.IsArray($))return vX($);if(c0.IsBoolean($))return pX($);if(c0.IsBigInt($))return iX($);if(c0.IsDate($))return oX($);if(c0.IsNull($))return mX($);if(c0.IsNumber($))return nX($);if(c0.IsPlainObject($))return hX($);if(c0.IsString($))return uX($);if(c0.IsSymbol($))return lX($);if(c0.IsUint8Array($))return cX($);if(c0.IsUndefined($))return tX($);throw new G6($)},R0=function($){m1=m1^TX[$],m1=m1*fX%dX},sX=function($){return m1=BigInt("14695981039346656037"),n1($),m1};Object.defineProperty(q8,"__esModule",{value:!0});q8.Hash=q8.ByteMarker=q8.ValueHashError=void 0;var c0=E0();class G6 extends Error{constructor($){super("Unable to hash value");this.value=$}}q8.ValueHashError=G6;var g0;(function($){$[$.Undefined=0]="Undefined",$[$.Null=1]="Null",$[$.Boolean=2]="Boolean",$[$.Number=3]="Number",$[$.String=4]="String",$[$.Object=5]="Object",$[$.Array=6]="Array",$[$.Date=7]="Date",$[$.Uint8Array=8]="Uint8Array",$[$.Symbol=9]="Symbol",$[$.BigInt=10]="BigInt"})(g0||(q8.ByteMarker=g0={}));var m1=BigInt("14695981039346656037"),[fX,dX]=[BigInt("1099511628211"),BigInt("2")**BigInt("64")],TX=Array.from({length:256}).map(($,W)=>BigInt(W)),Z8=new Float64Array(1),Q8=new DataView(Z8.buffer),J8=new Uint8Array(Z8.buffer);q8.Hash=sX});var q$=Z0((w8)=>{var Y1=function($){return $.replace(/~/g,"~0").replace(/\//g,"~1")},c=function($){return $!==void 0},g=function($,W,H,Y){return{type:$,schema:W,path:H,value:Y,message:h1.TypeSystemErrorFunction.Get()(W,$)}};function*$z($,W,H,Y){}function*Wz($,W,H,Y){if(!N0.IsArray(Y))return yield g(V.Array,$,H,Y);if(c($.minItems)&&!(Y.length>=$.minItems))yield g(V.ArrayMinItems,$,H,Y);if(c($.maxItems)&&!(Y.length<=$.maxItems))yield g(V.ArrayMaxItems,$,H,Y);for(let Z=0;Z<Y.length;Z++)yield*O0($.items,W,`${H}/${Z}`,Y[Z]);if($.uniqueItems===!0&&!function(){const Z=new Set;for(let Q of Y){const M=eX.Hash(Q);if(Z.has(M))return!1;else Z.add(M)}return!0}())yield g(V.ArrayUniqueItems,$,H,Y);if(!(c($.contains)||c($.minContains)||c($.maxContains)))return;const X=c($.contains)?$.contains:p0.Type.Never(),z=Y.reduce((Z,Q,M)=>O0(X,W,`${H}${M}`,Q).next().done===!0?Z+1:Z,0);if(z===0)yield g(V.ArrayContains,$,H,Y);if(N0.IsNumber($.minContains)&&z<$.minContains)yield g(V.ArrayMinContains,$,H,Y);if(N0.IsNumber($.maxContains)&&z>$.maxContains)yield g(V.ArrayMaxContains,$,H,Y)}function*Hz($,W,H,Y){if(!N0.IsAsyncIterator(Y))yield g(V.AsyncIterator,$,H,Y)}function*Yz($,W,H,Y){if(!N0.IsBigInt(Y))return yield g(V.BigInt,$,H,Y);if(c($.exclusiveMaximum)&&!(Y<$.exclusiveMaximum))yield g(V.BigIntExclusiveMaximum,$,H,Y);if(c($.exclusiveMinimum)&&!(Y>$.exclusiveMinimum))yield g(V.BigIntExclusiveMinimum,$,H,Y);if(c($.maximum)&&!(Y<=$.maximum))yield g(V.BigIntMaximum,$,H,Y);if(c($.minimum)&&!(Y>=$.minimum))yield g(V.BigIntMinimum,$,H,Y);if(c($.multipleOf)&&Y%$.multipleOf!==BigInt(0))yield g(V.BigIntMultipleOf,$,H,Y)}function*Xz($,W,H,Y){if(!N0.IsBoolean(Y))yield g(V.Boolean,$,H,Y)}function*zz($,W,H,Y){yield*O0($.returns,W,H,Y.prototype)}function*Zz($,W,H,Y){if(!N0.IsDate(Y))return yield g(V.Date,$,H,Y);if(c($.exclusiveMaximumTimestamp)&&!(Y.getTime()<$.exclusiveMaximumTimestamp))yield g(V.DateExclusiveMaximumTimestamp,$,H,Y);if(c($.exclusiveMinimumTimestamp)&&!(Y.getTime()>$.exclusiveMinimumTimestamp))yield g(V.DateExclusiveMinimumTimestamp,$,H,Y);if(c($.maximumTimestamp)&&!(Y.getTime()<=$.maximumTimestamp))yield g(V.DateMaximumTimestamp,$,H,Y);if(c($.minimumTimestamp)&&!(Y.getTime()>=$.minimumTimestamp))yield g(V.DateMinimumTimestamp,$,H,Y);if(c($.multipleOfTimestamp)&&Y.getTime()%$.multipleOfTimestamp!==0)yield g(V.DateMultipleOfTimestamp,$,H,Y)}function*Qz($,W,H,Y){if(!N0.IsFunction(Y))yield g(V.Function,$,H,Y)}function*Jz($,W,H,Y){if(!N0.IsInteger(Y))return yield g(V.Integer,$,H,Y);if(c($.exclusiveMaximum)&&!(Y<$.exclusiveMaximum))yield g(V.IntegerExclusiveMaximum,$,H,Y);if(c($.exclusiveMinimum)&&!(Y>$.exclusiveMinimum))yield g(V.IntegerExclusiveMinimum,$,H,Y);if(c($.maximum)&&!(Y<=$.maximum))yield g(V.IntegerMaximum,$,H,Y);if(c($.minimum)&&!(Y>=$.minimum))yield g(V.IntegerMinimum,$,H,Y);if(c($.multipleOf)&&Y%$.multipleOf!==0)yield g(V.IntegerMultipleOf,$,H,Y)}function*qz($,W,H,Y){for(let X of $.allOf){const z=O0(X,W,H,Y).next();if(!z.done)yield g(V.Intersect,$,H,Y),yield z.value}if($.unevaluatedProperties===!1){const X=new RegExp(p0.KeyResolver.ResolvePattern($));for(let z of Object.getOwnPropertyNames(Y))if(!X.test(z))yield g(V.IntersectUnevaluatedProperties,$,`${H}/${z}`,Y)}if(typeof $.unevaluatedProperties==="object"){const X=new RegExp(p0.KeyResolver.ResolvePattern($));for(let z of Object.getOwnPropertyNames(Y))if(!X.test(z)){const Z=O0($.unevaluatedProperties,W,`${H}/${z}`,Y[z]).next();if(!Z.done)yield Z.value}}}function*Mz($,W,H,Y){if(!N0.IsIterator(Y))yield g(V.Iterator,$,H,Y)}function*Fz($,W,H,Y){if(Y!==$.const)yield g(V.Literal,$,H,Y)}function*wz($,W,H,Y){yield g(V.Never,$,H,Y)}function*Uz($,W,H,Y){if(O0($.not,W,H,Y).next().done===!0)yield g(V.Not,$,H,Y)}function*Nz($,W,H,Y){if(!N0.IsNull(Y))yield g(V.Null,$,H,Y)}function*Lz($,W,H,Y){if(!h1.TypeSystemPolicy.IsNumberLike(Y))return yield g(V.Number,$,H,Y);if(c($.exclusiveMaximum)&&!(Y<$.exclusiveMaximum))yield g(V.NumberExclusiveMaximum,$,H,Y);if(c($.exclusiveMinimum)&&!(Y>$.exclusiveMinimum))yield g(V.NumberExclusiveMinimum,$,H,Y);if(c($.maximum)&&!(Y<=$.maximum))yield g(V.NumberMaximum,$,H,Y);if(c($.minimum)&&!(Y>=$.minimum))yield g(V.NumberMinimum,$,H,Y);if(c($.multipleOf)&&Y%$.multipleOf!==0)yield g(V.NumberMultipleOf,$,H,Y)}function*Az($,W,H,Y){if(!h1.TypeSystemPolicy.IsObjectLike(Y))return yield g(V.Object,$,H,Y);if(c($.minProperties)&&!(Object.getOwnPropertyNames(Y).length>=$.minProperties))yield g(V.ObjectMinProperties,$,H,Y);if(c($.maxProperties)&&!(Object.getOwnPropertyNames(Y).length<=$.maxProperties))yield g(V.ObjectMaxProperties,$,H,Y);const X=Array.isArray($.required)?$.required:[],z=Object.getOwnPropertyNames($.properties),Z=Object.getOwnPropertyNames(Y);for(let Q of X){if(Z.includes(Q))continue;yield g(V.ObjectRequiredProperty,$.properties[Q],`${H}/${Y1(Q)}`,void 0)}if($.additionalProperties===!1){for(let Q of Z)if(!z.includes(Q))yield g(V.ObjectAdditionalProperties,$,`${H}/${Y1(Q)}`,Y[Q])}if(typeof $.additionalProperties==="object")for(let Q of Z){if(z.includes(Q))continue;yield*O0($.additionalProperties,W,`${H}/${Y1(Q)}`,Y[Q])}for(let Q of z){const M=$.properties[Q];if($.required&&$.required.includes(Q)){if(yield*O0(M,W,`${H}/${Y1(Q)}`,Y[Q]),p0.ExtendsUndefined.Check($)&&!(Q in Y))yield g(V.ObjectRequiredProperty,M,`${H}/${Y1(Q)}`,void 0)}else if(h1.TypeSystemPolicy.IsExactOptionalProperty(Y,Q))yield*O0(M,W,`${H}/${Y1(Q)}`,Y[Q])}}function*Bz($,W,H,Y){if(!N0.IsPromise(Y))yield g(V.Promise,$,H,Y)}function*jz($,W,H,Y){if(!h1.TypeSystemPolicy.IsRecordLike(Y))return yield g(V.Object,$,H,Y);if(c($.minProperties)&&!(Object.getOwnPropertyNames(Y).length>=$.minProperties))yield g(V.ObjectMinProperties,$,H,Y);if(c($.maxProperties)&&!(Object.getOwnPropertyNames(Y).length<=$.maxProperties))yield g(V.ObjectMaxProperties,$,H,Y);const[X,z]=Object.entries($.patternProperties)[0],Z=new RegExp(X);for(let[Q,M]of Object.entries(Y))if(Z.test(Q))yield*O0(z,W,`${H}/${Y1(Q)}`,M);if(typeof $.additionalProperties==="object"){for(let[Q,M]of Object.entries(Y))if(!Z.test(Q))yield*O0($.additionalProperties,W,`${H}/${Y1(Q)}`,M)}if($.additionalProperties===!1)for(let[Q,M]of Object.entries(Y)){if(Z.test(Q))continue;return yield g(V.ObjectAdditionalProperties,$,`${H}/${Y1(Q)}`,M)}}function*Dz($,W,H,Y){yield*O0(F8.Deref($,W),W,H,Y)}function*Kz($,W,H,Y){if(!N0.IsString(Y))return yield g(V.String,$,H,Y);if(c($.minLength)&&!(Y.length>=$.minLength))yield g(V.StringMinLength,$,H,Y);if(c($.maxLength)&&!(Y.length<=$.maxLength))yield g(V.StringMaxLength,$,H,Y);if(N0.IsString($.pattern)){if(!new RegExp($.pattern).test(Y))yield g(V.StringPattern,$,H,Y)}if(N0.IsString($.format)){if(!p0.FormatRegistry.Has($.format))yield g(V.StringFormatUnknown,$,H,Y);else if(!p0.FormatRegistry.Get($.format)(Y))yield g(V.StringFormat,$,H,Y)}}function*Oz($,W,H,Y){if(!N0.IsSymbol(Y))yield g(V.Symbol,$,H,Y)}function*Pz($,W,H,Y){if(!N0.IsString(Y))return yield g(V.String,$,H,Y);if(!new RegExp($.pattern).test(Y))yield g(V.StringPattern,$,H,Y)}function*bz($,W,H,Y){yield*O0(F8.Deref($,W),W,H,Y)}function*Sz($,W,H,Y){if(!N0.IsArray(Y))return yield g(V.Tuple,$,H,Y);if($.items===void 0&&Y.length!==0)return yield g(V.TupleLength,$,H,Y);if(Y.length!==$.maxItems)return yield g(V.TupleLength,$,H,Y);if(!$.items)return;for(let X=0;X<$.items.length;X++)yield*O0($.items[X],W,`${H}/${X}`,Y[X])}function*Cz($,W,H,Y){if(!N0.IsUndefined(Y))yield g(V.Undefined,$,H,Y)}function*Rz($,W,H,Y){let X=0;for(let z of $.anyOf){const Z=[...O0(z,W,H,Y)];if(Z.length===0)return;X+=Z.length}if(X>0)yield g(V.Union,$,H,Y)}function*Iz($,W,H,Y){if(!N0.IsUint8Array(Y))return yield g(V.Uint8Array,$,H,Y);if(c($.maxByteLength)&&!(Y.length<=$.maxByteLength))yield g(V.Uint8ArrayMaxByteLength,$,H,Y);if(c($.minByteLength)&&!(Y.length>=$.minByteLength))yield g(V.Uint8ArrayMinByteLength,$,H,Y)}function*Gz($,W,H,Y){}function*_z($,W,H,Y){if(!h1.TypeSystemPolicy.IsVoidLike(Y))yield g(V.Void,$,H,Y)}function*Ez($,W,H,Y){if(!p0.TypeRegistry.Get($[p0.Kind])($,Y))yield g(V.Kind,$,H,Y)}function*O0($,W,H,Y){const X=c($.$id)?[...W,$]:W,z=$;switch(z[p0.Kind]){case"Any":return yield*$z(z,X,H,Y);case"Array":return yield*Wz(z,X,H,Y);case"AsyncIterator":return yield*Hz(z,X,H,Y);case"BigInt":return yield*Yz(z,X,H,Y);case"Boolean":return yield*Xz(z,X,H,Y);case"Constructor":return yield*zz(z,X,H,Y);case"Date":return yield*Zz(z,X,H,Y);case"Function":return yield*Qz(z,X,H,Y);case"Integer":return yield*Jz(z,X,H,Y);case"Intersect":return yield*qz(z,X,H,Y);case"Iterator":return yield*Mz(z,X,H,Y);case"Literal":return yield*Fz(z,X,H,Y);case"Never":return yield*wz(z,X,H,Y);case"Not":return yield*Uz(z,X,H,Y);case"Null":return yield*Nz(z,X,H,Y);case"Number":return yield*Lz(z,X,H,Y);case"Object":return yield*Az(z,X,H,Y);case"Promise":return yield*Bz(z,X,H,Y);case"Record":return yield*jz(z,X,H,Y);case"Ref":return yield*Dz(z,X,H,Y);case"String":return yield*Kz(z,X,H,Y);case"Symbol":return yield*Oz(z,X,H,Y);case"TemplateLiteral":return yield*Pz(z,X,H,Y);case"This":return yield*bz(z,X,H,Y);case"Tuple":return yield*Sz(z,X,H,Y);case"Undefined":return yield*Cz(z,X,H,Y);case"Union":return yield*Rz(z,X,H,Y);case"Uint8Array":return yield*Iz(z,X,H,Y);case"Unknown":return yield*Gz(z,X,H,Y);case"Void":return yield*_z(z,X,H,Y);default:if(!p0.TypeRegistry.Has(z[p0.Kind]))throw new _6($);return yield*Ez(z,X,H,Y)}}var Vz=function(...$){const W=$.length===3?O0($[0],$[1],"",$[2]):O0($[0],[],"",$[1]);return new E6(W)};Object.defineProperty(w8,"__esModule",{value:!0});w8.Errors=w8.ValueErrorIterator=w8.EscapeKey=w8.ValueErrorsUnknownTypeError=w8.ValueErrorType=void 0;var N0=E0(),h1=R6(),F8=D1(),eX=M$(),p0=x0(),V;(function($){$[$.ArrayContains=0]="ArrayContains",$[$.ArrayMaxContains=1]="ArrayMaxContains",$[$.ArrayMaxItems=2]="ArrayMaxItems",$[$.ArrayMinContains=3]="ArrayMinContains",$[$.ArrayMinItems=4]="ArrayMinItems",$[$.ArrayUniqueItems=5]="ArrayUniqueItems",$[$.Array=6]="Array",$[$.AsyncIterator=7]="AsyncIterator",$[$.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",$[$.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",$[$.BigIntMaximum=10]="BigIntMaximum",$[$.BigIntMinimum=11]="BigIntMinimum",$[$.BigIntMultipleOf=12]="BigIntMultipleOf",$[$.BigInt=13]="BigInt",$[$.Boolean=14]="Boolean",$[$.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",$[$.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",$[$.DateMaximumTimestamp=17]="DateMaximumTimestamp",$[$.DateMinimumTimestamp=18]="DateMinimumTimestamp",$[$.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",$[$.Date=20]="Date",$[$.Function=21]="Function",$[$.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",$[$.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",$[$.IntegerMaximum=24]="IntegerMaximum",$[$.IntegerMinimum=25]="IntegerMinimum",$[$.IntegerMultipleOf=26]="IntegerMultipleOf",$[$.Integer=27]="Integer",$[$.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",$[$.Intersect=29]="Intersect",$[$.Iterator=30]="Iterator",$[$.Kind=31]="Kind",$[$.Literal=32]="Literal",$[$.Never=33]="Never",$[$.Not=34]="Not",$[$.Null=35]="Null",$[$.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",$[$.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",$[$.NumberMaximum=38]="NumberMaximum",$[$.NumberMinimum=39]="NumberMinimum",$[$.NumberMultipleOf=40]="NumberMultipleOf",$[$.Number=41]="Number",$[$.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",$[$.ObjectMaxProperties=43]="ObjectMaxProperties",$[$.ObjectMinProperties=44]="ObjectMinProperties",$[$.ObjectRequiredProperty=45]="ObjectRequiredProperty",$[$.Object=46]="Object",$[$.Promise=47]="Promise",$[$.StringFormatUnknown=48]="StringFormatUnknown",$[$.StringFormat=49]="StringFormat",$[$.StringMaxLength=50]="StringMaxLength",$[$.StringMinLength=51]="StringMinLength",$[$.StringPattern=52]="StringPattern",$[$.String=53]="String",$[$.Symbol=54]="Symbol",$[$.TupleLength=55]="TupleLength",$[$.Tuple=56]="Tuple",$[$.Uint8ArrayMaxByteLength=57]="Uint8ArrayMaxByteLength",$[$.Uint8ArrayMinByteLength=58]="Uint8ArrayMinByteLength",$[$.Uint8Array=59]="Uint8Array",$[$.Undefined=60]="Undefined",$[$.Union=61]="Union",$[$.Void=62]="Void"})(V||(w8.ValueErrorType=V={}));class _6 extends p0.TypeBoxError{constructor($){super("Unknown type");this.schema=$}}w8.ValueErrorsUnknownTypeError=_6;w8.EscapeKey=Y1;class E6{constructor($){this.iterator=$}[Symbol.iterator](){return this.iterator}First(){const $=this.iterator.next();return $.done?void 0:$.value}}w8.ValueErrorIterator=E6;w8.Errors=Vz});var x$=Z0((G1)=>{var dz=G1&&G1.__createBinding||(Object.create?function($,W,H,Y){if(Y===void 0)Y=H;var X=Object.getOwnPropertyDescriptor(W,H);if(!X||("get"in X?!W.__esModule:X.writable||X.configurable))X={enumerable:!0,get:function(){return W[H]}};Object.defineProperty($,Y,X)}:function($,W,H,Y){if(Y===void 0)Y=H;$[Y]=W[H]}),Tz=G1&&G1.__exportStar||function($,W){for(var H in $)if(H!=="default"&&!Object.prototype.hasOwnProperty.call(W,H))dz(W,$,H)};Object.defineProperty(G1,"__esModule",{value:!0});Tz(q$(),G1)});var g$=Z0((L8)=>{Object.defineProperty(L8,"__esModule",{value:!0});L8.ValuePointer=L8.ValuePointerRootDeleteError=L8.ValuePointerRootSetError=void 0;class V6 extends Error{constructor($,W,H){super("Cannot set root value");this.value=$,this.path=W,this.update=H}}L8.ValuePointerRootSetError=V6;class k6 extends Error{constructor($,W){super("Cannot delete root value");this.value=$,this.path=W}}L8.ValuePointerRootDeleteError=k6;var N8;(function($){function W(Q){return Q.indexOf("~")===-1?Q:Q.replace(/~1/g,"/").replace(/~0/g,"~")}function*H(Q){if(Q==="")return;let[M,B]=[0,0];for(let j=0;j<Q.length;j++)if(Q.charAt(j)==="/")if(j===0)M=j+1;else B=j,yield W(Q.slice(M,B)),M=j+1;else B=j;yield W(Q.slice(M))}$.Format=H;function Y(Q,M,B){if(M==="")throw new V6(Q,M,B);let[j,D,C]=[null,Q,""];for(let w of H(M)){if(D[w]===void 0)D[w]={};j=D,D=D[w],C=w}j[C]=B}$.Set=Y;function X(Q,M){if(M==="")throw new k6(Q,M);let[B,j,D]=[null,Q,""];for(let C of H(M)){if(j[C]===void 0||j[C]===null)return;B=j,j=j[C],D=C}if(Array.isArray(B)){const C=parseInt(D);B.splice(C,1)}else delete B[D]}$.Delete=X;function z(Q,M){if(M==="")return!0;let[B,j,D]=[null,Q,""];for(let C of H(M)){if(j[C]===void 0)return!1;B=j,j=j[C],D=C}return Object.getOwnPropertyNames(B).includes(D)}$.Has=z;function Z(Q,M){if(M==="")return Q;let B=Q;for(let j of H(M)){if(B[j]===void 0)return;B=B[j]}return B}$.Get=Z})(N8||(L8.ValuePointer=N8={}))});var u1=Z0((B8)=>{var pz=function($){return[...Object.getOwnPropertyNames($),...Object.getOwnPropertySymbols($)].reduce((H,Y)=>({...H,[Y]:x6($[Y])}),{})},iz=function($){return $.map((W)=>x6(W))},oz=function($){return $.slice()},mz=function($){return new Date($.toISOString())},nz=function($){return $},x6=function($){if(F$.IsArray($))return iz($);if(F$.IsDate($))return mz($);if(F$.IsPlainObject($))return pz($);if(F$.IsTypedArray($))return oz($);if(F$.IsValueType($))return nz($);throw new Error("ValueClone: Unable to clone value")};Object.defineProperty(B8,"__esModule",{value:!0});B8.Clone=void 0;var F$=E0();B8.Clone=x6});var T6=Z0((O8)=>{var w$=function($,W){return{type:"update",path:$,value:W}},D8=function($,W){return{type:"insert",path:$,value:W}},K8=function($){return{type:"delete",path:$}};function*hz($,W,H){if(!I0.IsPlainObject(H))return yield w$($,H);const Y=[...Object.keys(W),...Object.getOwnPropertySymbols(W)],X=[...Object.keys(H),...Object.getOwnPropertySymbols(H)];for(let z of Y){if(I0.IsSymbol(z))throw new l1(z);if(I0.IsUndefined(H[z])&&X.includes(z))yield w$(`${$}/${String(z)}`,void 0)}for(let z of X){if(I0.IsUndefined(W[z])||I0.IsUndefined(H[z]))continue;if(I0.IsSymbol(z))throw new l1(z);yield*f$(`${$}/${String(z)}`,W[z],H[z])}for(let z of X){if(I0.IsSymbol(z))throw new l1(z);if(I0.IsUndefined(W[z]))yield D8(`${$}/${String(z)}`,H[z])}for(let z of Y.reverse()){if(I0.IsSymbol(z))throw new l1(z);if(I0.IsUndefined(H[z])&&!X.includes(z))yield K8(`${$}/${String(z)}`)}}function*uz($,W,H){if(!I0.IsArray(H))return yield w$($,H);for(let Y=0;Y<Math.min(W.length,H.length);Y++)yield*f$(`${$}/${Y}`,W[Y],H[Y]);for(let Y=0;Y<H.length;Y++){if(Y<W.length)continue;yield D8(`${$}/${Y}`,H[Y])}for(let Y=W.length-1;Y>=0;Y--){if(Y<H.length)continue;yield K8(`${$}/${Y}`)}}function*lz($,W,H){if(!I0.IsTypedArray(H)||W.length!==H.length||Object.getPrototypeOf(W).constructor.name!==Object.getPrototypeOf(H).constructor.name)return yield w$($,H);for(let Y=0;Y<Math.min(W.length,H.length);Y++)yield*f$(`${$}/${Y}`,W[Y],H[Y])}function*cz($,W,H){if(W===H)return;yield w$($,H)}function*f$($,W,H){if(I0.IsPlainObject(W))return yield*hz($,W,H);if(I0.IsArray(W))return yield*uz($,W,H);if(I0.IsTypedArray(W))return yield*lz($,W,H);if(I0.IsValueType(W))return yield*cz($,W,H);throw new d6(W)}var tz=function($,W){return[...f$("",$,W)]},sz=function($){return $.length>0&&$[0].path===""&&$[0].type==="update"},rz=function($){return $.length===0},az=function($,W){if(sz(W))return f6.Clone(W[0].value);if(rz(W))return f6.Clone($);const H=f6.Clone($);for(let Y of W)switch(Y.type){case"insert":{g6.ValuePointer.Set(H,Y.path,Y.value);break}case"update":{g6.ValuePointer.Set(H,Y.path,Y.value);break}case"delete":{g6.ValuePointer.Delete(H,Y.path);break}}return H};Object.defineProperty(O8,"__esModule",{value:!0});O8.Patch=O8.Diff=O8.ValueDeltaUnableToDiffUnknownValue=O8.ValueDeltaObjectWithSymbolKeyError=O8.Edit=O8.Delete=O8.Update=O8.Insert=void 0;var I0=E0(),i0=x0(),g6=g$(),f6=u1();O8.Insert=i0.Type.Object({type:i0.Type.Literal("insert"),path:i0.Type.String(),value:i0.Type.Unknown()});O8.Update=i0.Type.Object({type:i0.Type.Literal("update"),path:i0.Type.String(),value:i0.Type.Unknown()});O8.Delete=i0.Type.Object({type:i0.Type.Literal("delete"),path:i0.Type.String()});O8.Edit=i0.Type.Union([O8.Insert,O8.Update,O8.Delete]);class l1 extends Error{constructor($){super("Cannot diff objects with symbol keys");this.key=$}}O8.ValueDeltaObjectWithSymbolKeyError=l1;class d6 extends Error{constructor($){super("Unable to create diff edits for unknown value");this.value=$}}O8.ValueDeltaUnableToDiffUnknownValue=d6;O8.Diff=tz;O8.Patch=az});var _8=Z0((I8)=>{var YZ=function($,W,H,Y){if(!f0.IsPlainObject(H))d$.ValuePointer.Set($,W,y6.Clone(Y));else{const X=Object.keys(H),z=Object.keys(Y);for(let Z of X)if(!z.includes(Z))delete H[Z];for(let Z of z)if(!X.includes(Z))H[Z]=null;for(let Z of z)i6($,`${W}/${Z}`,H[Z],Y[Z])}},XZ=function($,W,H,Y){if(!f0.IsArray(H))d$.ValuePointer.Set($,W,y6.Clone(Y));else{for(let X=0;X<Y.length;X++)i6($,`${W}/${X}`,H[X],Y[X]);H.splice(Y.length)}},zZ=function($,W,H,Y){if(f0.IsTypedArray(H)&&H.length===Y.length)for(let X=0;X<H.length;X++)H[X]=Y[X];else d$.ValuePointer.Set($,W,y6.Clone(Y))},ZZ=function($,W,H,Y){if(H===Y)return;d$.ValuePointer.Set($,W,Y)},i6=function($,W,H,Y){if(f0.IsArray(Y))return XZ($,W,H,Y);if(f0.IsTypedArray(Y))return zZ($,W,H,Y);if(f0.IsPlainObject(Y))return YZ($,W,H,Y);if(f0.IsValueType(Y))return ZZ($,W,H,Y)},R8=function($){return f0.IsTypedArray($)||f0.IsValueType($)},QZ=function($,W){return f0.IsPlainObject($)&&f0.IsArray(W)||f0.IsArray($)&&f0.IsPlainObject(W)},JZ=function($,W){if(R8($)||R8(W))throw new p6;if(QZ($,W))throw new v6;i6($,"",$,W)};Object.defineProperty(I8,"__esModule",{value:!0});I8.Mutate=I8.ValueMutateInvalidRootMutationError=I8.ValueMutateTypeMismatchError=void 0;var f0=E0(),d$=g$(),y6=u1();class v6 extends Error{constructor(){super("Cannot assign due type mismatch of assignable values")}}I8.ValueMutateTypeMismatchError=v6;class p6 extends Error{constructor(){super("Only object and array types can be mutated at the root level")}}I8.ValueMutateInvalidRootMutationError=p6;I8.Mutate=JZ});var k8=Z0((E8)=>{var FZ=function($,W){if(!F1.IsPlainObject(W))return!1;const H=[...Object.keys($),...Object.getOwnPropertySymbols($)],Y=[...Object.keys(W),...Object.getOwnPropertySymbols(W)];if(H.length!==Y.length)return!1;return H.every((X)=>T$($[X],W[X]))},wZ=function($,W){return F1.IsDate(W)&&$.getTime()===W.getTime()},UZ=function($,W){if(!F1.IsArray(W)||$.length!==W.length)return!1;return $.every((H,Y)=>T$(H,W[Y]))},NZ=function($,W){if(!F1.IsTypedArray(W)||$.length!==W.length||Object.getPrototypeOf($).constructor.name!==Object.getPrototypeOf(W).constructor.name)return!1;return $.every((H,Y)=>T$(H,W[Y]))},LZ=function($,W){return $===W},T$=function($,W){if(F1.IsPlainObject($))return FZ($,W);if(F1.IsDate($))return wZ($,W);if(F1.IsTypedArray($))return NZ($,W);if(F1.IsArray($))return UZ($,W);if(F1.IsValueType($))return LZ($,W);throw new Error("ValueEquals: Unable to compare value")};Object.defineProperty(E8,"__esModule",{value:!0});E8.Equal=void 0;var F1=E0();E8.Equal=T$});var U$=Z0((w1)=>{var AZ=w1&&w1.__createBinding||(Object.create?function($,W,H,Y){if(Y===void 0)Y=H;var X=Object.getOwnPropertyDescriptor(W,H);if(!X||("get"in X?!W.__esModule:X.writable||X.configurable))X={enumerable:!0,get:function(){return W[H]}};Object.defineProperty($,Y,X)}:function($,W,H,Y){if(Y===void 0)Y=H;$[Y]=W[H]}),BZ=w1&&w1.__exportStar||function($,W){for(var H in $)if(H!=="default"&&!Object.prototype.hasOwnProperty.call(W,H))AZ(W,$,H)};Object.defineProperty(w1,"__esModule",{value:!0});w1.ValueErrorType=void 0;var jZ=q$();Object.defineProperty(w1,"ValueErrorType",{enumerable:!0,get:function(){return jZ.ValueErrorType}});BZ(R6(),w1)});var c1=Z0((g8)=>{var KZ=function($){return $[P0.Kind]==="Any"||$[P0.Kind]==="Unknown"},t=function($){return $!==void 0},OZ=function($,W,H){return!0},PZ=function($,W,H){if(!L0.IsArray(H))return!1;if(t($.minItems)&&!(H.length>=$.minItems))return!1;if(t($.maxItems)&&!(H.length<=$.maxItems))return!1;if(!H.every((z)=>b0($.items,W,z)))return!1;if($.uniqueItems===!0&&!function(){const z=new Set;for(let Z of H){const Q=DZ.Hash(Z);if(z.has(Q))return!1;else z.add(Q)}return!0}())return!1;if(!(t($.contains)||L0.IsNumber($.minContains)||L0.IsNumber($.maxContains)))return!0;const Y=t($.contains)?$.contains:P0.Type.Never(),X=H.reduce((z,Z)=>b0(Y,W,Z)?z+1:z,0);if(X===0)return!1;if(L0.IsNumber($.minContains)&&X<$.minContains)return!1;if(L0.IsNumber($.maxContains)&&X>$.maxContains)return!1;return!0},bZ=function($,W,H){return L0.IsAsyncIterator(H)},SZ=function($,W,H){if(!L0.IsBigInt(H))return!1;if(t($.exclusiveMaximum)&&!(H<$.exclusiveMaximum))return!1;if(t($.exclusiveMinimum)&&!(H>$.exclusiveMinimum))return!1;if(t($.maximum)&&!(H<=$.maximum))return!1;if(t($.minimum)&&!(H>=$.minimum))return!1;if(t($.multipleOf)&&H%$.multipleOf!==BigInt(0))return!1;return!0},CZ=function($,W,H){return L0.IsBoolean(H)},RZ=function($,W,H){return b0($.returns,W,H.prototype)},IZ=function($,W,H){if(!L0.IsDate(H))return!1;if(t($.exclusiveMaximumTimestamp)&&!(H.getTime()<$.exclusiveMaximumTimestamp))return!1;if(t($.exclusiveMinimumTimestamp)&&!(H.getTime()>$.exclusiveMinimumTimestamp))return!1;if(t($.maximumTimestamp)&&!(H.getTime()<=$.maximumTimestamp))return!1;if(t($.minimumTimestamp)&&!(H.getTime()>=$.minimumTimestamp))return!1;if(t($.multipleOfTimestamp)&&H.getTime()%$.multipleOfTimestamp!==0)return!1;return!0},GZ=function($,W,H){return L0.IsFunction(H)},_Z=function($,W,H){if(!L0.IsInteger(H))return!1;if(t($.exclusiveMaximum)&&!(H<$.exclusiveMaximum))return!1;if(t($.exclusiveMinimum)&&!(H>$.exclusiveMinimum))return!1;if(t($.maximum)&&!(H<=$.maximum))return!1;if(t($.minimum)&&!(H>=$.minimum))return!1;if(t($.multipleOf)&&H%$.multipleOf!==0)return!1;return!0},EZ=function($,W,H){const Y=$.allOf.every((X)=>b0(X,W,H));if($.unevaluatedProperties===!1){const X=new RegExp(P0.KeyResolver.ResolvePattern($)),z=Object.getOwnPropertyNames(H).every((Z)=>X.test(Z));return Y&&z}else if(P0.TypeGuard.TSchema($.unevaluatedProperties)){const X=new RegExp(P0.KeyResolver.ResolvePattern($)),z=Object.getOwnPropertyNames(H).every((Z)=>X.test(Z)||b0($.unevaluatedProperties,W,H[Z]));return Y&&z}else return Y},VZ=function($,W,H){return L0.IsIterator(H)},kZ=function($,W,H){return H===$.const},xZ=function($,W,H){return!1},gZ=function($,W,H){return!b0($.not,W,H)},fZ=function($,W,H){return L0.IsNull(H)},dZ=function($,W,H){if(!N$.TypeSystemPolicy.IsNumberLike(H))return!1;if(t($.exclusiveMaximum)&&!(H<$.exclusiveMaximum))return!1;if(t($.exclusiveMinimum)&&!(H>$.exclusiveMinimum))return!1;if(t($.minimum)&&!(H>=$.minimum))return!1;if(t($.maximum)&&!(H<=$.maximum))return!1;if(t($.multipleOf)&&H%$.multipleOf!==0)return!1;return!0},TZ=function($,W,H){if(!N$.TypeSystemPolicy.IsObjectLike(H))return!1;if(t($.minProperties)&&!(Object.getOwnPropertyNames(H).length>=$.minProperties))return!1;if(t($.maxProperties)&&!(Object.getOwnPropertyNames(H).length<=$.maxProperties))return!1;const Y=Object.getOwnPropertyNames($.properties);for(let X of Y){const z=$.properties[X];if($.required&&$.required.includes(X)){if(!b0(z,W,H[X]))return!1;if((P0.ExtendsUndefined.Check(z)||KZ(z))&&!(X in H))return!1}else if(N$.TypeSystemPolicy.IsExactOptionalProperty(H,X)&&!b0(z,W,H[X]))return!1}if($.additionalProperties===!1){const X=Object.getOwnPropertyNames(H);if($.required&&$.required.length===Y.length&&X.length===Y.length)return!0;else return X.every((z)=>Y.includes(z))}else if(typeof $.additionalProperties==="object")return Object.getOwnPropertyNames(H).every((z)=>Y.includes(z)||b0($.additionalProperties,W,H[z]));else return!0},yZ=function($,W,H){return L0.IsPromise(H)},vZ=function($,W,H){if(!N$.TypeSystemPolicy.IsRecordLike(H))return!1;if(t($.minProperties)&&!(Object.getOwnPropertyNames(H).length>=$.minProperties))return!1;if(t($.maxProperties)&&!(Object.getOwnPropertyNames(H).length<=$.maxProperties))return!1;const[Y,X]=Object.entries($.patternProperties)[0],z=new RegExp(Y),Z=Object.entries(H).every(([B,j])=>{return z.test(B)?b0(X,W,j):!0}),Q=typeof $.additionalProperties==="object"?Object.entries(H).every(([B,j])=>{return!z.test(B)?b0($.additionalProperties,W,j):!0}):!0,M=$.additionalProperties===!1?Object.getOwnPropertyNames(H).every((B)=>{return z.test(B)}):!0;return Z&&Q&&M},pZ=function($,W,H){return b0(x8.Deref($,W),W,H)},iZ=function($,W,H){if(!L0.IsString(H))return!1;if(t($.minLength)){if(!(H.length>=$.minLength))return!1}if(t($.maxLength)){if(!(H.length<=$.maxLength))return!1}if(t($.pattern)){if(!new RegExp($.pattern).test(H))return!1}if(t($.format)){if(!P0.FormatRegistry.Has($.format))return!1;return P0.FormatRegistry.Get($.format)(H)}return!0},oZ=function($,W,H){return L0.IsSymbol(H)},mZ=function($,W,H){return L0.IsString(H)&&new RegExp($.pattern).test(H)},nZ=function($,W,H){return b0(x8.Deref($,W),W,H)},hZ=function($,W,H){if(!L0.IsArray(H))return!1;if($.items===void 0&&H.length!==0)return!1;if(H.length!==$.maxItems)return!1;if(!$.items)return!0;for(let Y=0;Y<$.items.length;Y++)if(!b0($.items[Y],W,H[Y]))return!1;return!0},uZ=function($,W,H){return L0.IsUndefined(H)},lZ=function($,W,H){return $.anyOf.some((Y)=>b0(Y,W,H))},cZ=function($,W,H){if(!L0.IsUint8Array(H))return!1;if(t($.maxByteLength)&&!(H.length<=$.maxByteLength))return!1;if(t($.minByteLength)&&!(H.length>=$.minByteLength))return!1;return!0},tZ=function($,W,H){return!0},sZ=function($,W,H){return N$.TypeSystemPolicy.IsVoidLike(H)},rZ=function($,W,H){if(!P0.TypeRegistry.Has($[P0.Kind]))return!1;return P0.TypeRegistry.Get($[P0.Kind])($,H)},b0=function($,W,H){const Y=t($.$id)?[...W,$]:W,X=$;switch(X[P0.Kind]){case"Any":return OZ(X,Y,H);case"Array":return PZ(X,Y,H);case"AsyncIterator":return bZ(X,Y,H);case"BigInt":return SZ(X,Y,H);case"Boolean":return CZ(X,Y,H);case"Constructor":return RZ(X,Y,H);case"Date":return IZ(X,Y,H);case"Function":return GZ(X,Y,H);case"Integer":return _Z(X,Y,H);case"Intersect":return EZ(X,Y,H);case"Iterator":return VZ(X,Y,H);case"Literal":return kZ(X,Y,H);case"Never":return xZ(X,Y,H);case"Not":return gZ(X,Y,H);case"Null":return fZ(X,Y,H);case"Number":return dZ(X,Y,H);case"Object":return TZ(X,Y,H);case"Promise":return yZ(X,Y,H);case"Record":return vZ(X,Y,H);case"Ref":return pZ(X,Y,H);case"String":return iZ(X,Y,H);case"Symbol":return oZ(X,Y,H);case"TemplateLiteral":return mZ(X,Y,H);case"This":return nZ(X,Y,H);case"Tuple":return hZ(X,Y,H);case"Undefined":return uZ(X,Y,H);case"Union":return lZ(X,Y,H);case"Uint8Array":return cZ(X,Y,H);case"Unknown":return tZ(X,Y,H);case"Void":return sZ(X,Y,H);default:if(!P0.TypeRegistry.Has(X[P0.Kind]))throw new o6(X);return rZ(X,Y,H)}},aZ=function(...$){return $.length===3?b0($[0],$[1],$[2]):b0($[0],[],$[1])};Object.defineProperty(g8,"__esModule",{value:!0});g8.Check=g8.ValueCheckUnknownTypeError=void 0;var L0=E0(),N$=U$(),x8=D1(),DZ=M$(),P0=x0();class o6 extends P0.TypeBoxError{constructor($){super("Unknown type");this.schema=$}}g8.ValueCheckUnknownTypeError=o6;g8.Check=aZ});var t6=Z0((v8)=>{var W4=function($,W){if(s.HasPropertyKey($,"default"))return $.default;else return{}},H4=function($,W){if($.uniqueItems===!0&&!s.HasPropertyKey($,"default"))throw new Error("ValueCreate.Array: Array with the uniqueItems constraint requires a default value");else if("contains"in $&&!s.HasPropertyKey($,"default"))throw new Error("ValueCreate.Array: Array with the contains constraint requires a default value");else if("default"in $)return $.default;else if($.minItems!==void 0)return Array.from({length:$.minItems}).map((H)=>{return d0($.items,W)});else return[]},Y4=function($,W){if(s.HasPropertyKey($,"default"))return $.default;else return async function*(){}()},X4=function($,W){if(s.HasPropertyKey($,"default"))return $.default;else return BigInt(0)},z4=function($,W){if(s.HasPropertyKey($,"default"))return $.default;else return!1},Z4=function($,W){if(s.HasPropertyKey($,"default"))return $.default;else{const H=d0($.returns,W);if(typeof H==="object"&&!Array.isArray(H))return class{constructor(){for(let[Y,X]of Object.entries(H)){const z=this;z[Y]=X}}};else return class{}}},Q4=function($,W){if(s.HasPropertyKey($,"default"))return $.default;else if($.minimumTimestamp!==void 0)return new Date($.minimumTimestamp);else return new Date},J4=function($,W){if(s.HasPropertyKey($,"default"))return $.default;else return()=>d0($.returns,W)},q4=function($,W){if(s.HasPropertyKey($,"default"))return $.default;else if($.minimum!==void 0)return $.minimum;else return 0},M4=function($,W){if(s.HasPropertyKey($,"default"))return $.default;else{const H=$.allOf.reduce((Y,X)=>{const z=d0(X,W);return typeof z==="object"?{...Y,...z}:z},{});if(!$4.Check($,W,H))throw new u6($);return H}},F4=function($,W){if(s.HasPropertyKey($,"default"))return $.default;else return function*(){}()},w4=function($,W){if(s.HasPropertyKey($,"default"))return $.default;else return $.const},U4=function($,W){throw new n6($)},N4=function($,W){if(s.HasPropertyKey($,"default"))return $.default;else throw new h6($)},L4=function($,W){if(s.HasPropertyKey($,"default"))return $.default;else return null},A4=function($,W){if(s.HasPropertyKey($,"default"))return $.default;else if($.minimum!==void 0)return $.minimum;else return 0},B4=function($,W){if(s.HasPropertyKey($,"default"))return $.default;else{const H=new Set($.required);return $.default||Object.entries($.properties).reduce((Y,[X,z])=>{return H.has(X)?{...Y,[X]:d0(z,W)}:{...Y}},{})}},j4=function($,W){if(s.HasPropertyKey($,"default"))return $.default;else return Promise.resolve(d0($.item,W))},D4=function($,W){const[H,Y]=Object.entries($.patternProperties)[0];if(s.HasPropertyKey($,"default"))return $.default;else if(!(H===V0.PatternStringExact||H===V0.PatternNumberExact))return H.slice(1,H.length-1).split("|").reduce((z,Z)=>{return{...z,[Z]:d0(Y,W)}},{});else return{}},K4=function($,W){if(s.HasPropertyKey($,"default"))return $.default;else return d0(T8.Deref($,W),W)},O4=function($,W){if($.pattern!==void 0)if(!s.HasPropertyKey($,"default"))throw new Error("ValueCreate.String: String types with patterns must specify a default value");else return $.default;else if($.format!==void 0)if(!s.HasPropertyKey($,"default"))throw new Error("ValueCreate.String: String types with formats must specify a default value");else return $.default;else if(s.HasPropertyKey($,"default"))return $.default;else if($.minLength!==void 0)return Array.from({length:$.minLength}).map(()=>".").join("");else return""},P4=function($,W){if(s.HasPropertyKey($,"default"))return $.default;else if("value"in $)return Symbol.for($.value);else return Symbol()},b4=function($,W){if(s.HasPropertyKey($,"default"))return $.default;const H=V0.TemplateLiteralParser.ParseExact($.pattern);if(!V0.TemplateLiteralFinite.Check(H))throw new l6($);return V0.TemplateLiteralGenerator.Generate(H).next().value},S4=function($,W){if(y8++>d8)throw new c6($,d8);if(s.HasPropertyKey($,"default"))return $.default;else return d0(T8.Deref($,W),W)},C4=function($,W){if(s.HasPropertyKey($,"default"))return $.default;if($.items===void 0)return[];else return Array.from({length:$.minItems}).map((H,Y)=>d0($.items[Y],W))},R4=function($,W){if(s.HasPropertyKey($,"default"))return $.default;else return},I4=function($,W){if(s.HasPropertyKey($,"default"))return $.default;else if($.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");else return d0($.anyOf[0],W)},G4=function($,W){if(s.HasPropertyKey($,"default"))return $.default;else if($.minByteLength!==void 0)return new Uint8Array($.minByteLength);else return new Uint8Array(0)},_4=function($,W){if(s.HasPropertyKey($,"default"))return $.default;else return{}},E4=function($,W){if(s.HasPropertyKey($,"default"))return $.default;else return},V4=function($,W){if(s.HasPropertyKey($,"default"))return $.default;else throw new Error("User defined types must specify a default value")},d0=function($,W){const H=s.IsString($.$id)?[...W,$]:W,Y=$;switch(Y[V0.Kind]){case"Any":return W4(Y,H);case"Array":return H4(Y,H);case"AsyncIterator":return Y4(Y,H);case"BigInt":return X4(Y,H);case"Boolean":return z4(Y,H);case"Constructor":return Z4(Y,H);case"Date":return Q4(Y,H);case"Function":return J4(Y,H);case"Integer":return q4(Y,H);case"Intersect":return M4(Y,H);case"Iterator":return F4(Y,H);case"Literal":return w4(Y,H);case"Never":return U4(Y,H);case"Not":return N4(Y,H);case"Null":return L4(Y,H);case"Number":return A4(Y,H);case"Object":return B4(Y,H);case"Promise":return j4(Y,H);case"Record":return D4(Y,H);case"Ref":return K4(Y,H);case"String":return O4(Y,H);case"Symbol":return P4(Y,H);case"TemplateLiteral":return b4(Y,H);case"This":return S4(Y,H);case"Tuple":return C4(Y,H);case"Undefined":return R4(Y,H);case"Union":return I4(Y,H);case"Uint8Array":return G4(Y,H);case"Unknown":return _4(Y,H);case"Void":return E4(Y,H);default:if(!V0.TypeRegistry.Has(Y[V0.Kind]))throw new m6(Y);return V4(Y,H)}},k4=function(...$){return y8=0,$.length===2?d0($[0],$[1]):d0($[0],[])};Object.defineProperty(v8,"__esModule",{value:!0});v8.Create=v8.ValueCreateRecursiveInstantiationError=v8.ValueCreateTempateLiteralTypeError=v8.ValueCreateIntersectTypeError=v8.ValueCreateNotTypeError=v8.ValueCreateNeverTypeError=v8.ValueCreateUnknownTypeError=void 0;var s=E0(),$4=c1(),T8=D1(),V0=x0();class m6 extends V0.TypeBoxError{constructor($){super("Unknown type");this.schema=$}}v8.ValueCreateUnknownTypeError=m6;class n6 extends V0.TypeBoxError{constructor($){super("Never types cannot be created");this.schema=$}}v8.ValueCreateNeverTypeError=n6;class h6 extends V0.TypeBoxError{constructor($){super("Not types must have a default value");this.schema=$}}v8.ValueCreateNotTypeError=h6;class u6 extends V0.TypeBoxError{constructor($){super("Intersect produced invalid value. Consider using a default value.");this.schema=$}}v8.ValueCreateIntersectTypeError=u6;class l6 extends V0.TypeBoxError{constructor($){super("Can only create template literal values from patterns that produce finite sequences. Consider using a default value.");this.schema=$}}v8.ValueCreateTempateLiteralTypeError=l6;class c6 extends V0.TypeBoxError{constructor($,W){super("Value cannot be created as recursive type may produce value of infinite size. Consider using a default.");this.schema=$,this.recursiveMaxDepth=W}}v8.ValueCreateRecursiveInstantiationError=c6;var d8=512,y8=0;v8.Create=k4});var l8=Z0((h8)=>{var m8=function($,W,H){return o0.Check($,W,H)?t1.Clone(H):N1.Create($,W)},r6=function($,W,H){return o0.Check($,W,H)?H:N1.Create($,W)},v4=function($,W,H){if(o0.Check($,W,H))return t1.Clone(H);const Y=K1.IsArray(H)?t1.Clone(H):N1.Create($,W),X=K1.IsNumber($.minItems)&&Y.length<$.minItems?[...Y,...Array.from({length:$.minItems-Y.length},()=>null)]:Y,Z=(K1.IsNumber($.maxItems)&&X.length>$.maxItems?X.slice(0,$.maxItems):X).map((M)=>X1($.items,W,M));if($.uniqueItems!==!0)return Z;const Q=[...new Set(Z)];if(!o0.Check($,W,Q))throw new a6($,Q);return Q},p4=function($,W,H){if(o0.Check($,W,H))return N1.Create($,W);const Y=new Set($.returns.required||[]),X=function(){};for(let[z,Z]of Object.entries($.returns.properties)){if(!Y.has(z)&&H.prototype[z]===void 0)continue;X.prototype[z]=X1(Z,W,H.prototype[z])}return X},i4=function($,W,H){const Y=N1.Create($,W),X=K1.IsPlainObject(Y)&&K1.IsPlainObject(H)?{...Y,...H}:H;return o0.Check($,W,X)?X:N1.Create($,W)},o4=function($,W,H){throw new e6($)},m4=function($,W,H){if(o0.Check($,W,H))return H;if(H===null||typeof H!=="object")return N1.Create($,W);const Y=new Set($.required||[]),X={};for(let[z,Z]of Object.entries($.properties)){if(!Y.has(z)&&H[z]===void 0)continue;X[z]=X1(Z,W,H[z])}if(typeof $.additionalProperties==="object"){const z=Object.getOwnPropertyNames($.properties);for(let Z of Object.getOwnPropertyNames(H)){if(z.includes(Z))continue;X[Z]=X1($.additionalProperties,W,H[Z])}}return X},n4=function($,W,H){if(o0.Check($,W,H))return t1.Clone(H);if(H===null||typeof H!=="object"||Array.isArray(H)||H instanceof Date)return N1.Create($,W);const Y=Object.getOwnPropertyNames($.patternProperties)[0],X=$.patternProperties[Y],z={};for(let[Z,Q]of Object.entries(H))z[Z]=X1(X,W,Q);return z},h4=function($,W,H){return X1(i8.Deref($,W),W,H)},u4=function($,W,H){return X1(i8.Deref($,W),W,H)},l4=function($,W,H){if(o0.Check($,W,H))return t1.Clone(H);if(!K1.IsArray(H))return N1.Create($,W);if($.items===void 0)return[];return $.items.map((Y,X)=>X1(Y,W,H[X]))},c4=function($,W,H){return o0.Check($,W,H)?t1.Clone(H):s6.Create($,W,H)},X1=function($,W,H){const Y=K1.IsString($.$id)?[...W,$]:W,X=$;switch($[U1.Kind]){case"Array":return v4(X,Y,H);case"Constructor":return p4(X,Y,H);case"Intersect":return i4(X,Y,H);case"Never":return o4(X,Y,H);case"Object":return m4(X,Y,H);case"Record":return n4(X,Y,H);case"Ref":return h4(X,Y,H);case"This":return u4(X,Y,H);case"Tuple":return l4(X,Y,H);case"Union":return c4(X,Y,H);case"Date":case"Symbol":case"Uint8Array":return m8($,W,H);case"Any":case"AsyncIterator":case"BigInt":case"Boolean":case"Function":case"Integer":case"Iterator":case"Literal":case"Not":case"Null":case"Number":case"Promise":case"String":case"TemplateLiteral":case"Undefined":case"Unknown":case"Void":return r6(X,Y,H);default:if(!U1.TypeRegistry.Has(X[U1.Kind]))throw new $W(X);return r6(X,Y,H)}},n8=function(...$){return $.length===3?X1($[0],$[1],$[2]):X1($[0],[],$[1])};Object.defineProperty(h8,"__esModule",{value:!0});h8.Cast=h8.Default=h8.DefaultClone=h8.ValueCastUnknownTypeError=h8.ValueCastRecursiveTypeError=h8.ValueCastNeverTypeError=h8.ValueCastArrayUniqueItemsTypeError=void 0;var K1=E0(),N1=t6(),o0=c1(),t1=u1(),i8=D1(),U1=x0();class a6 extends U1.TypeBoxError{constructor($,W){super("Array cast produced invalid data due to uniqueItems constraint");this.schema=$,this.value=W}}h8.ValueCastArrayUniqueItemsTypeError=a6;class e6 extends U1.TypeBoxError{constructor($){super("Never types cannot be cast");this.schema=$}}h8.ValueCastNeverTypeError=e6;class o8 extends U1.TypeBoxError{constructor($){super("Cannot cast recursive schemas");this.schema=$}}h8.ValueCastRecursiveTypeError=o8;class $W extends U1.TypeBoxError{constructor($){super("Unknown type");this.schema=$}}h8.ValueCastUnknownTypeError=$W;var s6;(function($){function W(X,z,Z){if(X[U1.Kind]==="Object"&&typeof Z==="object"&&!K1.IsNull(Z)){const Q=X,M=Object.getOwnPropertyNames(Z),B=Object.entries(Q.properties),[j,D]=[1/B.length,B.length];return B.reduce((C,[w,U])=>{const A=U[U1.Kind]==="Literal"&&U.const===Z[w]?D:0,O=o0.Check(U,z,Z[w])?j:0,N=M.includes(w)?j:0;return C+(A+O+N)},0)}else return o0.Check(X,z,Z)?1:0}function H(X,z,Z){let[Q,M]=[X.anyOf[0],0];for(let B of X.anyOf){const j=W(B,z,Z);if(j>M)Q=B,M=j}return Q}function Y(X,z,Z){if("default"in X)return X.default;else{const Q=H(X,z,Z);return n8(Q,z,Z)}}$.Create=Y})(s6||(s6={}));h8.DefaultClone=m8;h8.Default=r6;h8.Cast=n8});var $H=Z0((a8)=>{var y$=function($){return H0.IsString($)&&!isNaN($)&&!isNaN(parseFloat($))},YQ=function($){return H0.IsBigInt($)||H0.IsBoolean($)||H0.IsNumber($)},L$=function($){return $===!0||H0.IsNumber($)&&$===1||H0.IsBigInt($)&&$===BigInt("1")||H0.IsString($)&&($.toLowerCase()==="true"||$==="1")},A$=function($){return $===!1||H0.IsNumber($)&&($===0||Object.is($,-0))||H0.IsBigInt($)&&$===BigInt("0")||H0.IsString($)&&($.toLowerCase()==="false"||$==="0"||$==="-0")},XQ=function($){return H0.IsString($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)},zQ=function($){return H0.IsString($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)},ZQ=function($){return H0.IsString($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)},QQ=function($){return H0.IsString($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)},JQ=function($){return H0.IsString($)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test($)},qQ=function($,W){const H=s8($);return H===W?H:$},MQ=function($,W){const H=r8($);return H===W?H:$},FQ=function($,W){const H=t8($);return H===W?H:$},wQ=function($,W){if(typeof $.const==="string")return qQ(W,$.const);else if(typeof $.const==="number")return MQ(W,$.const);else if(typeof $.const==="boolean")return FQ(W,$.const);else return WQ.Clone(W)},t8=function($){return L$($)?!0:A$($)?!1:$},UQ=function($){return y$($)?BigInt(parseInt($)):H0.IsNumber($)?BigInt($|0):A$($)?BigInt(0):L$($)?BigInt(1):$},s8=function($){return YQ($)?$.toString():H0.IsSymbol($)&&$.description!==void 0?$.description.toString():$},r8=function($){return y$($)?parseFloat($):L$($)?1:A$($)?0:$},NQ=function($){return y$($)?parseInt($):H0.IsNumber($)?$|0:L$($)?1:A$($)?0:$},LQ=function($){return H0.IsString($)&&$.toLowerCase()==="null"?null:$},AQ=function($){return H0.IsString($)&&$==="undefined"?void 0:$},BQ=function($){return H0.IsDate($)?$:H0.IsNumber($)?new Date($):L$($)?new Date(1):A$($)?new Date(0):y$($)?new Date(parseInt($)):zQ($)?new Date(`1970-01-01T${$}.000Z`):XQ($)?new Date(`1970-01-01T${$}`):QQ($)?new Date(`${$}.000Z`):ZQ($)?new Date($):JQ($)?new Date(`${$}T00:00:00.000Z`):$},WW=function($){return $},jQ=function($,W,H){if(H0.IsArray(H))return H.map((Y)=>t0($.items,W,Y));return H},DQ=function($,W,H){return UQ(H)},KQ=function($,W,H){return t8(H)},OQ=function($,W,H){return BQ(H)},PQ=function($,W,H){return NQ(H)},bQ=function($,W,H){return $.allOf.every((Y)=>s1.TypeGuard.TObject(Y))?t0(s1.Type.Composite($.allOf),W,H):t0($.allOf[0],W,H)},SQ=function($,W,H){return wQ($,H)},CQ=function($,W,H){return LQ(H)},RQ=function($,W,H){return r8(H)},IQ=function($,W,H){if(H0.IsObject(H))return Object.getOwnPropertyNames($.properties).reduce((Y,X)=>{return H[X]!==void 0?{...Y,[X]:t0($.properties[X],W,H[X])}:{...Y}},H);return H},GQ=function($,W,H){const Y=Object.getOwnPropertyNames($.patternProperties)[0],X=$.patternProperties[Y],z={};for(let[Z,Q]of Object.entries(H))z[Z]=t0(X,W,Q);return z},_Q=function($,W,H){return t0(c8.Deref($,W),W,H)},EQ=function($,W,H){return s8(H)},VQ=function($,W,H){return H0.IsString(H)||H0.IsNumber(H)?Symbol(H):H},kQ=function($,W,H){return t0(c8.Deref($,W),W,H)},xQ=function($,W,H){if(H0.IsArray(H)&&!H0.IsUndefined($.items))return H.map((Y,X)=>{return X<$.items.length?t0($.items[X],W,Y):Y});return H},gQ=function($,W,H){return AQ(H)},fQ=function($,W,H){for(let Y of $.anyOf){const X=t0(Y,W,H);if(HQ.Check(Y,W,X))return X}return H},t0=function($,W,H){const Y=H0.IsString($.$id)?[...W,$]:W,X=$;switch($[s1.Kind]){case"Array":return jQ(X,Y,H);case"BigInt":return DQ(X,Y,H);case"Boolean":return KQ(X,Y,H);case"Date":return OQ(X,Y,H);case"Integer":return PQ(X,Y,H);case"Intersect":return bQ(X,Y,H);case"Literal":return SQ(X,Y,H);case"Null":return CQ(X,Y,H);case"Number":return RQ(X,Y,H);case"Object":return IQ(X,Y,H);case"Record":return GQ(X,Y,H);case"Ref":return _Q(X,Y,H);case"String":return EQ(X,Y,H);case"Symbol":return VQ(X,Y,H);case"This":return kQ(X,Y,H);case"Tuple":return xQ(X,Y,H);case"Undefined":return gQ(X,Y,H);case"Union":return fQ(X,Y,H);case"Any":case"AsyncIterator":case"Constructor":case"Function":case"Iterator":case"Never":case"Promise":case"TemplateLiteral":case"Uint8Array":case"Unknown":case"Void":return WW(H);default:if(!s1.TypeRegistry.Has(X[s1.Kind]))throw new HW(X);return WW(H)}},dQ=function(...$){return $.length===3?t0($[0],$[1],$[2]):t0($[0],[],$[1])};Object.defineProperty(a8,"__esModule",{value:!0});a8.Convert=a8.Default=a8.ValueConvertUnknownTypeError=void 0;var H0=E0(),WQ=u1(),HQ=c1(),c8=D1(),s1=x0();class HW extends s1.TypeBoxError{constructor($){super("Unknown type");this.schema=$}}a8.ValueConvertUnknownTypeError=HW;a8.Default=WW;a8.Convert=dQ});var ZW=Z0((ZH)=>{Object.defineProperty(ZH,"__esModule",{value:!0});ZH.EncodeTransform=ZH.DecodeTransform=ZH.HasTransform=ZH.TransformEncodeError=ZH.TransformDecodeError=ZH.TransformEncodeCheckError=ZH.TransformDecodeCheckError=void 0;var _0=E0(),r1=D1(),YW=c1(),h=x0();class XH extends h.TypeBoxError{constructor($,W,H){super("Unable to decode due to invalid value");this.schema=$,this.value=W,this.error=H}}ZH.TransformDecodeCheckError=XH;class zH extends h.TypeBoxError{constructor($,W,H){super("Unable to encode due to invalid value");this.schema=$,this.value=W,this.error=H}}ZH.TransformEncodeCheckError=zH;class XW extends h.TypeBoxError{constructor($,W,H){super(`${H instanceof Error?H.message:"Unknown error"}`);this.schema=$,this.value=W}}ZH.TransformDecodeError=XW;class zW extends h.TypeBoxError{constructor($,W,H){super(`${H instanceof Error?H.message:"Unknown error"}`);this.schema=$,this.value=W}}ZH.TransformEncodeError=zW;var WH;(function($){function W(b,I){return h.TypeGuard.TTransform(b)||A(b.items,I)}function H(b,I){return h.TypeGuard.TTransform(b)||A(b.items,I)}function Y(b,I){return h.TypeGuard.TTransform(b)||A(b.returns,I)||b.parameters.some((k)=>A(k,I))}function X(b,I){return h.TypeGuard.TTransform(b)||A(b.returns,I)||b.parameters.some((k)=>A(k,I))}function z(b,I){return h.TypeGuard.TTransform(b)||h.TypeGuard.TTransform(b.unevaluatedProperties)||b.allOf.some((k)=>A(k,I))}function Z(b,I){return h.TypeGuard.TTransform(b)||A(b.items,I)}function Q(b,I){return h.TypeGuard.TTransform(b)||A(b.not,I)}function M(b,I){return h.TypeGuard.TTransform(b)||Object.values(b.properties).some((k)=>A(k,I))||h.TypeGuard.TSchema(b.additionalProperties)&&A(b.additionalProperties,I)}function B(b,I){return h.TypeGuard.TTransform(b)||A(b.item,I)}function j(b,I){const k=Object.getOwnPropertyNames(b.patternProperties)[0],d=b.patternProperties[k];return h.TypeGuard.TTransform(b)||A(d,I)||h.TypeGuard.TSchema(b.additionalProperties)&&h.TypeGuard.TTransform(b.additionalProperties)}function D(b,I){if(h.TypeGuard.TTransform(b))return!0;return A(r1.Deref(b,I),I)}function C(b,I){if(h.TypeGuard.TTransform(b))return!0;return A(r1.Deref(b,I),I)}function w(b,I){return h.TypeGuard.TTransform(b)||!_0.IsUndefined(b.items)&&b.items.some((k)=>A(k,I))}function U(b,I){return h.TypeGuard.TTransform(b)||b.anyOf.some((k)=>A(k,I))}function A(b,I){const k=_0.IsString(b.$id)?[...I,b]:I,d=b;if(b.$id&&O.has(b.$id))return!1;if(b.$id)O.add(b.$id);switch(b[h.Kind]){case"Array":return W(d,k);case"AsyncIterator":return H(d,k);case"Constructor":return Y(d,k);case"Function":return X(d,k);case"Intersect":return z(d,k);case"Iterator":return Z(d,k);case"Not":return Q(d,k);case"Object":return M(d,k);case"Promise":return B(d,k);case"Record":return j(d,k);case"Ref":return D(d,k);case"This":return C(d,k);case"Tuple":return w(d,k);case"Union":return U(d,k);default:return h.TypeGuard.TTransform(b)}}const O=new Set;function N(b,I){return O.clear(),A(b,I)}$.Has=N})(WH||(ZH.HasTransform=WH={}));var HH;(function($){function W(w,U){try{return h.TypeGuard.TTransform(w)?w[h.Transform].Decode(U):U}catch(A){throw new XW(w,U,A)}}function H(w,U,A){return _0.IsArray(A)?W(w,A.map((O)=>D(w.items,U,O))):W(w,A)}function Y(w,U,A){if(!_0.IsPlainObject(A)||_0.IsValueType(A))return W(w,A);const O=h.KeyResolver.ResolveKeys(w,{includePatterns:!1}),N=O.reduce((d,R)=>{return R in d?{...d,[R]:D(h.IndexedAccessor.Resolve(w,[R]),U,d[R])}:d},A);if(!h.TypeGuard.TTransform(w.unevaluatedProperties))return W(w,N);const b=Object.getOwnPropertyNames(N),I=w.unevaluatedProperties,k=b.reduce((d,R)=>{return!O.includes(R)?{...d,[R]:W(I,d[R])}:d},N);return W(w,k)}function X(w,U,A){return W(w,D(w.not,U,A))}function z(w,U,A){if(!_0.IsPlainObject(A))return W(w,A);const O=h.KeyResolver.ResolveKeys(w,{includePatterns:!1}),N=O.reduce((d,R)=>{return R in d?{...d,[R]:D(w.properties[R],U,d[R])}:d},A);if(!h.TypeGuard.TSchema(w.additionalProperties))return W(w,N);const b=Object.getOwnPropertyNames(N),I=w.additionalProperties,k=b.reduce((d,R)=>{return!O.includes(R)?{...d,[R]:W(I,d[R])}:d},N);return W(w,k)}function Z(w,U,A){if(!_0.IsPlainObject(A))return W(w,A);const O=Object.getOwnPropertyNames(w.patternProperties)[0],N=new RegExp(O),b=Object.getOwnPropertyNames(A).reduce((R,r)=>{return N.test(r)?{...R,[r]:D(w.patternProperties[O],U,R[r])}:R},A);if(!h.TypeGuard.TSchema(w.additionalProperties))return W(w,b);const I=Object.getOwnPropertyNames(b),k=w.additionalProperties,d=I.reduce((R,r)=>{return!N.test(r)?{...R,[r]:W(k,R[r])}:R},b);return W(w,d)}function Q(w,U,A){const O=r1.Deref(w,U);return W(w,D(O,U,A))}function M(w,U,A){const O=r1.Deref(w,U);return W(w,D(O,U,A))}function B(w,U,A){return _0.IsArray(A)&&_0.IsArray(w.items)?W(w,w.items.map((O,N)=>D(O,U,A[N]))):W(w,A)}function j(w,U,A){const O=W(w,A);for(let N of w.anyOf){if(!YW.Check(N,U,O))continue;return D(N,U,O)}return O}function D(w,U,A){const O=typeof w.$id==="string"?[...U,w]:U,N=w;switch(w[h.Kind]){case"Array":return H(N,O,A);case"Intersect":return Y(N,O,A);case"Not":return X(N,O,A);case"Object":return z(N,O,A);case"Record":return Z(N,O,A);case"Ref":return Q(N,O,A);case"Symbol":return W(N,A);case"This":return M(N,O,A);case"Tuple":return B(N,O,A);case"Union":return j(N,O,A);default:return W(N,A)}}function C(w,U,A){return D(w,U,A)}$.Decode=C})(HH||(ZH.DecodeTransform=HH={}));var YH;(function($){function W(w,U){try{return h.TypeGuard.TTransform(w)?w[h.Transform].Encode(U):U}catch(A){throw new zW(w,U,A)}}function H(w,U,A){const O=W(w,A);return _0.IsArray(O)?O.map((N)=>D(w.items,U,N)):O}function Y(w,U,A){const O=W(w,A);if(!_0.IsPlainObject(A)||_0.IsValueType(A))return O;const N=h.KeyResolver.ResolveKeys(w,{includePatterns:!1}),b=N.reduce((d,R)=>{return R in O?{...d,[R]:D(h.IndexedAccessor.Resolve(w,[R]),U,d[R])}:d},O);if(!h.TypeGuard.TTransform(w.unevaluatedProperties))return W(w,b);const I=Object.getOwnPropertyNames(b),k=w.unevaluatedProperties;return I.reduce((d,R)=>{return!N.includes(R)?{...d,[R]:W(k,d[R])}:d},b)}function X(w,U,A){return W(w.not,W(w,A))}function z(w,U,A){const O=W(w,A);if(!_0.IsPlainObject(A))return O;const N=h.KeyResolver.ResolveKeys(w,{includePatterns:!1}),b=N.reduce((d,R)=>{return R in d?{...d,[R]:D(w.properties[R],U,d[R])}:d},O);if(!h.TypeGuard.TSchema(w.additionalProperties))return b;const I=Object.getOwnPropertyNames(b),k=w.additionalProperties;return I.reduce((d,R)=>{return!N.includes(R)?{...d,[R]:W(k,d[R])}:d},b)}function Z(w,U,A){const O=W(w,A);if(!_0.IsPlainObject(A))return O;const N=Object.getOwnPropertyNames(w.patternProperties)[0],b=new RegExp(N),I=Object.getOwnPropertyNames(A).reduce((R,r)=>{return b.test(r)?{...R,[r]:D(w.patternProperties[N],U,R[r])}:R},O);if(!h.TypeGuard.TSchema(w.additionalProperties))return W(w,I);const k=Object.getOwnPropertyNames(I),d=w.additionalProperties;return k.reduce((R,r)=>{return!b.test(r)?{...R,[r]:W(d,R[r])}:R},I)}function Q(w,U,A){const O=r1.Deref(w,U),N=D(O,U,A);return W(w,N)}function M(w,U,A){const O=r1.Deref(w,U),N=D(O,U,A);return W(w,N)}function B(w,U,A){const O=W(w,A);return _0.IsArray(w.items)?w.items.map((N,b)=>D(N,U,O[b])):[]}function j(w,U,A){for(let O of w.anyOf){if(!YW.Check(O,U,A))continue;const N=D(O,U,A);return W(w,N)}for(let O of w.anyOf){const N=D(O,U,A);if(!YW.Check(w,U,N))continue;return W(w,N)}return W(w,A)}function D(w,U,A){const O=typeof w.$id==="string"?[...U,w]:U,N=w;switch(w[h.Kind]){case"Array":return H(N,O,A);case"Intersect":return Y(N,O,A);case"Not":return X(N,O,A);case"Object":return z(N,O,A);case"Record":return Z(N,O,A);case"Ref":return Q(N,O,A);case"This":return M(N,O,A);case"Tuple":return B(N,O,A);case"Union":return j(N,O,A);default:return W(N,A)}}function C(w,U,A){return D(w,U,A)}$.Encode=C})(YH||(ZH.EncodeTransform=YH={}))});var BH=Z0((LH)=>{Object.defineProperty(LH,"__esModule",{value:!0});LH.Value=void 0;var JH=x$(),hQ=_8(),uQ=M$(),lQ=k8(),qH=l8(),cQ=u1(),MH=$H(),FH=t6(),wH=c1(),UH=T6(),v$=ZW(),NH;(function($){function W(...U){return qH.Cast.apply(qH,U)}$.Cast=W;function H(...U){return FH.Create.apply(FH,U)}$.Create=H;function Y(...U){return wH.Check.apply(wH,U)}$.Check=Y;function X(...U){return MH.Convert.apply(MH,U)}$.Convert=X;function z(U){return cQ.Clone(U)}$.Clone=z;function Z(...U){const[A,O,N]=U.length===3?[U[0],U[1],U[2]]:[U[0],[],U[1]];if(!Y(A,O,N))throw new v$.TransformDecodeCheckError(A,N,M(A,O,N).First());return v$.DecodeTransform.Decode(A,O,N)}$.Decode=Z;function Q(...U){const[A,O,N]=U.length===3?[U[0],U[1],U[2]]:[U[0],[],U[1]],b=v$.EncodeTransform.Encode(A,O,N);if(!Y(A,O,b))throw new v$.TransformEncodeCheckError(A,N,M(A,O,N).First());return b}$.Encode=Q;function M(...U){return JH.Errors.apply(JH,U)}$.Errors=M;function B(U,A){return lQ.Equal(U,A)}$.Equal=B;function j(U,A){return UH.Diff(U,A)}$.Diff=j;function D(U){return uQ.Hash(U)}$.Hash=D;function C(U,A){return UH.Patch(U,A)}$.Patch=C;function w(U,A){hQ.Mutate(U,A)}$.Mutate=w})(NH||(LH.Value=NH={}))});var i$=Z0((z1)=>{Object.defineProperty(z1,"__esModule",{value:!0});z1.Value=z1.ValuePointer=z1.Delete=z1.Update=z1.Insert=z1.Edit=z1.ValueErrorIterator=z1.ValueErrorType=void 0;var jH=x$();Object.defineProperty(z1,"ValueErrorType",{enumerable:!0,get:function(){return jH.ValueErrorType}});Object.defineProperty(z1,"ValueErrorIterator",{enumerable:!0,get:function(){return jH.ValueErrorIterator}});var p$=T6();Object.defineProperty(z1,"Edit",{enumerable:!0,get:function(){return p$.Edit}});Object.defineProperty(z1,"Insert",{enumerable:!0,get:function(){return p$.Insert}});Object.defineProperty(z1,"Update",{enumerable:!0,get:function(){return p$.Update}});Object.defineProperty(z1,"Delete",{enumerable:!0,get:function(){return p$.Delete}});var tQ=g$();Object.defineProperty(z1,"ValuePointer",{enumerable:!0,get:function(){return tQ.ValuePointer}});var sQ=BH();Object.defineProperty(z1,"Value",{enumerable:!0,get:function(){return sQ.Value}})});var SH=Z0((PH)=>{Object.defineProperty(PH,"__esModule",{value:!0});PH.TypeCompiler=PH.Policy=PH.TypeCompilerTypeGuardError=PH.TypeCompilerUnknownTypeError=PH.TypeCheck=void 0;var j$=ZW(),u=E0(),z9=q$(),D$=U$(),Z9=D1(),Q9=M$(),U0=x0();class wW{constructor($,W,H,Y){this.schema=$,this.references=W,this.checkFunc=H,this.code=Y,this.hasTransform=j$.HasTransform.Has($,W)}Code(){return this.code}Errors($){return z9.Errors(this.schema,this.references,$)}Check($){return this.checkFunc($)}Decode($){if(!this.checkFunc($))throw new j$.TransformDecodeCheckError(this.schema,$,this.Errors($).First());return this.hasTransform?j$.DecodeTransform.Decode(this.schema,this.references,$):$}Encode($){const W=this.hasTransform?j$.EncodeTransform.Encode(this.schema,this.references,$):$;if(!this.checkFunc(W))throw new j$.TransformEncodeCheckError(this.schema,$,this.Errors($).First());return W}}PH.TypeCheck=wW;var L1;(function($){function W(z){return z===36}$.DollarSign=W;function H(z){return z===95}$.IsUnderscore=H;function Y(z){return z>=65&&z<=90||z>=97&&z<=122}$.IsAlpha=Y;function X(z){return z>=48&&z<=57}$.IsNumeric=X})(L1||(L1={}));var h$;(function($){function W(z){if(z.length===0)return!1;return L1.IsNumeric(z.charCodeAt(0))}function H(z){if(W(z))return!1;for(let Z=0;Z<z.length;Z++){const Q=z.charCodeAt(Z);if(!(L1.IsAlpha(Q)||L1.IsNumeric(Q)||L1.DollarSign(Q)||L1.IsUnderscore(Q)))return!1}return!0}function Y(z){return z.replace(/'/g,"\\'")}function X(z,Z){return H(Z)?`${z}.${Z}`:`${z}['${Y(Z)}']`}$.Encode=X})(h$||(h$={}));var MW;(function($){function W(H){const Y=[];for(let X=0;X<H.length;X++){const z=H.charCodeAt(X);if(L1.IsNumeric(z)||L1.IsAlpha(z))Y.push(H.charAt(X));else Y.push(`_${z}_`)}return Y.join("").replace(/__/g,"_")}$.Encode=W})(MW||(MW={}));var FW;(function($){function W(H){return H.replace(/'/g,"\\'")}$.Escape=W})(FW||(FW={}));class UW extends U0.TypeBoxError{constructor($){super("Unknown type");this.schema=$}}PH.TypeCompilerUnknownTypeError=UW;class u$ extends U0.TypeBoxError{constructor($){super("Preflight validation check failed to guard for the given schema");this.schema=$}}PH.TypeCompilerTypeGuardError=u$;var E1;(function($){function W(Z,Q,M){return D$.TypeSystemPolicy.ExactOptionalPropertyTypes?`('${Q}' in ${Z} ? ${M} : true)`:`(${h$.Encode(Z,Q)} !== undefined ? ${M} : true)`}$.IsExactOptionalProperty=W;function H(Z){return!D$.TypeSystemPolicy.AllowArrayObject?`(typeof ${Z} === 'object' && ${Z} !== null && !Array.isArray(${Z}))`:`(typeof ${Z} === 'object' && ${Z} !== null)`}$.IsObjectLike=H;function Y(Z){return!D$.TypeSystemPolicy.AllowArrayObject?`(typeof ${Z} === 'object' && ${Z} !== null && !Array.isArray(${Z}) && !(${Z} instanceof Date) && !(${Z} instanceof Uint8Array))`:`(typeof ${Z} === 'object' && ${Z} !== null && !(${Z} instanceof Date) && !(${Z} instanceof Uint8Array))`}$.IsRecordLike=Y;function X(Z){return!D$.TypeSystemPolicy.AllowNaN?`(typeof ${Z} === 'number' && Number.isFinite(${Z}))`:`typeof ${Z} === 'number'`}$.IsNumberLike=X;function z(Z){return D$.TypeSystemPolicy.AllowNullVoid?`(${Z} === undefined || ${Z} === null)`:`${Z} === undefined`}$.IsVoidLike=z})(E1||(PH.Policy=E1={}));var OH;(function($){function W(K){return K[U0.Kind]==="Any"||K[U0.Kind]==="Unknown"}function*H(K,E,P){yield"true"}function*Y(K,E,P){yield`Array.isArray(${P})`;const[p,f]=[q0("value","any"),q0("acc","number")];if(u.IsNumber(K.maxItems))yield`${P}.length <= ${K.maxItems}`;if(u.IsNumber(K.minItems))yield`${P}.length >= ${K.minItems}`;const T=x(K.items,E,"value");if(yield`${P}.every((${p}) => ${T})`,U0.TypeGuard.TSchema(K.contains)||u.IsNumber(K.minContains)||u.IsNumber(K.maxContains)){const $0=U0.TypeGuard.TSchema(K.contains)?K.contains:U0.Type.Never(),D0=x($0,E,"value"),W0=u.IsNumber(K.minContains)?[`(count >= ${K.minContains})`]:[],F=u.IsNumber(K.maxContains)?[`(count <= ${K.maxContains})`]:[],l=`const count = value.reduce((${f}, ${p}) => ${D0} ? acc + 1 : acc, 0)`,K0=["(count > 0)",...W0,...F].join(" && ");yield`((${p}) => { ${l}; return ${K0}})(${P})`}if(K.uniqueItems===!0)yield`((${p}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${P})`}function*X(K,E,P){yield`(typeof value === 'object' && Symbol.asyncIterator in ${P})`}function*z(K,E,P){if(yield`(typeof ${P} === 'bigint')`,u.IsBigInt(K.exclusiveMaximum))yield`${P} < BigInt(${K.exclusiveMaximum})`;if(u.IsBigInt(K.exclusiveMinimum))yield`${P} > BigInt(${K.exclusiveMinimum})`;if(u.IsBigInt(K.maximum))yield`${P} <= BigInt(${K.maximum})`;if(u.IsBigInt(K.minimum))yield`${P} >= BigInt(${K.minimum})`;if(u.IsBigInt(K.multipleOf))yield`(${P} % BigInt(${K.multipleOf})) === 0`}function*Z(K,E,P){yield`(typeof ${P} === 'boolean')`}function*Q(K,E,P){yield*y0(K.returns,E,`${P}.prototype`)}function*M(K,E,P){if(yield`(${P} instanceof Date) && Number.isFinite(${P}.getTime())`,u.IsNumber(K.exclusiveMaximumTimestamp))yield`${P}.getTime() < ${K.exclusiveMaximumTimestamp}`;if(u.IsNumber(K.exclusiveMinimumTimestamp))yield`${P}.getTime() > ${K.exclusiveMinimumTimestamp}`;if(u.IsNumber(K.maximumTimestamp))yield`${P}.getTime() <= ${K.maximumTimestamp}`;if(u.IsNumber(K.minimumTimestamp))yield`${P}.getTime() >= ${K.minimumTimestamp}`;if(u.IsNumber(K.multipleOfTimestamp))yield`(${P}.getTime() % ${K.multipleOfTimestamp}) === 0`}function*B(K,E,P){yield`(typeof ${P} === 'function')`}function*j(K,E,P){if(yield`(typeof ${P} === 'number' && Number.isInteger(${P}))`,u.IsNumber(K.exclusiveMaximum))yield`${P} < ${K.exclusiveMaximum}`;if(u.IsNumber(K.exclusiveMinimum))yield`${P} > ${K.exclusiveMinimum}`;if(u.IsNumber(K.maximum))yield`${P} <= ${K.maximum}`;if(u.IsNumber(K.minimum))yield`${P} >= ${K.minimum}`;if(u.IsNumber(K.multipleOf))yield`(${P} % ${K.multipleOf}) === 0`}function*D(K,E,P){const p=K.allOf.map((f)=>x(f,E,P)).join(" && ");if(K.unevaluatedProperties===!1){const f=o(`${new RegExp(U0.KeyResolver.ResolvePattern(K))};`),T=`Object.getOwnPropertyNames(${P}).every(key => ${f}.test(key))`;yield`(${p} && ${T})`}else if(U0.TypeGuard.TSchema(K.unevaluatedProperties)){const f=o(`${new RegExp(U0.KeyResolver.ResolvePattern(K))};`),T=`Object.getOwnPropertyNames(${P}).every(key => ${f}.test(key) || ${x(K.unevaluatedProperties,E,`${P}[key]`)})`;yield`(${p} && ${T})`}else yield`(${p})`}function*C(K,E,P){yield`(typeof value === 'object' && Symbol.iterator in ${P})`}function*w(K,E,P){if(typeof K.const==="number"||typeof K.const==="boolean")yield`(${P} === ${K.const})`;else yield`(${P} === '${FW.Escape(K.const)}')`}function*U(K,E,P){yield"false"}function*A(K,E,P){yield`(!${x(K.not,E,P)})`}function*O(K,E,P){yield`(${P} === null)`}function*N(K,E,P){if(yield E1.IsNumberLike(P),u.IsNumber(K.exclusiveMaximum))yield`${P} < ${K.exclusiveMaximum}`;if(u.IsNumber(K.exclusiveMinimum))yield`${P} > ${K.exclusiveMinimum}`;if(u.IsNumber(K.maximum))yield`${P} <= ${K.maximum}`;if(u.IsNumber(K.minimum))yield`${P} >= ${K.minimum}`;if(u.IsNumber(K.multipleOf))yield`(${P} % ${K.multipleOf}) === 0`}function*b(K,E,P){if(yield E1.IsObjectLike(P),u.IsNumber(K.minProperties))yield`Object.getOwnPropertyNames(${P}).length >= ${K.minProperties}`;if(u.IsNumber(K.maxProperties))yield`Object.getOwnPropertyNames(${P}).length <= ${K.maxProperties}`;const p=Object.getOwnPropertyNames(K.properties);for(let f of p){const T=h$.Encode(P,f),$0=K.properties[f];if(K.required&&K.required.includes(f)){if(yield*y0($0,E,T),U0.ExtendsUndefined.Check($0)||W($0))yield`('${f}' in ${P})`}else{const D0=x($0,E,T);yield E1.IsExactOptionalProperty(P,f,D0)}}if(K.additionalProperties===!1)if(K.required&&K.required.length===p.length)yield`Object.getOwnPropertyNames(${P}).length === ${p.length}`;else{const f=`[${p.map((T)=>`'${T}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${P}).every(key => ${f}.includes(key))`}if(typeof K.additionalProperties==="object"){const f=x(K.additionalProperties,E,`${P}[key]`),T=`[${p.map(($0)=>`'${$0}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${P}).every(key => ${T}.includes(key) || ${f}))`}}function*I(K,E,P){yield`(typeof value === 'object' && typeof ${P}.then === 'function')`}function*k(K,E,P){if(yield E1.IsRecordLike(P),u.IsNumber(K.minProperties))yield`Object.getOwnPropertyNames(${P}).length >= ${K.minProperties}`;if(u.IsNumber(K.maxProperties))yield`Object.getOwnPropertyNames(${P}).length <= ${K.maxProperties}`;const[p,f]=Object.entries(K.patternProperties)[0],T=o(`${new RegExp(p)}`),$0=x(f,E,"value"),D0=U0.TypeGuard.TSchema(K.additionalProperties)?x(K.additionalProperties,E,P):K.additionalProperties===!1?"false":"true",W0=`(${T}.test(key) ? ${$0} : ${D0})`;yield`(Object.entries(${P}).every(([key, value]) => ${W0}))`}function*d(K,E,P){const p=Z9.Deref(K,E);if(G.functions.has(K.$ref))return yield`${i(K.$ref)}(${P})`;yield*y0(p,E,P)}function*R(K,E,P){if(yield`(typeof ${P} === 'string')`,u.IsNumber(K.maxLength))yield`${P}.length <= ${K.maxLength}`;if(u.IsNumber(K.minLength))yield`${P}.length >= ${K.minLength}`;if(K.pattern!==void 0)yield`${o(`${new RegExp(K.pattern)};`)}.test(${P})`;if(K.format!==void 0)yield`format('${K.format}', ${P})`}function*r(K,E,P){yield`(typeof ${P} === 'symbol')`}function*k0(K,E,P){yield`(typeof ${P} === 'string')`,yield`${o(`${new RegExp(K.pattern)};`)}.test(${P})`}function*m0(K,E,P){yield`${i(K.$ref)}(${P})`}function*g1(K,E,P){if(yield`Array.isArray(${P})`,K.items===void 0)return yield`${P}.length === 0`;yield`(${P}.length === ${K.maxItems})`;for(let p=0;p<K.items.length;p++)yield`${x(K.items[p],E,`${P}[${p}]`)}`}function*T0(K,E,P){yield`${P} === undefined`}function*n0(K,E,P){yield`(${K.anyOf.map((f)=>x(f,E,P)).join(" || ")})`}function*J0(K,E,P){if(yield`${P} instanceof Uint8Array`,u.IsNumber(K.maxByteLength))yield`(${P}.length <= ${K.maxByteLength})`;if(u.IsNumber(K.minByteLength))yield`(${P}.length >= ${K.minByteLength})`}function*Q0(K,E,P){yield"true"}function*h0(K,E,P){yield E1.IsVoidLike(P)}function*$1(K,E,P){const p=G.instances.size;G.instances.set(p,K),yield`kind('${K[U0.Kind]}', ${p}, ${P})`}function*y0(K,E,P,p=!0){const f=u.IsString(K.$id)?[...E,K]:E,T=K;if(p&&u.IsString(K.$id)){const $0=i(K.$id);if(G.functions.has($0))return yield`${$0}(${P})`;else{const D0=A0($0,K,E,"value",!1);return G.functions.set($0,D0),yield`${$0}(${P})`}}switch(T[U0.Kind]){case"Any":return yield*H(T,f,P);case"Array":return yield*Y(T,f,P);case"AsyncIterator":return yield*X(T,f,P);case"BigInt":return yield*z(T,f,P);case"Boolean":return yield*Z(T,f,P);case"Constructor":return yield*Q(T,f,P);case"Date":return yield*M(T,f,P);case"Function":return yield*B(T,f,P);case"Integer":return yield*j(T,f,P);case"Intersect":return yield*D(T,f,P);case"Iterator":return yield*C(T,f,P);case"Literal":return yield*w(T,f,P);case"Never":return yield*U(T,f,P);case"Not":return yield*A(T,f,P);case"Null":return yield*O(T,f,P);case"Number":return yield*N(T,f,P);case"Object":return yield*b(T,f,P);case"Promise":return yield*I(T,f,P);case"Record":return yield*k(T,f,P);case"Ref":return yield*d(T,f,P);case"String":return yield*R(T,f,P);case"Symbol":return yield*r(T,f,P);case"TemplateLiteral":return yield*k0(T,f,P);case"This":return yield*m0(T,f,P);case"Tuple":return yield*g1(T,f,P);case"Undefined":return yield*T0(T,f,P);case"Union":return yield*n0(T,f,P);case"Uint8Array":return yield*J0(T,f,P);case"Unknown":return yield*Q0(T,f,P);case"Void":return yield*h0(T,f,P);default:if(!U0.TypeRegistry.Has(T[U0.Kind]))throw new UW(K);return yield*$1(T,f,P)}}const G={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function x(K,E,P,p=!0){return`(${[...y0(K,E,P,p)].join(" && ")})`}function i(K){return`check_${MW.Encode(K)}`}function o(K){const E=`local_${G.variables.size}`;return G.variables.set(E,`const ${E} = ${K}`),E}function A0(K,E,P,p,f=!0){const[T,$0]=["\n",(l)=>"".padStart(l," ")],D0=q0("value","any"),W0=B0("boolean"),F=[...y0(E,P,p,f)].map((l)=>`${$0(4)}${l}`).join(` &&${T}`);return`function ${K}(${D0})${W0} {${T}${$0(2)}return (${T}${F}${T}${$0(2)})\n}`}function q0(K,E){const P=G.language==="typescript"?`: ${E}`:"";return`${K}${P}`}function B0(K){return G.language==="typescript"?`: ${K}`:""}function J1(K,E,P){const p=A0("check",K,E,"value"),f=q0("value","any"),T=B0("boolean"),$0=[...G.functions.values()],D0=[...G.variables.values()],W0=u.IsString(K.$id)?`return function check(${f})${T} {\n  return ${i(K.$id)}(value)\n}`:`return ${p}`;return[...D0,...$0,W0].join("\n")}function M0(...K){const E={language:"javascript"},[P,p,f]=K.length===2&&u.IsArray(K[1])?[K[0],K[1],E]:K.length===2&&!u.IsArray(K[1])?[K[0],[],K[1]]:K.length===3?[K[0],K[1],K[2]]:K.length===1?[K[0],[],E]:[null,[],E];if(G.language=f.language,G.variables.clear(),G.functions.clear(),G.instances.clear(),!U0.TypeGuard.TSchema(P))throw new u$(P);for(let T of p)if(!U0.TypeGuard.TSchema(T))throw new u$(T);return J1(P,p,f)}$.Code=M0;function u0(K,E=[]){const P=M0(K,E,{language:"javascript"}),p=globalThis.Function("kind","format","hash",P),f=new Map(G.instances);function T(F,l,K0){if(!U0.TypeRegistry.Has(F)||!f.has(l))return!1;const a$=U0.TypeRegistry.Get(F),e$=f.get(l);return a$(e$,K0)}function $0(F,l){if(!U0.FormatRegistry.Has(F))return!1;return U0.FormatRegistry.Get(F)(l)}function D0(F){return Q9.Hash(F)}const W0=p(T,$0,D0);return new wW(K,E,W0,P)}$.Compile=u0})(OH||(PH.TypeCompiler=OH={}))});var NW=Z0((s0)=>{var w9=s0&&s0.__createBinding||(Object.create?function($,W,H,Y){if(Y===void 0)Y=H;var X=Object.getOwnPropertyDescriptor(W,H);if(!X||("get"in X?!W.__esModule:X.writable||X.configurable))X={enumerable:!0,get:function(){return W[H]}};Object.defineProperty($,Y,X)}:function($,W,H,Y){if(Y===void 0)Y=H;$[Y]=W[H]}),U9=s0&&s0.__exportStar||function($,W){for(var H in $)if(H!=="default"&&!Object.prototype.hasOwnProperty.call(W,H))w9(W,$,H)};Object.defineProperty(s0,"__esModule",{value:!0});s0.ValueErrorIterator=s0.ValueErrorType=void 0;var CH=x$();Object.defineProperty(s0,"ValueErrorType",{enumerable:!0,get:function(){return CH.ValueErrorType}});Object.defineProperty(s0,"ValueErrorIterator",{enumerable:!0,get:function(){return CH.ValueErrorIterator}});U9(SH(),s0)});var fH=Z0((S7,gH)=>{var A9=function($){var W=$.indexOf("%");if(W===-1)return $;var H=$.length,Y="",X=0,z=0,Z=W,Q=kH;while(W>-1&&W<H){var M=xH($[W+1],4),B=xH($[W+2],0),j=M|B,D=bW[j];if(Q=bW[256+Q+D],z=z<<6|j&bW[364+D],Q===kH)Y+=$.slice(X,Z),Y+=z<=65535?String.fromCharCode(z):String.fromCharCode(55232+(z>>10),56320+(z&1023)),z=0,X=W+3,W=Z=$.indexOf("%",X);else if(Q===L9)return null;else{if(W+=3,W<H&&$.charCodeAt(W)===37)continue;return null}}return Y+$.slice(X)},xH=function($,W){var H=B9[$];return H===void 0?255:H<<W},kH=12,L9=0,bW=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7],B9={"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};gH.exports=A9});var pH=Z0((C7,vH)=>{var j9=function($){const W=new yH;if(typeof $!=="string")return W;let H=$.length,Y="",X="",z=-1,Z=-1,Q=!1,M=!1,B=!1,j=!1,D=!1,C=0;for(let w=0;w<H+1;w++)if(C=w!==H?$.charCodeAt(w):38,C===38){if(D=Z>z,!D)Z=w;if(Y=$.slice(z+1,Z),D||Y.length>0){if(B)Y=Y.replace(TH," ");if(Q)Y=dH(Y)||Y;if(D){if(X=$.slice(Z+1,w),j)X=X.replace(TH," ");if(M)X=dH(X)||X}const U=W[Y];if(U===void 0)W[Y]=X;else if(U.pop)U.push(X);else W[Y]=[U,X]}X="",z=w,Z=w,Q=!1,M=!1,B=!1,j=!1}else if(C===61)if(Z<=z)Z=w;else M=!0;else if(C===43)if(Z>z)j=!0;else B=!0;else if(C===37)if(Z>z)M=!0;else Q=!0;return W},dH=fH(),TH=/\+/g,yH=function(){};yH.prototype=Object.create(null);vH.exports=j9});var oH=Z0((R7,iH)=>{var K9=function($){const W=$.length;if(W===0)return"";let H="",Y=0,X=0;$:for(;X<W;X++){let z=$.charCodeAt(X);while(z<128){if(D9[z]!==1){if(Y<X)H+=$.slice(Y,X);Y=X+1,H+=Q1[z]}if(++X===W)break $;z=$.charCodeAt(X)}if(Y<X)H+=$.slice(Y,X);if(z<2048){Y=X+1,H+=Q1[192|z>>6]+Q1[128|z&63];continue}if(z<55296||z>=57344){Y=X+1,H+=Q1[224|z>>12]+Q1[128|z>>6&63]+Q1[128|z&63];continue}if(++X,X>=W)throw new Error("URI malformed");const Z=$.charCodeAt(X)&1023;Y=X+1,z=65536+((z&1023)<<10|Z),H+=Q1[240|z>>18]+Q1[128|z>>12&63]+Q1[128|z>>6&63]+Q1[128|z&63]}if(Y===0)return $;if(Y<W)return H+$.slice(Y);return H},Q1=Array.from({length:256},($,W)=>"%"+((W<16?"0":"")+W.toString(16)).toUpperCase()),D9=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0]);iH.exports={encodeString:K9}});var hH=Z0((I7,nH)=>{var mH=function($){const W=typeof $;if(W==="string")return SW($);else if(W==="bigint")return $.toString();else if(W==="boolean")return $?"true":"false";else if(W==="number"&&Number.isFinite($))return $<1000000000000000000000?""+$:SW(""+$);return""},O9=function($){let W="";if($===null||typeof $!=="object")return W;const H="&",Y=Object.keys($),X=Y.length;let z=0;for(let Z=0;Z<X;Z++){const Q=Y[Z],M=$[Q],B=SW(Q)+"=";if(Z)W+=H;if(Array.isArray(M)){z=M.length;for(let j=0;j<z;j++){if(j)W+=H;W+=B,W+=mH(M[j])}}else W+=B,W+=mH(M)}return W},{encodeString:SW}=oH();nH.exports=O9});var CW=Z0((G7,P$)=>{var uH=pH(),lH=hH(),cH={parse:uH,stringify:lH};P$.exports=cH;P$.exports.default=cH;P$.exports.parse=uH;P$.exports.stringify=lH});var f1=($,W)=>({part:$,store:null,inert:W!==void 0?new Map(W.map((H)=>[H.part.charCodeAt(0),H])):null,params:null,wildcardStore:null}),xW=($,W)=>({...$,part:W}),gW=($)=>({paramName:$,store:null,inert:null});class C1{root={};history=[];static regex={static:/:.+?(?=\/|$)/,params:/:.+?(?=\/|$)/g};add($,W,H){let Y;if(typeof W!="string")throw TypeError("Route path must be a string");W===""?W="/":W[0]!=="/"&&(W=`/${W}`),this.history.push([$,W,H]);let X=W[W.length-1]==="*";X&&(W=W.slice(0,-1));let z=W.split(C1.regex.static),Z=W.match(C1.regex.params)||[];z[z.length-1]===""&&z.pop(),Y=this.root[$]?this.root[$]:this.root[$]=f1("/");let Q=0;for(let M=0;M<z.length;++M){let B=z[M];if(M>0){let j=Z[Q++].slice(1);if(Y.params===null)Y.params=gW(j);else if(Y.params.paramName!==j)throw Error(`Cannot create route "${W}" with parameter "${j}" because a route already exists with a different parameter name ("${Y.params.paramName}") in the same location`);let D=Y.params;if(D.inert===null){Y=D.inert=f1(B);continue}Y=D.inert}for(let j=0;;){if(j===B.length){if(j<Y.part.length){let D=xW(Y,Y.part.slice(j));Object.assign(Y,f1(B,[D]))}break}if(j===Y.part.length){if(Y.inert===null)Y.inert=new Map;else if(Y.inert.has(B.charCodeAt(j))){Y=Y.inert.get(B.charCodeAt(j)),B=B.slice(j),j=0;continue}let D=f1(B.slice(j));Y.inert.set(B.charCodeAt(j),D),Y=D;break}if(B[j]!==Y.part[j]){let D=xW(Y,Y.part.slice(j)),C=f1(B.slice(j));Object.assign(Y,f1(Y.part.slice(0,j),[D,C])),Y=C;break}++j}}if(Q<Z.length){let M=Z[Q],B=M.slice(1);if(Y.params===null)Y.params=gW(B);else if(Y.params.paramName!==B)throw Error(`Cannot create route "${W}" with parameter "${B}" because a route already exists with a different parameter name ("${Y.params.paramName}") in the same location`);return Y.params.store===null&&(Y.params.store=H),Y.params.store}return X?(Y.wildcardStore===null&&(Y.wildcardStore=H),Y.wildcardStore):(Y.store===null&&(Y.store=H),Y.store)}find($,W){let H=this.root[$];return H?Y6(W,W.length,H,0):null}}var Y6=($,W,H,Y)=>{let X=H?.part,z=Y+X.length;if(X.length>1){if(z>W)return null;if(X.length<15){for(let Z=1,Q=Y+1;Z<X.length;++Z,++Q)if(X.charCodeAt(Z)!==$.charCodeAt(Q))return null}else if($.substring(Y,z)!==X)return null}if(z===W)return H.store!==null?{store:H.store,params:{}}:H.wildcardStore!==null?{store:H.wildcardStore,params:{"*":""}}:null;if(H.inert!==null){let Z=H.inert.get($.charCodeAt(z));if(Z!==void 0){let Q=Y6($,W,Z,z);if(Q!==null)return Q}}if(H.params!==null){let Z=H.params,Q=$.indexOf("/",z);if(Q!==z){if(Q===-1||Q>=W){if(Z.store!==null){let M={};return M[Z.paramName]=$.substring(z,W),{store:Z.store,params:M}}}else if(Z.inert!==null){let M=Y6($,W,Z.inert,Q);if(M!==null)return M.params[Z.paramName]=$.substring(z,Q),M}}}return H.wildcardStore!==null?{store:H.wildcardStore,params:{"*":$.substring(z,W)}}:null};var TW=v0(dW(),1);var yW=TW.default;var R$=()=>{let $;return[new Promise((H)=>{$=H}),$]},j1=()=>{let[$,W]=R$(),[H,Y]=R$(),X=[],z=[];return{signal:$,consume:(Z)=>{switch(Z.type){case"begin":if(Z.unit&&X.length===0)for(let Q=0;Q<Z.unit;Q++){let[M,B]=R$(),[j,D]=R$();X.push(M),z.push([(C)=>{B({children:[],end:j,name:C.name??"",skip:!1,time:C.time})},(C)=>{D(C)}])}W({children:X,end:H,name:Z.name??"",skip:!1,time:Z.time});break;case"end":Y(Z.time)}},consumeChild(Z){switch(Z.type){case"begin":if(!z[0])return;let[Q]=z[0];Q({children:[],end:H,name:Z.name??"",skip:!1,time:Z.time});break;case"end":let M=z.shift();if(!M)return;M[1](Z.time)}},resolve(){for(let[Z,Q]of(W({children:[],end:new Promise((M)=>M(0)),name:"",skip:!0,time:0}),z))Z({children:[],end:new Promise((M)=>M(0)),name:"",skip:!0,time:0}),Q(0);Y(0)}}},vW=($,W,H)=>async function(Y){if(Y.event!=="request"||Y.type!=="begin")return;let X=Y.id,z=$(),Z=j1(),Q=j1(),M=j1(),B=j1(),j=j1(),D=j1(),C=j1(),w=j1();Z.consume(Y);let U=(A)=>{if(A.id===X)switch(A.event){case"request":Z.consume(A);break;case"request.unit":Z.consumeChild(A);break;case"parse":Q.consume(A);break;case"parse.unit":Q.consumeChild(A);break;case"transform":M.consume(A);break;case"transform.unit":M.consumeChild(A);break;case"beforeHandle":B.consume(A);break;case"beforeHandle.unit":B.consumeChild(A);break;case"handle":j.consume(A);break;case"afterHandle":D.consume(A);break;case"afterHandle.unit":D.consumeChild(A);break;case"error":C.consume(A);break;case"error.unit":C.consumeChild(A);break;case"response":A.type==="begin"?(Z.resolve(),Q.resolve(),M.resolve(),B.resolve(),j.resolve(),D.resolve(),C.resolve()):z.off("event",U),w.consume(A);break;case"response.unit":w.consumeChild(A);break;case"exit":Z.resolve(),Q.resolve(),M.resolve(),B.resolve(),j.resolve(),D.resolve(),C.resolve()}};z.on("event",U),await H({id:X,context:Y.ctx,set:Y.ctx?.set,store:Y.ctx?.store,time:Y.time,request:Z.signal,parse:Q.signal,transform:M.signal,beforeHandle:B.signal,handle:j.signal,afterHandle:D.signal,error:C.signal,response:w.signal}),z.emit(`res${X}.${W}`,void 0)};var KH={};kW(KH,{isProduction:()=>{{return a1}},ValidationError:()=>{{return F0}},ParseError:()=>{{return JW}},NotFoundError:()=>{{return O1}},InvalidCookieSignature:()=>{{return e1}},InternalServerError:()=>{{return B$}},ERROR_CODE:()=>{{return _1}}});var QW=v0(i$(),1),DH=typeof Bun!="undefined"?Bun.env:typeof process!="undefined"?process?.env:void 0,_1=Symbol("ErrorCode"),a1=(DH?.NODE_ENV??DH?.ENV)==="production";class B$ extends Error{code="INTERNAL_SERVER_ERROR";status=500;constructor($){super($??"INTERNAL_SERVER_ERROR")}}class O1 extends Error{code="NOT_FOUND";status=404;constructor($){super($??"NOT_FOUND")}}class JW extends Error{code="PARSE";status=400;constructor($){super($??"PARSE")}}class e1 extends Error{key;code;status;constructor($,W){super(W??`"${$}" has invalid cookie signature`),this.key=$,this.code="INVALID_COOKIE_SIGNATURE",this.status=400}}class F0 extends Error{type;validator;value;code;status;constructor($,W,H){let Y=a1?void 0:("Errors"in W)?W.Errors(H).First():QW.Value.Errors(W,H).First(),X=Y?.schema.error?typeof Y.schema.error=="function"?Y.schema.error($,W,H):Y.schema.error:void 0,z=a1?X??`Invalid ${$??Y?.schema.error??Y?.message}`:X??`Invalid ${$}, '${Y?.path?.slice(1)||"type"}': ${Y?.message}

Expected: `+JSON.stringify(F0.simplifyModel(W),null,2)+"\n\nFound: "+JSON.stringify(H,null,2);super(z),this.type=$,this.validator=W,this.value=H,this.code="VALIDATION",this.status=400,Object.setPrototypeOf(this,F0.prototype)}get all(){return[...this.validator.Errors(this.value)]}static simplifyModel($){let W="schema"in $?$.schema:$;try{return QW.Value.Create(W)}catch{return W}}get model(){return F0.simplifyModel(this.validator)}toResponse($){return new Response(this.message,{status:400,headers:$})}}var qW={open($){$.data.open?.($)},message($,W){$.data.message?.($,W)},drain($){$.data.drain?.($)},close($,W,H){$.data.close?.($,W,H)}};class $${raw;data;id;validator;constructor($,W){this.raw=$,this.data=W,this.validator=$.data.validator,this.id=Date.now()}get publish(){return($,W,H)=>{if(this.validator?.Check(W)===!1)throw new F0("message",this.validator,W);return typeof W=="object"&&(W=JSON.stringify(W)),this.raw.publish($,W,H),this}}get send(){return($)=>{if(this.validator?.Check($)===!1)throw new F0("message",this.validator,$);return Buffer.isBuffer($)||typeof $=="object"&&($=JSON.stringify($)),this.raw.send($),this}}get subscribe(){return($)=>(this.raw.subscribe($),this)}get unsubscribe(){return($)=>(this.raw.unsubscribe($),this)}get cork(){return($)=>(this.raw.cork($),this)}get close(){return()=>(this.raw.close(),this)}get terminate(){return this.raw.terminate.bind(this.raw)}get isSubscribed(){return this.raw.isSubscribed.bind(this.raw)}get remoteAddress(){return this.raw.remoteAddress}}var eQ=function($,W){if(typeof $!=="string")throw new TypeError("argument str must be a string");var H={},Y=W||{},X=Y.decode||W9,z=0;while(z<$.length){var Z=$.indexOf("=",z);if(Z===-1)break;var Q=$.indexOf(";",z);if(Q===-1)Q=$.length;else if(Q<Z){z=$.lastIndexOf(";",Z-1)+1;continue}var M=$.slice(z,Z).trim();if(H[M]===void 0){var B=$.slice(Z+1,Q).trim();if(B.charCodeAt(0)===34)B=B.slice(1,-1);H[M]=X9(B,X)}z=Q+1}return H},$9=function($,W,H){var Y=H||{},X=Y.encode||H9;if(typeof X!=="function")throw new TypeError("option encode is invalid");if(!o$.test($))throw new TypeError("argument name is invalid");var z=X(W);if(z&&!o$.test(z))throw new TypeError("argument val is invalid");var Z=$+"="+z;if(Y.maxAge!=null){var Q=Y.maxAge-0;if(isNaN(Q)||!isFinite(Q))throw new TypeError("option maxAge is invalid");Z+="; Max-Age="+Math.floor(Q)}if(Y.domain){if(!o$.test(Y.domain))throw new TypeError("option domain is invalid");Z+="; Domain="+Y.domain}if(Y.path){if(!o$.test(Y.path))throw new TypeError("option path is invalid");Z+="; Path="+Y.path}if(Y.expires){var M=Y.expires;if(!Y9(M)||isNaN(M.valueOf()))throw new TypeError("option expires is invalid");Z+="; Expires="+M.toUTCString()}if(Y.httpOnly)Z+="; HttpOnly";if(Y.secure)Z+="; Secure";if(Y.partitioned)Z+="; Partitioned";if(Y.priority){var B=typeof Y.priority==="string"?Y.priority.toLowerCase():Y.priority;switch(B){case"low":Z+="; Priority=Low";break;case"medium":Z+="; Priority=Medium";break;case"high":Z+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(Y.sameSite){var j=typeof Y.sameSite==="string"?Y.sameSite.toLowerCase():Y.sameSite;switch(j){case!0:Z+="; SameSite=Strict";break;case"lax":Z+="; SameSite=Lax";break;case"strict":Z+="; SameSite=Strict";break;case"none":Z+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return Z},W9=function($){return $.indexOf("%")!==-1?decodeURIComponent($):$},H9=function($){return encodeURIComponent($)},Y9=function($){return aQ.call($)==="[object Date]"||$ instanceof Date},X9=function($,W){try{return W($)}catch(H){return $}};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var m$=eQ,n$=$9;var aQ=Object.prototype.toString,o$=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;var l$=v0(x0(),1),K$=v0(i$(),1),AW=v0(NW(),1);var LW=($)=>$&&typeof $=="object"&&!Array.isArray($),BW=($)=>$.slice(0,$.indexOf("/",11)),N9=($)=>typeof $=="function"&&/^\s*class\s+/.test($.toString())||$.toString().startsWith("[object ")||r0(Object.getPrototypeOf($)),A1=($,W,{skipKeys:H}={})=>{if(LW($)&&LW(W)){for(let[Y,X]of Object.entries(W))if(!H?.includes(Y)){if(!LW(X)||!(Y in $)||N9(X)){$[Y]=X;continue}$[Y]=A1($[Y],X)}}return $},RH=($,W)=>A1($,W,{skipKeys:["properties"]}),S0=($,W)=>{let H=[...Array.isArray($)?$:[$]],Y=[];for(let X of H)X.$elysiaChecksum&&Y.push(X.$elysiaChecksum);for(let X of Array.isArray(W)?W:[W])Y.includes(X?.$elysiaChecksum)||H.push(X);return H},P1=($,W)=>({body:W?.body??$?.body,headers:W?.headers??$?.headers,params:W?.params??$?.params,query:W?.query??$?.query,response:W?.response??$?.response,type:$?.type||W?.type,detail:A1(W?.detail??{},$?.detail??{}),parse:S0($?.parse??[],W?.parse??[]),transform:S0($?.transform??[],W?.transform??[]),beforeHandle:S0($?.beforeHandle??[],W?.beforeHandle??[]),afterHandle:S0($?.afterHandle??[],W?.afterHandle??[]),onResponse:S0($?.onResponse??[],W?.onResponse??[]),trace:S0($?.trace??[],W?.trace??[]),error:S0($?.error??[],W?.error??[])}),Z1=($,{models:W={},additionalProperties:H=!1,dynamic:Y=!1})=>{if(!$||typeof $=="string"&&!($ in W))return;let X=typeof $=="string"?W[$]:$;return(X.type==="object"&&("additionalProperties"in X)==!1&&(X.additionalProperties=H),Y)?{schema:X,references:"",checkFunc:()=>{},code:"",Check:(z)=>K$.Value.Check(X,z),Errors:(z)=>K$.Value.Errors(X,z),Code:()=>""}:AW.TypeCompiler.Compile(X,Object.values(W))},jW=($,{models:W={},additionalProperties:H=!1,dynamic:Y=!1})=>{if(!$||typeof $=="string"&&!($ in W))return;let X=typeof $=="string"?W[$]:$,z=(Q,M)=>Y?{schema:Q,references:"",checkFunc:()=>{},code:"",Check:(B)=>K$.Value.Check(Q,B),Errors:(B)=>K$.Value.Errors(Q,B),Code:()=>""}:AW.TypeCompiler.Compile(Q,M);if(l$.Kind in X)return"additionalProperties"in X==!1&&(X.additionalProperties=H),{200:z(X,Object.values(W))};let Z={};return Object.keys(X).forEach((Q)=>{let M=X[+Q];if(typeof M=="string"){if(M in W){let B=W[M];B.type,Z[+Q]=l$.Kind in B?z(B,Object.values(W)):B}return}M.type==="object"&&"additionalProperties"in M==!1&&(M.additionalProperties=H),Z[+Q]=l$.Kind in M?z(M,Object.values(W)):M}),Z},DW=($)=>{let W=9;for(let H=0;H<$.length;)W=Math.imul(W^$.charCodeAt(H++),387420489);return W^W>>>9},c$=($,W,H)=>{let Y=(X)=>(H&&!X.$elysiaChecksum&&(X.$elysiaChecksum=H),X);return{start:S0($.start,("start"in W?W.start??[]:[]).map(Y)),request:S0($.request,("request"in W?W.request??[]:[]).map(Y)),parse:S0($.parse,"parse"in W?W?.parse??[]:[]).map(Y),transform:S0($.transform,(W?.transform??[]).map(Y)),beforeHandle:S0($.beforeHandle,(W?.beforeHandle??[]).map(Y)),afterHandle:S0($.afterHandle,(W?.afterHandle??[]).map(Y)),onResponse:S0($.onResponse,(W?.onResponse??[]).map(Y)),trace:$.trace,error:S0($.error,(W?.error??[]).map(Y)),stop:S0($.stop,("stop"in W?W.stop??[]:[]).map(Y))}};var IH=($,W=!0)=>$?typeof $=="function"?(W?$.$elysiaHookType="global":$.$elysiaHookType=void 0,$):$.map((H)=>(W?H.$elysiaHookType="global":H.$elysiaHookType=void 0,H)):$,W$=($)=>$?typeof $=="function"?$.$elysiaHookType==="global"?$:void 0:$.filter((W)=>W.$elysiaHookType==="global"):$,KW=($)=>({...$,type:$?.type,detail:$?.detail,parse:W$($?.parse),transform:W$($?.transform),beforeHandle:W$($?.beforeHandle),afterHandle:W$($?.afterHandle),onResponse:W$($?.onResponse),error:W$($?.error)}),OW={Continue:100,"Switching Protocols":101,Processing:102,"Early Hints":103,OK:200,Created:201,Accepted:202,"Non-Authoritative Information":203,"No Content":204,"Reset Content":205,"Partial Content":206,"Multi-Status":207,"Already Reported":208,"Multiple Choices":300,"Moved Permanently":301,Found:302,"See Other":303,"Not Modified":304,"Temporary Redirect":307,"Permanent Redirect":308,"Bad Request":400,Unauthorized:401,"Payment Required":402,Forbidden:403,"Not Found":404,"Method Not Allowed":405,"Not Acceptable":406,"Proxy Authentication Required":407,"Request Timeout":408,Conflict:409,Gone:410,"Length Required":411,"Precondition Failed":412,"Payload Too Large":413,"URI Too Long":414,"Unsupported Media Type":415,"Range Not Satisfiable":416,"Expectation Failed":417,"I'm a teapot":418,"Misdirected Request":421,"Unprocessable Content":422,Locked:423,"Failed Dependency":424,"Too Early":425,"Upgrade Required":426,"Precondition Required":428,"Too Many Requests":429,"Request Header Fields Too Large":431,"Unavailable For Legal Reasons":451,"Internal Server Error":500,"Not Implemented":501,"Bad Gateway":502,"Service Unavailable":503,"Gateway Timeout":504,"HTTP Version Not Supported":505,"Variant Also Negotiates":506,"Insufficient Storage":507,"Loop Detected":508,"Not Extended":510,"Network Authentication Required":511},H$=async($,W)=>{if(typeof $!="string")throw TypeError("Cookie value must be provided as a string.");if(W===null)throw TypeError("Secret key must be provided.");let H=new TextEncoder,Y=await crypto.subtle.importKey("raw",H.encode(W),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),X=await crypto.subtle.sign("HMAC",Y,H.encode($)),z=Array.from(new Uint8Array(X)),Z=btoa(String.fromCharCode(...z));return`${$}.${Z.replace(/=+$/,"")}`},PW=async($,W)=>{if(typeof $!="string")throw TypeError("Signed cookie string must be provided.");if(W===null)throw TypeError("Secret key must be provided.");let H=$.slice(0,$.lastIndexOf("."));return await H$(H,W)===$&&H};class a0{_value;property;name;setter;constructor($,W={}){this._value=$,this.property=W}get(){return this._value}get value(){return this._value}set value($){if(typeof $=="object"){if(JSON.stringify(this.value)===JSON.stringify($))return}else if(this.value===$)return;this._value=$,this.sync()}add($){let W=Object.assign(this.property,typeof $=="function"?$(Object.assign(this.property,this.value)):$);return"value"in W&&(this._value=W.value,delete W.value),this.property=W,this.sync()}set($){let W=typeof $=="function"?$(Object.assign(this.property,this.value)):$;return"value"in W&&(this._value=W.value,delete W.value),this.property=W,this.sync()}remove($){this.value!==void 0&&this.set({domain:$?.domain,expires:new Date(0),maxAge:0,path:$?.path,sameSite:$?.sameSite,secure:$?.secure,value:""})}get domain(){return this.property.domain}set domain($){this.property.domain!==$&&(this.property.domain=$,this.sync())}get expires(){return this.property.expires}set expires($){this.property.expires?.getTime()!==$?.getTime()&&(this.property.expires=$,this.sync())}get httpOnly(){return this.property.httpOnly}set httpOnly($){this.property.domain!==$&&(this.property.httpOnly=$,this.sync())}get maxAge(){return this.property.maxAge}set maxAge($){this.property.maxAge!==$&&(this.property.maxAge=$,this.sync())}get path(){return this.property.path}set path($){this.property.path!==$&&(this.property.path=$,this.sync())}get priority(){return this.property.priority}set priority($){this.property.priority!==$&&(this.property.priority=$,this.sync())}get sameSite(){return this.property.sameSite}set sameSite($){this.property.sameSite!==$&&(this.property.sameSite=$,this.sync())}get secure(){return this.property.secure}set secure($){this.property.secure!==$&&(this.property.secure=$,this.sync())}toString(){return typeof this.value=="object"?JSON.stringify(this.value):this.value?.toString()??""}sync(){return this.name&&this.setter&&(this.setter.cookie?this.setter.cookie[this.name]=Object.assign(this.property,{value:this.toString()}):this.setter.cookie={[this.name]:Object.assign(this.property,{value:this.toString()})}),this}}var GH=($,W,H)=>new Proxy($,{get(Y,X){if(X in Y)return Y[X];let z=new a0(void 0,H?{...H}:void 0);return z.setter=W,z.name=X,z},set:(Y,X,z)=>z instanceof a0&&(W.cookie||(W.cookie={}),z.setter=W,z.name=X,z.sync(),Y[X]=z,!0)}),t$=async($,W,{secret:H,sign:Y,...X}={})=>{if(!W)return GH({},$,X);let z={},Z=typeof H=="string";Y&&Y!==!0&&!Array.isArray(Y)&&(Y=[Y]);let Q=Object.keys(m$(W));for(let M=0;M<Q.length;M++){let B=Q[M],j=m$(W)[B];if(Y===!0||Y?.includes(B)){if(!H)throw Error("No secret is provided to cookie plugin");if(Z){if((j=await PW(j,H))===!1)throw new e1(B)}else{let w=!0;for(let U=0;U<H.length;U++){let A=await PW(j,H[U]);if(A!==!1){j=A,w=!1;break}}if(w)throw new e1(B)}}if(j===void 0)continue;let D=j.charCodeAt(0);if(D===123||D===91)try{let w=new a0(JSON.parse(j));w.setter=$,w.name=B,z[B]=w;continue}catch{}Number.isNaN(+j)?j==="true"?j=!0:j==="false"&&(j=!1):j=+j;let C=new a0(j,X);C.setter=$,C.name=B,z[B]=C}return GH(z,$)};var _H="toJSON"in new Headers,r0=($)=>{for(let W in $)return!0;return!1},EH=($,W)=>{if(!$||!Array.isArray(W))return $;$.delete("Set-Cookie");for(let H=0;H<W.length;H++){let Y=W[H].indexOf("=");$.append("Set-Cookie",`${W[H].slice(0,Y)}=${W[H].slice(Y+1)}`)}return $},VH=($)=>{if(!$||typeof $!="object"||!r0($))return;let W=[];for(let[H,Y]of Object.entries($))if(H&&Y)if(Array.isArray(Y.value))for(let X=0;X<Y.value.length;X++){let z=Y.value[X];z!=null&&(typeof z=="object"&&(z=JSON.stringify(z)),W.push(n$(H,z,Y)))}else{let X=Y.value;if(X==null)continue;typeof X=="object"&&(X=JSON.stringify(X)),W.push(n$(H,Y.value,Y))}if(W.length!==0)return W.length===1?W[0]:W},B1=($,W)=>{if($?.$passthrough&&($=$[$.$passthrough]),r0(W.headers)||W.status!==200||W.redirect||W.cookie)switch(typeof W.status=="string"&&(W.status=OW[W.status]),W.redirect&&(W.headers.Location=W.redirect,(!W.status||W.status<300||W.status>=400)&&(W.status=302)),W.cookie&&r0(W.cookie)&&(W.headers["Set-Cookie"]=VH(W.cookie)),W.headers["Set-Cookie"]&&Array.isArray(W.headers["Set-Cookie"])&&(W.headers=EH(new Headers(W.headers),W.headers["Set-Cookie"])),$?.constructor?.name){case"String":case"Blob":return new Response($,{status:W.status,headers:W.headers});case"Object":case"Array":return Response.json($,W);case"ReadableStream":return W.headers["content-type"]?.startsWith("text/event-stream")||(W.headers["content-type"]="text/event-stream; charset=utf-8"),new Response($,W);case void 0:if(!$)return new Response("",W);return Response.json($,W);case"Response":let H={...W.headers};if(_H)W.headers=$.headers.toJSON();else for(let[X,z]of $.headers.entries())X in W.headers&&(W.headers[X]=z);for(let X in H)$.headers.append(X,H[X]);return $;case"Error":return O$($,W);case"Promise":return $.then((X)=>B1(X,W));case"Function":return B1($(),W);case"Number":case"Boolean":return new Response($.toString(),W);case"Cookie":if($ instanceof a0)return new Response($.value,W);return new Response($?.toString(),W);default:let Y=JSON.stringify($);if(Y.charCodeAt(0)===123)return W.headers["Content-Type"]||(W.headers["Content-Type"]="application/json"),new Response(JSON.stringify($),W);return new Response(Y,W)}else switch($?.constructor?.name){case"String":case"Blob":return new Response($);case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"ReadableStream":return new Response($,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":return $;case"Error":return O$($,W);case"Promise":return $.then((Y)=>{let X=b1(Y);return X!==void 0?X:new Response("")});case"Function":return b1($());case"Number":case"Boolean":return new Response($.toString());case"Cookie":if($ instanceof a0)return new Response($.value,W);return new Response($?.toString(),W);default:let H=JSON.stringify($);if(H.charCodeAt(0)===123)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});return new Response(H)}},e0=($,W)=>{if($!=null)if($?.$passthrough&&($=$[$.$passthrough]),r0(W.headers)||W.status!==200||W.redirect||W.cookie)switch(typeof W.status=="string"&&(W.status=OW[W.status]),W.redirect&&(W.headers.Location=W.redirect,(!W.status||W.status<300||W.status>=400)&&(W.status=302)),W.cookie&&r0(W.cookie)&&(W.headers["Set-Cookie"]=VH(W.cookie)),W.headers["Set-Cookie"]&&Array.isArray(W.headers["Set-Cookie"])&&(W.headers=EH(new Headers(W.headers),W.headers["Set-Cookie"])),$?.constructor?.name){case"String":case"Blob":return new Response($,W);case"Object":case"Array":return Response.json($,W);case"ReadableStream":return W.headers["content-type"]?.startsWith("text/event-stream")||(W.headers["content-type"]="text/event-stream; charset=utf-8"),new Response($,W);case void 0:if(!$)return;return Response.json($,W);case"Response":let H=Object.assign({},W.headers);if(_H)W.headers=$.headers.toJSON();else for(let[X,z]of $.headers.entries())X in W.headers||(W.headers[X]=z);for(let X in H)$.headers.append(X,H[X]);return $.status!==W.status&&(W.status=$.status),$;case"Promise":return $.then((X)=>{let z=e0(X,W);if(z!==void 0)return z});case"Error":return O$($,W);case"Function":return e0($(),W);case"Number":case"Boolean":return new Response($.toString(),W);case"Cookie":if($ instanceof a0)return new Response($.value,W);return new Response($?.toString(),W);default:let Y=JSON.stringify($);if(Y.charCodeAt(0)===123)return W.headers["Content-Type"]||(W.headers["Content-Type"]="application/json"),new Response(JSON.stringify($),W);return new Response(Y,W)}else switch($?.constructor?.name){case"String":case"Blob":return new Response($);case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"ReadableStream":return new Response($,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":return $;case"Promise":return $.then((Y)=>{let X=e0(Y,W);if(X!==void 0)return X});case"Error":return O$($,W);case"Function":return b1($());case"Number":case"Boolean":return new Response($.toString());case"Cookie":if($ instanceof a0)return new Response($.value,W);return new Response($?.toString(),W);default:let H=JSON.stringify($);if(H.charCodeAt(0)===123)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});return new Response(H)}},b1=($)=>{switch($?.$passthrough&&($=$[$.$passthrough]),$?.constructor?.name){case"String":case"Blob":return new Response($);case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"ReadableStream":return new Response($,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":return $;case"Error":return O$($);case"Promise":return $.then((H)=>{let Y=b1(H);return Y!==void 0?Y:new Response("")});case"Function":return b1($());case"Number":case"Boolean":return new Response($.toString());default:let W=JSON.stringify($);if(W.charCodeAt(0)===123)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});return new Response(W)}},O$=($,W)=>new Response(JSON.stringify({name:$?.name,message:$?.message,cause:$?.cause}),{status:W?.status!==200?W?.status??500:500,headers:W?.headers});var tH=v0(CW(),1);var P9=(new Headers()).toJSON,sH=RegExp(" (\\w+) = context","g"),rH={value:0},aH=({hasTrace:$,hasTraceSet:W=!1,addFn:H,condition:Y={}})=>(H(`
const reporter = getReporter()
`),$)?(X,{name:z,attribute:Z="",unit:Q=0}={})=>{let M=X.indexOf("."),B=M===-1;if(X!=="request"&&X!=="response"&&!Y[B?X:X.slice(0,M)])return()=>{W&&X==="afterHandle"&&(H("reporter.emit('event',{id,event:'exit',type:'begin',time:0})"),H(`
await traceDone
`))};B?z||=X:z||="anonymous",H("\n"+`reporter.emit('event', { 
					id,
					event: '${X}',
					type: 'begin',
					name: '${z}',
					time: performance.now(),
					${B?`unit: ${Q},`:""}
					${Z}
				})`.replace(/(\t| |\n)/g,"")+"\n");let j=!1;return()=>{!j&&(j=!0,H("\n"+`reporter.emit('event', {
							id,
							event: '${X}',
							type: 'end',
							time: performance.now()
						})`.replace(/(\t| |\n)/g,"")+"\n"),W&&X==="afterHandle"&&(H(`
reporter.emit('event',{id,event:'exit',type:'begin',time:0})
`),H("\nawait traceDone\n")))}}:()=>()=>{},b$=($)=>{let W=$.indexOf(")");return $.charCodeAt(W+2)===61&&$.charCodeAt(W+5)!==123||$.includes("return")},b9=($,{injectResponse:W=""}={})=>({composeValidation:(H,Y=`c.${H}`)=>$?`c.set.status = 400; throw new ValidationError(
'${H}',
${H},
${Y}
)`:`c.set.status = 400; return new ValidationError(
	'${H}',
	${H},
	${Y}
).toResponse(c.set.headers)`,composeResponseValidation:(H="r")=>{let Y=$?`throw new ValidationError(
'response',
response[c.set.status],
${H}
)`:`return new ValidationError(
'response',
response[c.set.status],
${H}
).toResponse(c.set.headers)`;return`
${W}
		if(response[c.set.status]?.Check(${H}) === false) { 
	if(!(response instanceof Error))
		${Y}
}
`}}),j0=($,W)=>{W=(W=W.trimStart()).replaceAll(/^async /g,""),/^(\w+)\(/g.test(W)&&(W=W.slice(W.indexOf("(")));let H=W.charCodeAt(0)===40||W.startsWith("function")?W.slice(W.indexOf("(")+1,W.indexOf(")")):W.slice(0,W.indexOf("=")-1);if(H==="")return!1;let Y=H.charCodeAt(0)===123?H.indexOf("..."):-1;if(H.charCodeAt(0)===123){if(H.includes($))return!0;if(Y===-1)return!1}if(W.match(RegExp(`${H}(.${$}|\\["${$}"\\])`)))return!0;let X=Y!==-1?H.slice(Y+3,H.indexOf(" ",Y+3)):void 0;if(W.match(RegExp(`${X}(.${$}|\\["${$}"\\])`)))return!0;let z=[H];for(let Q of(X&&z.push(X),W.matchAll(sH)))z.push(Q[1]);let Z=RegExp(`{.*?} = (${z.join("|")})`,"g");for(let[Q]of W.matchAll(Z))if(Q.includes(`{ ${$}`)||Q.includes(`, ${$}`))return!0;return!1},S$=($)=>{$=($=$.trimStart()).replaceAll(/^async /g,""),/^(\w+)\(/g.test($)&&($=$.slice($.indexOf("(")));let W=$.charCodeAt(0)===40||$.startsWith("function")?$.slice($.indexOf("(")+1,$.indexOf(")")):$.slice(0,$.indexOf("=")-1);if(W==="")return!1;let H=W.charCodeAt(0)===123?W.indexOf("..."):-1,Y=H!==-1?W.slice(H+3,W.indexOf(" ",H+3)):void 0,X=[W];for(let Z of(Y&&X.push(Y),$.matchAll(sH)))X.push(Z[1]);for(let Z of X)if(RegExp(`\\b\\w+\\([^)]*\\b${Z}\\b[^)]*\\)`).test($))return!0;let z=RegExp(`{.*?} = (${X.join("|")})`,"g");for(let[Z]of $.matchAll(z))if(RegExp(`\\b\\w+\\([^)]*\\b${Z}\\b[^)]*\\)`).test($))return!0;return!1},Y$=Symbol.for("TypeBox.Kind"),s$=($,W)=>{if(W){if(Y$ in W&&W[Y$]===$)return!0;if(W.type==="object"){let H=W.properties;for(let Y of Object.keys(H)){let X=H[Y];if(X.type==="object"){if(s$($,X))return!0}else if(X.anyOf){for(let z=0;z<X.anyOf.length;z++)if(s$($,X.anyOf[z]))return!0}if(Y$ in X&&X[Y$]===$)return!0}return!1}return W.properties&&Y$ in W.properties&&W.properties[Y$]===$}},RW=Symbol.for("TypeBox.Transform"),V1=($)=>{if($){if($.type==="object"&&$.properties){let W=$.properties;for(let H of Object.keys(W)){let Y=W[H];if(Y.type==="object"){if(V1(Y))return!0}else if(Y.anyOf){for(let z=0;z<Y.anyOf.length;z++)if(V1(Y.anyOf[z]))return!0}if(RW in Y)return!0}return!1}return RW in $||$.properties&&RW in $.properties}},S9=($)=>{if(!$)return;let W=$?.schema;if(W&&"anyOf"in W){let H=!1,Y=W.anyOf[0].type;for(let X of W.anyOf)if(X.type!==Y){H=!0;break}if(!H)return Y}return $.schema?.type},C9=/(?:return|=>) \S*\(/g,w0=($)=>$.constructor.name==="AsyncFunction"||$.toString().match(C9),eH=({path:$,method:W,hooks:H,validator:Y,handler:X,handleError:z,definitions:Z,schema:Q,onRequest:M,config:B,getReporter:j})=>{let D=B.forceErrorEncapsulation||H.error.length>0||typeof Bun=="undefined"||H.onResponse.length>0||!!H.trace.length,C=H.onResponse.length?`
;(async () => {${H.onResponse.map((G,x)=>`await res${x}(c)`).join(";")}})();
`:"",w=H.trace.map((G)=>G.toString()),U=!1;if(S$(X.toString())&&(U=!0),!U){for(let[G,x]of Object.entries(H))if(Array.isArray(x)&&x.length&&["parse","transform","beforeHandle","afterHandle","onResponse"].includes(G)){for(let i of x)if(typeof i=="function"&&S$(i.toString())){U=!0;break}if(U)break}}let A={parse:w.some((G)=>j0("parse",G)),transform:w.some((G)=>j0("transform",G)),handle:w.some((G)=>j0("handle",G)),beforeHandle:w.some((G)=>j0("beforeHandle",G)),afterHandle:w.some((G)=>j0("afterHandle",G)),error:D||w.some((G)=>j0("error",G))},O=H.trace.length>0,N="",b=Y||W!=="GET"&&W!=="HEAD"?[X,...H.transform,...H.beforeHandle,...H.afterHandle].map((G)=>G.toString()):[],I=W!=="GET"&&W!=="HEAD"&&(U||H.type!=="none"&&(!!Y.body||!!H.type||b.some((G)=>j0("body",G)))),k=U||Y.headers||b.some((G)=>j0("headers",G)),d=U||Y.cookie||b.some((G)=>j0("cookie",G)),R=Y?.cookie?.schema,r="";if(R?.sign){if(!R.secrets)throw Error(`t.Cookie required secret which is not set in (${W}) ${$}.`);let G=R.secrets?typeof R.secrets=="string"?R.secrets:R.secrets[0]:void 0;if(r+=`const _setCookie = c.set.cookie
		if(_setCookie) {`,R.sign===!0)r+=`for(const [key, cookie] of Object.entries(_setCookie)) {
				c.set.cookie[key].value = await signCookie(cookie.value, '${G}')
			}`;else for(let x of R.sign)r+=`if(_setCookie['${x}']?.value) { c.set.cookie['${x}'].value = await signCookie(_setCookie['${x}'].value, '${G}') }
`;r+="}\n"}let{composeValidation:k0,composeResponseValidation:m0}=b9(D);if(k&&(N+=P9?`c.headers = c.request.headers.toJSON()
`:`c.headers = {}
                for (const [key, value] of c.request.headers.entries())
					c.headers[key] = value
				`),d){let G=(i,o)=>{let A0=R?.[i]??o;return A0?typeof A0=="string"?`${i}: '${A0}',`:A0 instanceof Date?`${i}: new Date(${A0.getTime()}),`:`${i}: ${A0},`:typeof o=="string"?`${i}: "${o}",`:`${i}: ${o},`},x=R?`{
			secret: ${R.secrets!==void 0?typeof R.secrets=="string"?`'${R.secrets}'`:"["+R.secrets.reduce((i,o)=>i+`'${o}',`,"")+"]":"undefined"},
			sign: ${R.sign===!0||(R.sign!==void 0?"["+R.sign.reduce((i,o)=>i+`'${o}',`,"")+"]":"undefined")},
			${G("domain")}
			${G("expires")}
			${G("httpOnly")}
			${G("maxAge")}
			${G("path","/")}
			${G("priority")}
			${G("sameSite")}
			${G("secure")}
		}`:"undefined";k?N+=`
c.cookie = await parseCookie(c.set, c.headers.cookie, ${x})
`:N+=`
c.cookie = await parseCookie(c.set, c.request.headers.get('cookie'), ${x})
`}(U||Y.query||b.some((G)=>j0("query",G)))&&(N+=`const url = c.request.url

		if(c.qi !== -1) {
			c.query ??= parseQuery(url.substring(c.qi + 1))
		} else {
			c.query ??= {}
		}
		`);let T0=H.trace.map((G)=>G.toString()),n0=T0.some((G)=>j0("set",G)||S$(G));U||H.trace.some((G)=>j0("set",G.toString()));let J0=n0||d||b.some((G)=>j0("set",G))||M.some((G)=>j0("set",G.toString()));O&&(N+="\nconst id = c.$$requestId\n");let Q0=aH({hasTrace:O,hasTraceSet:n0,condition:A,addFn:(G)=>{N+=G}});if(N+=D?"try {\n":"",O){N+=`
const traceDone = Promise.all([`;for(let G=0;G<H.trace.length;G++)N+=`new Promise(r => { reporter.once(\`res\${id}.${G}\`, r) }),`;N+=`])
`}let h0=d||I||n0||w0(X)||H.parse.length>0||H.afterHandle.some(w0)||H.beforeHandle.some(w0)||H.transform.some(w0),$1=Q0("parse",{unit:H.parse.length});if(I){let G=S9(Y?.body);if(H.type&&!Array.isArray(H.type)){if(H.type)switch(H.type){case"json":case"application/json":N+=`c.body = await c.request.json()
`;break;case"text":case"text/plain":N+=`c.body = await c.request.text()
`;break;case"urlencoded":case"application/x-www-form-urlencoded":N+=`c.body = parseQuery(await c.request.text())
`;break;case"arrayBuffer":case"application/octet-stream":N+=`c.body = await c.request.arrayBuffer()
`;break;case"formdata":case"multipart/form-data":N+=`c.body = {}

						const form = await c.request.formData()
						for (const key of form.keys()) {
							if (c.body[key])
								continue

							const value = form.getAll(key)
							if (value.length === 1)
								c.body[key] = value[0]
							else c.body[key] = value
						}
`}H.parse.length&&(N+="}}")}else{let x=(()=>{if(H.parse.length&&G&&!Array.isArray(H.type)){let i=Y?.body?.schema;if(G==="object"&&(s$("File",i)||s$("Files",i)))return`c.body = {}
		
								const form = await c.request.formData()
								for (const key of form.keys()) {
									if (c.body[key])
										continue
			
									const value = form.getAll(key)
									if (value.length === 1)
										c.body[key] = value[0]
									else c.body[key] = value
								}`}})();if(x)N+=x;else{if(N+="\n"+(k?"let contentType = c.headers['content-type']":"let contentType = c.request.headers.get('content-type')")+`
				if (contentType) {
					const index = contentType.indexOf(';')
					if (index !== -1) contentType = contentType.substring(0, index)
`,H.parse.length){N+=`let used = false
`;let i=Q0("parse",{unit:H.parse.length});for(let o=0;o<H.parse.length;o++){let A0=Q0("parse.unit",{name:H.parse[o].name}),q0=`bo${o}`;o!==0&&(N+=`if(!used) {
`),N+=`let ${q0} = parse[${o}](c, contentType)
if(${q0} instanceof Promise) ${q0} = await ${q0}
if(${q0} !== undefined) { c.body = ${q0}; used = true }
`,A0(),o!==0&&(N+="}")}i()}H.parse.length&&(N+="if (!used)"),N+=`
				switch (contentType) {
					case 'application/json':
						c.body = await c.request.json()
						break
				
					case 'text/plain':
						c.body = await c.request.text()
						break
				
					case 'application/x-www-form-urlencoded':
						c.body = parseQuery(await c.request.text())
						break
				
					case 'application/octet-stream':
						c.body = await c.request.arrayBuffer();
						break
				
					case 'multipart/form-data':
						c.body = {}
				
						const form = await c.request.formData()
						for (const key of form.keys()) {
							if (c.body[key])
								continue
				
							const value = form.getAll(key)
							if (value.length === 1)
								c.body[key] = value[0]
							else c.body[key] = value
						}
				
						break
					}
}
`}}N+="\n"}if($1(),H?.transform){let G=Q0("transform",{unit:H.transform.length});for(let x=0;x<H.transform.length;x++){let i=H.transform[x],o=Q0("transform.unit",{name:i.name});i.$elysia==="derive"?N+=w0(H.transform[x])?`Object.assign(c, await transform[${x}](c));`:`Object.assign(c, transform[${x}](c));`:N+=w0(H.transform[x])?`await transform[${x}](c);`:`transform[${x}](c);`,o()}G()}if(Y&&(N+="\n",Y.headers&&(N+=`if(headers.Check(c.headers) === false) {
				${k0("headers")}
			}`,V1(Y.headers.schema)&&(N+=`
c.headers = headers.Decode(c.headers)
`)),Y.params&&(N+=`if(params.Check(c.params) === false) {
				${k0("params")}
			}`,V1(Y.params.schema)&&(N+=`
c.params = params.Decode(c.params)
`)),Y.query&&(N+=`if(query.Check(c.query) === false) {
				${k0("query")} 
			}`,V1(Y.query.schema)&&(N+=`
c.query = query.Decode(Object.assign({}, c.query))
`)),Y.body&&(N+=`if(body.Check(c.body) === false) { 
				${k0("body")}
			}`,V1(Y.body.schema)&&(N+=`
c.body = body.Decode(c.body)
`)),r0(Y.cookie?.schema.properties??{})&&(N+=`const cookieValue = {}
			for(const [key, value] of Object.entries(c.cookie))
				cookieValue[key] = value.value

			if(cookie.Check(cookieValue) === false) {
				${k0("cookie","cookieValue")}
			}`,V1(Y.cookie.schema)&&(N+=`
c.cookie = params.Decode(c.cookie)
`))),H?.beforeHandle){let G=Q0("beforeHandle",{unit:H.beforeHandle.length});for(let x=0;x<H.beforeHandle.length;x++){let i=Q0("beforeHandle.unit",{name:H.beforeHandle[x].name}),o=`be${x}`;if(b$(H.beforeHandle[x].toString())){N+=w0(H.beforeHandle[x])?`let ${o} = await beforeHandle[${x}](c);
`:`let ${o} = beforeHandle[${x}](c);
`,i(),N+=`if(${o} !== undefined) {
`;let q0=Q0("afterHandle",{unit:H.transform.length});if(H.afterHandle)for(let B0=0;B0<H.afterHandle.length;B0++){let J1=b$(H.afterHandle[B0].toString()),M0=Q0("afterHandle.unit",{name:H.afterHandle[B0].name});if(N+=`c.response = ${o}
`,J1){let u0=`af${B0}`;N+=(w0(H.afterHandle[B0])?`const ${u0} = await afterHandle[${B0}](c);
`:`const ${u0} = afterHandle[${B0}](c);
`)+`if(${u0} !== undefined) { c.response = ${o} = ${u0} }
`}else N+=w0(H.afterHandle[B0])?`await afterHandle[${B0}](c, ${o});
`:`afterHandle[${B0}](c, ${o});
`;M0()}q0(),Y.response&&(N+=m0(o)),N+=r+`return mapEarlyResponse(${o}, c.set)}
`}else N+=w0(H.beforeHandle[x])?`await beforeHandle[${x}](c);
`:`beforeHandle[${x}](c);
`,i()}G()}if(H?.afterHandle.length){let G=Q0("handle",{name:X.name});H.afterHandle.length?N+=w0(X)?`let r = c.response = await handler(c);
`:`let r = c.response = handler(c);
`:N+=w0(X)?`let r = await handler(c);
`:`let r = handler(c);
`,G();let x=Q0("afterHandle",{unit:H.afterHandle.length});for(let i=0;i<H.afterHandle.length;i++){let o=`af${i}`,A0=b$(H.afterHandle[i].toString()),q0=Q0("afterHandle.unit",{name:H.afterHandle[i].name});A0?(Y.response?N+=w0(H.afterHandle[i])?`let ${o} = await afterHandle[${i}](c)
`:`let ${o} = afterHandle[${i}](c)
`:N+=w0(H.afterHandle[i])?`let ${o} = mapEarlyResponse(await afterHandle[${i}](c), c.set)
`:`let ${o} = mapEarlyResponse(afterHandle[${i}](c), c.set)
`,q0(),Y.response?(N+=`if(${o} !== undefined) {`+m0(o)+`${o} = mapEarlyResponse(${o}, c.set)
`+`if(${o}) {`,x(),n0&&(N+=`${o} = mapEarlyResponse(${o}, c.set)
`),N+=`return ${o} } }`):(N+=`if(${o}) {`,x(),N+=`return ${o}}
`)):(N+=w0(H.afterHandle[i])?`await afterHandle[${i}](c)
`:`afterHandle[${i}](c)
`,q0())}x(),N+=`r = c.response
`,Y.response&&(N+=m0()),N+=r,J0?N+=`return mapResponse(r, c.set)
`:N+=`return mapCompactResponse(r)
`}else{let G=Q0("handle",{name:X.name});if(Y.response)N+=w0(X)?`const r = await handler(c);
`:`const r = handler(c);
`,G(),N+=m0(),Q0("afterHandle")(),N+=r,J0?N+=`return mapResponse(r, c.set)
`:N+=`return mapCompactResponse(r)
`;else if(A.handle||d)N+=w0(X)?`let r = await handler(c);
`:`let r = handler(c);
`,G(),Q0("afterHandle")(),N+=r,J0?N+=`return mapResponse(r, c.set)
`:N+=`return mapCompactResponse(r)
`;else{G();let x=w0(X)?"await handler(c) ":"handler(c)";Q0("afterHandle")(),J0?N+=`return mapResponse(${x}, c.set)
`:N+=`return mapCompactResponse(${x})
`}}if(D||C){N+=`
} catch(error) {`,h0||(N+="return (async () => {"),N+=`const set = c.set

		if (!set.status || set.status < 300) set.status = error?.status || 500
	`;let G=Q0("error",{unit:H.error.length});if(H.error.length){N+=`
				c.error = error
				c.code = error.code ?? error[ERROR_CODE] ?? "UNKNOWN"
			`;for(let x=0;x<H.error.length;x++){let i=`er${x}`,o=Q0("error.unit",{name:H.error[x].name});N+=`
let ${i} = handleErrors[${x}](c)
`,w0(H.error[x])&&(N+=`if (${i} instanceof Promise) ${i} = await ${i}
`),o(),N+=`${i} = mapEarlyResponse(${i}, set)
if (${i}) {return ${i} }
`}}if(G(),N+=`return handleError(c, error)

`,h0||(N+="})()"),N+="}",C||O){N+=" finally { ";let x=Q0("response",{unit:H.onResponse.length});N+=C,x(),N+="}"}}return N=`const { 
		handler,
		handleError,
		hooks: {
			transform,
			beforeHandle,
			afterHandle,
			parse,
			error: handleErrors,
			onResponse
		},
		validator: {
			body,
			headers,
			params,
			query,
			response,
			cookie
		},
		utils: {
			mapResponse,
			mapCompactResponse,
			mapEarlyResponse,
			parseQuery
		},
		error: {
			NotFoundError,
			ValidationError,
			InternalServerError
		},
		schema,
		definitions,
		ERROR_CODE,
		getReporter,
		requestId,
		parseCookie,
		signCookie
	} = hooks

	${H.onResponse.length?`const ${H.onResponse.map((G,x)=>`res${x} = onResponse[${x}]`).join(",")}`:""}

	return ${h0?"async":""} function(c) {
		${Q&&Z?"c.schema = schema; c.defs = definitions;":""}
		${N}
	}`,Function("hooks",N)({handler:X,hooks:H,validator:Y,handleError:z,utils:{mapResponse:B1,mapCompactResponse:b1,mapEarlyResponse:e0,parseQuery:tH.parse},error:{NotFoundError:O1,ValidationError:F0,InternalServerError:B$},schema:Q,definitions:Z,ERROR_CODE:_1,getReporter:j,requestId:rH,parseCookie:t$,signCookie:H$})},IW=($)=>{let W="",H="";for(let w of Object.keys($.decorators))W+=`,${w}: app.decorators.${w}`;let{router:Y,staticRouter:X}=$,z=$.event.trace.length>0,Z=`
	const route = find(request.method, path) ${Y.root.ALL?'?? find("ALL", path)':""}
	if (route === null)
		return ${$.event.error.length?"app.handleError(ctx, notFound)":`new Response(error404, {
					status: ctx.set.status === 200 ? 404 : ctx.set.status,
					headers: ctx.set.headers
				})`}

	ctx.params = route.params

	return route.store(ctx)`,Q="";for(let[w,{code:U,all:A}]of Object.entries(X.map))Q+=`case '${w}':
switch(request.method) {
${U}
${A??"default: break map"}}

`;let M=$.event.request.some(w0);H+=`const {
		app,
		app: { store, router, staticRouter, wsRouter },
		mapEarlyResponse,
		NotFoundError,
		requestId,
		getReporter
	} = data

	const notFound = new NotFoundError()

	${$.event.request.length?"const onRequest = app.event.request":""}

	${X.variables}

	const find = router.find.bind(router)
	const findWs = wsRouter.find.bind(wsRouter)
	const handleError = app.handleError.bind(this)

	${$.event.error.length?"":"const error404 = notFound.message.toString()"}

	return ${M?"async":""} function map(request) {
	`;let B=$.event.trace.map((w)=>w.toString()),j=aH({hasTrace:z,hasTraceSet:$.event.trace.some((w)=>{let U=w.toString();return j0("set",U)||S$(U)}),condition:{request:B.some((w)=>j0("request",w)||S$(w))},addFn:(w)=>{H+=w}});if($.event.request.length){H+=`
			${z?"const id = +requestId.value++":""}

			const ctx = {
				request,
				store,
				set: {
					cookie: {},
					headers: {},
					status: 200
				}
				${z?",$$requestId: +id":""}
				${W}
			}
		`;let w=j("request",{attribute:"ctx",unit:$.event.request.length});H+=`try {
`;for(let U=0;U<$.event.request.length;U++){let A=$.event.request[U],O=b$(A.toString()),N=w0(A),b=j("request.unit",{name:$.event.request[U].name}),I=`re${U}`;O?(H+=`const ${I} = mapEarlyResponse(
					${N?"await":""} onRequest[${U}](ctx),
					ctx.set
				)
`,b(),H+=`if(${I}) return ${I}
`):(H+=`${N?"await":""} onRequest[${U}](ctx)
`,b())}H+=`} catch (error) {
			return app.handleError(ctx, error)
		}`,w(),H+=`
		const url = request.url,
		s = url.indexOf('/', 11),
		i = ctx.qi = url.indexOf('?', s + 1),
		path = ctx.path = i === -1 ? url.substring(s) : url.substring(s, i);`}else H+=`
		const url = request.url,
			s = url.indexOf('/', 11),
			qi = url.indexOf('?', s + 1),
			path = qi === -1
				? url.substring(s)
				: url.substring(s, qi)

		${z?"const id = +requestId.value++":""}

		const ctx = {
			request,
			store,
			qi,
			path,
			set: {
				headers: {},
				status: 200
			}
			${z?",$$requestId: id":""}
			${W}
		}`,j("request",{unit:$.event.request.length,attribute:B.some((w)=>j0("context",w))||B.some((w)=>j0("store",w))||B.some((w)=>j0("set",w))?"ctx":""})();let{wsPaths:D,wsRouter:C}=$;if(Object.keys(D).length||C.history.length){for(let[w,U]of(H+=`
			if(request.method === 'GET') {
				switch(path) {`,Object.entries(D)))H+=`
					case '${w}':
						if(request.headers.get('upgrade') === 'websocket')
							return st${U}(ctx)
							
						break`;H+=`
				default:
					if(request.headers.get('upgrade') === 'websocket') {
						const route = findWs('ws', path)

						if(route) {
							ctx.params = route.params

							return route.store(ctx)
						}
					}

					break
			}
		}
`}return H+=`
		map: switch(path) {
			${Q}

			default:
				break
		}

		${Z}
	}`,$.handleError=GW($),Function("data",H)({app:$,mapEarlyResponse:e0,NotFoundError:O1,getReporter:()=>$.reporter,requestId:rH})},GW=($)=>{let W=`const {
		app: { event: { error: onError, onResponse: res } },
		mapResponse,
		ERROR_CODE
	} = inject

	return ${$.event.error.find(w0)?"async":""} function(context, error) {
		const { set } = context

		context.code = error.code
		context.error = error
		`;for(let H=0;H<$.event.error.length;H++){let Y=$.event.error[H],X=`${w0(Y)?"await ":""}onError[${H}](context)`;b$(Y.toString())?W+=`const r${H} = ${X}; if(r${H} !== undefined) {
				if(set.status === 200) set.status = error.status
				return mapResponse(r${H}, set)
			}
`:W+=X+"\n"}return Function("inject",W+=`if(error.constructor.name === "ValidationError" || error.constructor.name === "TransformDecodeError") {
		set.status = error.status ?? 400
		return new Response(
			error.message, 
			{ headers: set.headers, status: set.status }
		)
	} else {
		return new Response(error.message, { headers: set.headers, status: error.status ?? 500 })
	}
}`)({app:$,mapResponse:B1,ERROR_CODE:_1})};var r$=v0(CW(),1);var _W=($)=>async(W)=>{let H,Y={cookie:{},status:200,headers:{}};$.decorators?((H=$.decorators).request=W,H.set=Y,H.store=$.store):H={set:Y,store:$.store,request:W};let X=W.url,z=X.indexOf("/",11),Z=X.indexOf("?",z+1),Q=Z===-1?X.substring(z):X.substring(z,Z);try{let M;for(let O=0;O<$.event.request.length;O++){let N=$.event.request[O],b=N(H);if(b instanceof Promise&&(b=await b),b=e0(b,Y))return b}let B=$.dynamicRouter.find(W.method,Q)??$.dynamicRouter.find("ALL",Q);if(!B)throw new O1;let{handle:j,hooks:D,validator:C,content:w}=B.store;if(W.method!=="GET"&&W.method!=="HEAD")if(w)switch(w){case"application/json":M=await W.json();break;case"text/plain":M=await W.text();break;case"application/x-www-form-urlencoded":M=r$.parse(await W.text());break;case"application/octet-stream":M=await W.arrayBuffer();break;case"multipart/form-data":M={};let O=await W.formData();for(let N of O.keys()){if(M[N])continue;let b=O.getAll(N);b.length===1?M[N]=b[0]:M[N]=b}}else{let O=W.headers.get("content-type");if(O){let N=O.indexOf(";");N!==-1&&(O=O.slice(0,N));for(let b=0;b<$.event.parse.length;b++){let I=$.event.parse[b](H,O);if(I instanceof Promise&&(I=await I),I){M=I;break}}if(M===void 0)switch(O){case"application/json":M=await W.json();break;case"text/plain":M=await W.text();break;case"application/x-www-form-urlencoded":M=r$.parse(await W.text());break;case"application/octet-stream":M=await W.arrayBuffer();break;case"multipart/form-data":M={};let b=await W.formData();for(let I of b.keys()){if(M[I])continue;let k=b.getAll(I);k.length===1?M[I]=k[0]:M[I]=k}}}}for(let[O,N]of(H.body=M,H.params=B?.params||void 0,H.query=Z===-1?{}:r$.parse(X.substring(Z+1)),H.headers={},W.headers.entries()))H.headers[O]=N;let U=C?.cookie?.schema;H.cookie=await t$(H.set,H.headers.cookie,U?{secret:U.secrets!==void 0?typeof U.secrets=="string"?U.secrets:U.secrets.join(","):void 0,sign:U.sign===!0||(U.sign!==void 0?typeof U.sign=="string"?U.sign:U.sign.join(","):void 0)}:void 0);for(let O=0;O<D.transform.length;O++){let N=D.transform[O](H);D.transform[O].$elysia==="derive"?N instanceof Promise?Object.assign(H,await N):Object.assign(H,N):N instanceof Promise&&await N}if(C){if(C.headers){let O={};for(let N in W.headers)O[N]=W.headers.get(N);if(C.headers.Check(O)===!1)throw new F0("header",C.headers,O)}if(C.params?.Check(H.params)===!1)throw new F0("params",C.params,H.params);if(C.query?.Check(H.query)===!1)throw new F0("query",C.query,H.query);if(C.cookie){let O={};for(let[N,b]of Object.entries(H.cookie))O[N]=b.value;if(C.cookie?.Check(O)===!1)throw new F0("cookie",C.cookie,O)}if(C.body?.Check(M)===!1)throw new F0("body",C.body,M)}for(let O=0;O<D.beforeHandle.length;O++){let N=D.beforeHandle[O](H);if(N instanceof Promise&&(N=await N),N!==void 0){H.response=N;for(let I=0;I<D.afterHandle.length;I++){let k=D.afterHandle[I](H);k instanceof Promise&&(k=await k),k&&(N=k)}let b=e0(N,H.set);if(b)return b}}let A=j(H);if(A instanceof Promise&&(A=await A),D.afterHandle.length){H.response=A;for(let O=0;O<D.afterHandle.length;O++){let N=D.afterHandle[O](H);N instanceof Promise&&(N=await N);let b=e0(N,H.set);if(b!==void 0){let I=C?.response?.[A.status];if(I?.Check(b)===!1)throw new F0("response",I,b);return b}}}else{let O=C?.response?.[A.status];if(O?.Check(A)===!1)throw new F0("response",O,A)}if(H.set.cookie&&U?.sign){let O=U.secrets?typeof U.secrets=="string"?U.secrets:U.secrets[0]:void 0;if(U.sign===!0)for(let[N,b]of Object.entries(H.set.cookie))H.set.cookie[N].value=await H$(b.value,"${secret}");else for(let N of U.sign)N in U.properties&&H.set.cookie[N]?.value&&(H.set.cookie[N].value=await H$(H.set.cookie[N].value,O))}return B1(A,H.set)}catch(M){return M.status&&(Y.status=M.status),$.handleError(H,M)}finally{for(let M of $.event.onResponse)await M(H)}},$Y=($)=>async(W,H)=>{let Y=Object.assign(W,{error:H,code:H.code});Y.set=W.set;for(let X=0;X<$.event.error.length;X++){let z=$.event.error[X](Y);if(z instanceof Promise&&(z=await z),z!=null)return B1(z,W.set)}return new Response(typeof H.cause=="string"?H.cause:H.message,{headers:W.set.headers,status:H.status??500})};var Y0={};kW(Y0,{t:()=>{{return e.Type}},ElysiaType:()=>{{return S1}}});var k1=v0(U$(),1),e=v0(x0(),1),HY=v0(i$(),1);z0(Y0,v0(U$(),1));z0(Y0,v0(NW(),1));try{k1.TypeSystem.Format("email",($)=>/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i.test($)),k1.TypeSystem.Format("uuid",($)=>/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test($)),k1.TypeSystem.Format("date",($)=>!Number.isNaN(new Date($).getTime())),k1.TypeSystem.Format("date-time",($)=>!Number.isNaN(new Date($).getTime()))}catch($){}var WY=($)=>{if(typeof $=="string")switch($.slice(-1)){case"k":return 1024*+$.slice(0,$.length-1);case"m":return 1048576*+$.slice(0,$.length-1);default:return+$}return $},EW=($,W)=>{if(!(W instanceof Blob)||$.minSize&&W.size<WY($.minSize)||$.maxSize&&W.size>WY($.maxSize))return!1;if($.extension)if(typeof $.extension=="string"){if(!W.type.startsWith($.extension))return!1}else{for(let H=0;H<$.extension.length;H++)if(W.type.startsWith($.extension[H]))return!0;return!1}return!0},R9=k1.TypeSystem.Type("Files",($,W)=>{if(!Array.isArray(W))return EW($,W);if($.minItems&&W.length<$.minItems||$.maxItems&&W.length>$.maxItems)return!1;for(let H=0;H<W.length;H++)if(!EW($,W[H]))return!1;return!0});e.FormatRegistry.Set("numeric",($)=>!!$&&!isNaN(+$)),e.FormatRegistry.Set("ObjectString",($)=>{let W=$.charCodeAt(0);if((W===9||W===10||W===32)&&(W=$.trimStart().charCodeAt(0)),W!==123&&W!==91)return!1;try{return JSON.parse($),!0}catch{return!1}});var S1={Numeric:($)=>{let W=e.Type.Number($);return e.Type.Transform(e.Type.Union([e.Type.String({format:"numeric",default:0}),W])).Decode((H)=>{let Y=+H;if(isNaN(Y))return H;if($&&!HY.Value.Check(W,Y))throw new F0("property",W,Y);return Y}).Encode((H)=>H)},ObjectString:($,W)=>e.Type.Transform(e.Type.Union([e.Type.String({format:"ObjectString",default:""}),e.Type.Object($,W)])).Decode((H)=>{if(typeof H=="string")try{return JSON.parse(H)}catch{}return H}).Encode((H)=>JSON.stringify(H)),File:k1.TypeSystem.Type("File",EW),Files:($={})=>e.Type.Transform(R9($)).Decode((W)=>Array.isArray(W)?W:[W]).Encode((W)=>W),Nullable:($)=>e.Type.Union([e.Type.Null(),$]),MaybeEmpty:($)=>e.Type.Union([e.Type.Null(),e.Type.Undefined(),$]),Cookie:($,W)=>e.Type.Object($,W)};e.Type.ObjectString=S1.ObjectString,e.Type.Numeric=S1.Numeric,e.Type.File=($={})=>S1.File({default:"File",...$,extension:$?.type,type:"string",format:"binary"}),e.Type.Files=($={})=>S1.Files({...$,elysiaMeta:"Files",default:"Files",extension:$?.type,type:"array",items:{...$,default:"Files",type:"string",format:"binary"}}),e.Type.Nullable=($)=>S1.Nullable($),e.Type.MaybeEmpty=S1.MaybeEmpty,e.Type.Cookie=S1.Cookie;class x1{config;dependencies={};store={};decorators={};definitions={type:{},error:{}};schema={};event={start:[],request:[],parse:[],transform:[],beforeHandle:[],afterHandle:[],onResponse:[],trace:[],error:[],stop:[]};reporter=new yW;server=null;getServer(){return this.server}validator=null;router=new C1;wsRouter=new C1;routes=[];staticRouter={handlers:[],variables:"",map:{},all:""};wsPaths={};dynamicRouter=new C1;lazyLoadModules=[];path="";constructor($){this.config={forceErrorEncapsulation:!0,prefix:"",aot:!0,strictPath:!1,scoped:!1,cookie:{},...$,seed:$?.seed===void 0?"":$?.seed}}add($,W,H,Y,{allowMeta:X=!1,skipPrefix:z=!1}={allowMeta:!1,skipPrefix:!1}){for(let Z of(typeof W=="string"&&(W=[W]),W)){if(Z=Z===""?Z:Z.charCodeAt(0)===47?Z:`/${Z}`,this.config.prefix&&!z&&(Z=this.config.prefix+Z),Y?.type)switch(Y.type){case"text":Y.type="text/plain";break;case"json":Y.type="application/json";break;case"formdata":Y.type="multipart/form-data";break;case"urlencoded":Y.type="application/x-www-form-urlencoded";break;case"arrayBuffer":Y.type="application/octet-stream"}let Q=this.definitions.type,M=Z1(Y?.cookie??this.validator?.cookie,{dynamic:!this.config.aot,models:Q,additionalProperties:!0});r0(this.config.cookie??{})&&(M?M.schema=RH(M.schema,this.config.cookie??{}):M=Z1(e.Type.Cookie({},this.config.cookie),{dynamic:!this.config.aot,models:Q,additionalProperties:!0}));let B={body:Z1(Y?.body??this.validator?.body,{dynamic:!this.config.aot,models:Q}),headers:Z1(Y?.headers??this.validator?.headers,{dynamic:!this.config.aot,models:Q,additionalProperties:!0}),params:Z1(Y?.params??this.validator?.params,{dynamic:!this.config.aot,models:Q}),query:Z1(Y?.query??this.validator?.query,{dynamic:!this.config.aot,models:Q}),cookie:M,response:jW(Y?.response??this.validator?.response,{dynamic:!this.config.aot,models:Q})},j=P1(this.event,Y),D=Z.endsWith("/")?Z.slice(0,Z.length-1):Z+"/";if(this.config.aot===!1){this.dynamicRouter.add($,Z,{validator:B,hooks:j,content:Y?.type,handle:H}),this.config.strictPath===!1&&this.dynamicRouter.add($,D,{validator:B,hooks:j,content:Y?.type,handle:H}),this.routes.push({method:$,path:Z,composed:null,handler:H,hooks:j});return}let C=eH({path:Z,method:$,hooks:j,validator:B,handler:H,handleError:this.handleError,onRequest:this.event.request,config:this.config,definitions:X?this.definitions.type:void 0,schema:X?this.schema:void 0,getReporter:()=>this.reporter}),w=this.routes.findIndex((U)=>U.path===Z&&U.method===$);if(w!==-1&&this.routes.splice(w,1),this.routes.push({method:$,path:Z,composed:C,handler:H,hooks:j}),$==="$INTERNALWS"){let U=this.config.strictPath?void 0:Z.endsWith("/")?Z.slice(0,Z.length-1):Z+"/";if(Z.indexOf(":")===-1&&Z.indexOf("*")===-1){let A=this.staticRouter.handlers.length;this.staticRouter.handlers.push(C),this.staticRouter.variables+=`const st${A} = staticRouter.handlers[${A}]
`,this.wsPaths[Z]=A,U&&(this.wsPaths[U]=A)}else this.wsRouter.add("ws",Z,C),U&&this.wsRouter.add("ws",U,C);return}if(Z.indexOf(":")===-1&&Z.indexOf("*")===-1){let U=this.staticRouter.handlers.length;this.staticRouter.handlers.push(C),this.staticRouter.variables+=`const st${U} = staticRouter.handlers[${U}]
`,this.staticRouter.map[Z]||(this.staticRouter.map[Z]={code:""}),$==="ALL"?this.staticRouter.map[Z].all=`default: return st${U}(ctx)
`:this.staticRouter.map[Z].code=`case '${$}': return st${U}(ctx)
${this.staticRouter.map[Z].code}`,this.config.strictPath||(this.staticRouter.map[D]||(this.staticRouter.map[D]={code:""}),$==="ALL"?this.staticRouter.map[D].all=`default: return st${U}(ctx)
`:this.staticRouter.map[D].code=`case '${$}': return st${U}(ctx)
${this.staticRouter.map[D].code}`)}else this.router.add($,Z,C),this.config.strictPath||this.router.add($,Z.endsWith("/")?Z.slice(0,Z.length-1):Z+"/",C)}}onStart($){return this.on("start",$),this}onRequest($){return this.on("request",$),this}onParse($){return this.on("parse",$),this}onTransform($){return this.on("transform",$),this}onBeforeHandle($){return this.on("beforeHandle",$),this}onAfterHandle($){return this.on("afterHandle",$),this}onResponse($){return this.on("response",$),this}trace($){return this.reporter.on("event",vW(()=>this.reporter,this.event.trace.length,$)),this.on("trace",$),this}addError($,W){return this.error($,W)}error($,W){switch(typeof $){case"string":return W.prototype[_1]=$,this.definitions.error[$]=W,this;case"function":return this.definitions.error=$(this.definitions.error),this}for(let[H,Y]of Object.entries($))Y.prototype[_1]=H,this.definitions.error[H]=Y;return this}onError($){return this.on("error",$),this}onStop($){return this.on("stop",$),this}on($,W){for(let H of Array.isArray(W)?W:[W])switch(H=IH(H),$){case"start":this.event.start.push(H);break;case"request":this.event.request.push(H);break;case"response":this.event.onResponse.push(H);break;case"parse":this.event.parse.splice(this.event.parse.length-1,0,H);break;case"transform":this.event.transform.push(H);break;case"beforeHandle":this.event.beforeHandle.push(H);break;case"afterHandle":this.event.afterHandle.push(H);break;case"trace":this.event.trace.push(H);break;case"error":this.event.error.push(H);break;case"stop":this.event.stop.push(H)}return this}group($,W,H){let Y=new x1({...this.config,prefix:""});Y.store=this.store,Y.getServer=()=>this.server;let X=typeof W=="object",z=(X?H:W)(Y);return this.decorators=A1(this.decorators,Y.decorators),z.event.request.length&&(this.event.request=[...this.event.request,...z.event.request]),z.event.onResponse.length&&(this.event.onResponse=[...this.event.onResponse,...z.event.onResponse]),this.model(z.definitions.type),Object.values(Y.routes).forEach(({method:Z,path:Q,handler:M,hooks:B})=>{Q=(X?"":this.config.prefix)+$+Q,X?this.add(Z,Q,M,P1(W,{...B,error:B.error?Array.isArray(B.error)?[...B.error,...z.event.error]:[B.error,...z.event.error]:z.event.error})):this.add(Z,Q,M,P1(B,{error:z.event.error}),{skipPrefix:!0})}),this}guard($,W){if(!W)return this.event=c$(this.event,$),this.validator={body:$.body,headers:$.headers,params:$.params,query:$.query,response:$.response},this;let H=new x1;H.store=this.store;let Y=W(H);return this.decorators=A1(this.decorators,H.decorators),Y.event.request.length&&(this.event.request=[...this.event.request,...Y.event.request]),Y.event.onResponse.length&&(this.event.onResponse=[...this.event.onResponse,...Y.event.onResponse]),this.model(Y.definitions.type),Object.values(H.routes).forEach(({method:X,path:z,handler:Z,hooks:Q})=>{this.add(X,z,Z,P1($,{...Q,error:Q.error?Array.isArray(Q.error)?[...Q.error,...Y.event.error]:[Q.error,...Y.event.error]:Y.event.error}))}),this}use($){return $ instanceof Promise?(this.lazyLoadModules.push($.then((W)=>typeof W=="function"?W(this):typeof W.default=="function"?W.default(this):this._use(W)).then((W)=>W.compile())),this):this._use($)}_use($){if(typeof $=="function"){let X=$(this);return X instanceof Promise?(this.lazyLoadModules.push(X.then((z)=>{if(z instanceof x1){for(let{method:Z,path:Q,handler:M,hooks:B}of(this.compile(),Object.values(z.routes)))this.add(Z,Q,M,P1(B,{error:z.event.error}));return z}return typeof z=="function"?z(this):typeof z.default=="function"?z.default(this):this._use(z)}).then((z)=>z.compile())),this):X}let{name:W,seed:H}=$.config;$.getServer=()=>this.getServer();let Y=$.config.scoped;if(Y){if(W){W in this.dependencies||(this.dependencies[W]=[]);let z=H!==void 0?DW(W+JSON.stringify(H)):0;if(this.dependencies[W].some((Z)=>z===Z))return this;this.dependencies[W].push(z)}$.model(this.definitions.type),$.error(this.definitions.error),$.onRequest((z)=>{Object.assign(z,this.decorators),Object.assign(z.store,this.store)}),$.event.trace=[...this.event.trace,...$.event.trace],$.config.aot&&$.compile();let X=this.mount($.fetch);return this.routes=this.routes.concat(X.routes),this}for(let X of($.reporter=this.reporter,$.event.trace))this.trace(X);for(let{method:X,path:z,handler:Z,hooks:Q}of(this.decorate($.decorators),this.state($.store),this.model($.definitions.type),this.error($.definitions.error),Object.values($.routes)))this.add(X,z,Z,P1(Q,{error:$.event.error}));if(!Y)if(W){W in this.dependencies||(this.dependencies[W]=[]);let X=H!==void 0?DW(W+JSON.stringify(H)):0;if(this.dependencies[W].some((z)=>X===z))return this;this.dependencies[W].push(X),this.event=c$(this.event,KW($.event),X)}else this.event=c$(this.event,KW($.event));return this}mount($,W){if(typeof $=="function"||$.length===0||$==="/"){let X=typeof $=="function"?$:W,z=async({request:Z,path:Q})=>X(new Request(BW(Z.url)+Q||"/",Z));return this.all("/",z,{type:"none"}),this.all("/*",z,{type:"none"}),this}let H=$.length,Y=async({request:X,path:z})=>W(new Request(BW(X.url)+z.slice(H)||"/",X));return this.all($,Y,{type:"none"}),this.all($+($.endsWith("/")?"*":"/*"),Y,{type:"none"}),this}get($,W,H){return this.add("GET",$,W,H),this}post($,W,H){return this.add("POST",$,W,H),this}put($,W,H){return this.add("PUT",$,W,H),this}patch($,W,H){return this.add("PATCH",$,W,H),this}delete($,W,H){return this.add("DELETE",$,W,H),this}options($,W,H){return this.add("OPTIONS",$,W,H),this}all($,W,H){return this.add("ALL",$,W,H),this}head($,W,H){return this.add("HEAD",$,W,H),this}connect($,W,H){return this.add("CONNECT",$,W,H),this}ws($,W){let H=W.transformMessage?Array.isArray(W.transformMessage)?W.transformMessage:[W.transformMessage]:void 0,Y=null,X=Z1(W?.body,{models:this.definitions.type}),z=Z1(W?.response,{models:this.definitions.type}),Z=(Q)=>{if(typeof Q=="string"){let M=Q?.charCodeAt(0);if(M===47||M===123)try{Q=JSON.parse(Q)}catch{}else Number.isNaN(+Q)||(Q=+Q)}if(H?.length)for(let M=0;M<H.length;M++){let B=H[M](Q);B!==void 0&&(Q=B)}return Q};return this.route("$INTERNALWS",$,(Q)=>{let{set:M,path:B,qi:j,headers:D,query:C,params:w}=Q;if(Y===null&&(Y=this.getServer()),!Y?.upgrade(Q.request,{headers:typeof W.upgrade=="function"?W.upgrade(Q):W.upgrade,data:{validator:z,open(U){W.open?.(new $$(U,Q))},message:(U,A)=>{let O=Z(A);if(X?.Check(O)===!1)return void U.send(new F0("message",X,O).message);W.message?.(new $$(U,Q),O)},drain(U){W.drain?.(new $$(U,Q))},close(U,A,O){W.close?.(new $$(U,Q),A,O)}}}))return M.status=400,"Expected a websocket connection"},{beforeHandle:W.beforeHandle,transform:W.transform,headers:W.headers,params:W.params,query:W.query}),this}route($,W,H,{config:Y,...X}={config:{allowMeta:!1}}){return this.add($,W,H,X,Y),this}state($,W){switch(typeof $){case"object":return this.store=A1(this.store,$),this;case"function":return this.store=$(this.store),this}return $ in this.store||(this.store[$]=W),this}decorate($,W){switch(typeof $){case"object":return this.decorators=A1(this.decorators,$),this;case"function":return this.decorators=$(this.decorators),this}return $ in this.decorators||(this.decorators[$]=W),this}derive($){return $.$elysia="derive",this.onTransform($)}model($,W){switch(typeof $){case"object":return Object.entries($).forEach(([H,Y])=>{H in this.definitions.type||(this.definitions.type[H]=Y)}),this;case"function":return this.definitions.type=$(this.definitions.type),this}return this.definitions.type[$]=W,this}mapDerive($){return $.$elysia="derive",this.onTransform($)}affix($,W,H){if(H==="")return this;let Y=["_","-"," "],X=(M)=>M[0].toUpperCase()+M.slice(1),z=$==="prefix"?(M,B)=>Y.includes(M.at(-1)??"")?M+B:M+X(B):Y.includes(H.at(-1)??"")?(M,B)=>B+M:(M,B)=>B+X(M),Z=(M)=>{let B={};switch(M){case"decorator":for(let j in this.decorators)B[z(H,j)]=this.decorators[j];this.decorators=B;break;case"state":for(let j in this.store)B[z(H,j)]=this.store[j];this.store=B;break;case"model":for(let j in this.definitions.type)B[z(H,j)]=this.definitions.type[j];this.definitions.type=B;break;case"error":for(let j in this.definitions.error)B[z(H,j)]=this.definitions.error[j];this.definitions.error=B}},Q=Array.isArray(W)?W:[W];for(let M of Q.some((B)=>B==="all")?["decorator","state","model","error"]:Q)Z(M);return this}prefix($,W){return this.affix("prefix",$,W)}suffix($,W){return this.affix("suffix",$,W)}compile(){return this.fetch=this.config.aot?IW(this):_W(this),typeof this.server?.reload=="function"&&this.server.reload({...this.server,fetch:this.fetch}),this}handle=async($)=>this.fetch($);fetch=($)=>(this.fetch=this.config.aot?IW(this):_W(this))($);handleError=async($,W)=>(this.handleError=this.config.aot?GW(this):$Y(this))($,W);outerErrorHandler=($)=>new Response($.message||$.name||"Error",{status:$?.status??500});listen=($,W)=>{if(!Bun)throw Error("Bun to run");if(this.compile(),typeof $=="string"&&Number.isNaN($=+$.trim()))throw Error("Port must be a numeric value");let H=this.fetch,Y=typeof $=="object"?{development:!a1,...this.config.serve,...$,websocket:{...this.config.websocket,...qW},fetch:H,error:this.outerErrorHandler}:{development:!a1,...this.config.serve,websocket:{...this.config.websocket,...qW},port:$,fetch:H,error:this.outerErrorHandler};if(typeof Bun=="undefined")throw Error(".listen() is designed to run on Bun only. If you are running Elysia in other environment please use a dedicated plugin or export the handler via Elysia.fetch");return this.server=Bun?.serve(Y),this.event.start.length&&(async()=>{let X=Object.assign(this.decorators,{store:this.store,app:this});for(let z=0;z<this.event.transform.length;z++){let Z=this.event.transform[z](X);this.event.transform[z].$elysia==="derive"&&(Z instanceof Promise?Object.assign(X,await Z):Object.assign(X,Z))}for(let z=0;z<this.event.start.length;z++)this.event.start[z](X)})(),W&&W(this.server),Promise.all(this.lazyLoadModules).then(()=>{Bun?.gc(!1)}),this};stop=async()=>{if(!this.server)throw Error("Elysia isn't running. Call `app.listen` to start the server.");this.server.stop(),this.event.stop.length&&(async()=>{let $=Object.assign(this.decorators,{store:this.store,app:this});for(let W=0;W<this.event.transform.length;W++){let H=this.event.transform[W]($);this.event.transform[W].$elysia==="derive"&&(H instanceof Promise?Object.assign($,await H):Object.assign($,H))}for(let W=0;W<this.event.stop.length;W++)this.event.stop[W]($)})()};get modules(){return Promise.all(this.lazyLoadModules)}}var YY=["get","post","put","delete","head","options","patch","all"];async function I9($,W){const H=[],Y={},X=new Bun.FileSystemRouter({style:"nextjs",dir:W?.dir||"./src/routes"});for(let[z,Z]of Object.entries(X.routes))H.push(import(Z).then((Q)=>Y[z]=Q));await Promise.all(H);for(let[z,Z]of Object.entries(Y)){const Q=z.split("/")[1];for(let M of YY){const B=Z[M];if(!B)continue;$.group(Q,()=>$[M](z,B.handler,B.schema))}}}async function G9($){const W=new x1;return await I9(W,$),W}export{G9 as webster};
